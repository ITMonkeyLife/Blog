<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[IT Monkey Life]]></title>
  <link href="http://ITMonkeyLife.github.io/Blog/atom.xml" rel="self"/>
  <link href="http://ITMonkeyLife.github.io/Blog/"/>
  <updated>2016-11-21T14:45:23+08:00</updated>
  <id>http://ITMonkeyLife.github.io/Blog/</id>
  <author>
    <name><![CDATA[Rick]]></name>
    <email><![CDATA[382542165@qq.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[React.js 项目指南]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/11/21/react-dot-js-xiang-mu-zhi-nan/"/>
    <updated>2016-11-21T09:52:42+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/11/21/react-dot-js-xiang-mu-zhi-nan</id>
    <content type="html"><![CDATA[<p>React 是一种声明性、高效和灵活的JavaScript库来构建用户界面。</p>
<h2>
React 组件
</h2>
<p>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">class</span> <span class="nx">ShoppingList</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="k">return</span> <span class="p">(</span>
</span><span class="line">      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;shopping-list&quot;</span><span class="o">&gt;</span>
</span><span class="line">        <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Shopping</span> <span class="nx">List</span> <span class="k">for</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span><span class="line">        <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
</span><span class="line">          <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span><span class="nx">Instagram</span><span class="o">&lt;</span><span class="err">/li&gt;</span>
</span><span class="line">          <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span><span class="nx">WhatsApp</span><span class="o">&lt;</span><span class="err">/li&gt;</span>
</span><span class="line">          <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span><span class="nx">Oculus</span><span class="o">&lt;</span><span class="err">/li&gt;</span>
</span><span class="line">        <span class="o">&lt;</span><span class="err">/ul&gt;</span>
</span><span class="line">      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line">    <span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Example usage: &lt;ShoppingList name=&quot;Mark&quot; /&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
组件告诉React你想提供的，然后React会在你数据更新时高效更新和提供正确组件。

在这里，ShoppingList 是一个React组件类或者React组件类型。一个组件包含的参数成为props，并且通过render方法返回一个层级视图来显示。

render 方法返回一个描述关于你想render的，并且React采用描述返回给屏幕。特别是，render会返回一个React元素，一个render什么的轻量级描述。许多React开发者使用一个特殊的语法称之为JSX，可以更方便的编写这些结构。div标记在编译时被转化成了React.createElement(&#8216;div&#8217;)。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">className</span><span class="o">:</span> <span class="s1">&#39;shopping-list&#39;</span><span class="p">},</span>
</span><span class="line">  <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">,</span> <span class="p">...),</span>
</span><span class="line">  <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;ul&#39;</span><span class="p">,</span> <span class="p">...)</span>
</span><span class="line"><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
可以将任何 JavaScript 表达式放在大括号内 JSX 内。React的每个元素是一个真正的 JavaScript 对象，可以存储在一个变量或在程序中传递。
ShoppingList组件只能在内置的DOM组件提供，但是你能自己组合一个定制的React组件。通过<code><shoppinglist /></code>。每个组件都包含因此他能独立操作，允许你构建复杂的UI通过简单的组件。
</p>

<h2>
实例
</h2>
<p>
通过下面的例子来讲解React：
<!--more-->
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">class</span> <span class="nx">Square</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="k">return</span> <span class="p">(</span>
</span><span class="line">      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="o">&gt;</span>
</span><span class="line">        <span class="p">{</span><span class="cm">/* TODO */</span><span class="p">}</span>
</span><span class="line">      <span class="o">&lt;</span><span class="err">/button&gt;</span>
</span><span class="line">    <span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kr">class</span> <span class="nx">Board</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">renderSquare</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Square</span> <span class="o">/&gt;</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="kr">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="s1">&#39;Next player: X&#39;</span><span class="p">;</span>
</span><span class="line">    <span class="k">return</span> <span class="p">(</span>
</span><span class="line">      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
</span><span class="line">        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">status</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line">        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;board-row&quot;</span><span class="o">&gt;</span>
</span><span class="line">          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSquare</span><span class="p">(</span><span class="mi">0</span><span class="p">)}</span>
</span><span class="line">          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSquare</span><span class="p">(</span><span class="mi">1</span><span class="p">)}</span>
</span><span class="line">          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSquare</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span>
</span><span class="line">        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line">        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;board-row&quot;</span><span class="o">&gt;</span>
</span><span class="line">          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSquare</span><span class="p">(</span><span class="mi">3</span><span class="p">)}</span>
</span><span class="line">          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSquare</span><span class="p">(</span><span class="mi">4</span><span class="p">)}</span>
</span><span class="line">          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSquare</span><span class="p">(</span><span class="mi">5</span><span class="p">)}</span>
</span><span class="line">        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line">        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;board-row&quot;</span><span class="o">&gt;</span>
</span><span class="line">          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSquare</span><span class="p">(</span><span class="mi">6</span><span class="p">)}</span>
</span><span class="line">          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSquare</span><span class="p">(</span><span class="mi">7</span><span class="p">)}</span>
</span><span class="line">          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">renderSquare</span><span class="p">(</span><span class="mi">8</span><span class="p">)}</span>
</span><span class="line">        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line">      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line">    <span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kr">class</span> <span class="nx">Game</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="k">return</span> <span class="p">(</span>
</span><span class="line">      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;game&quot;</span><span class="o">&gt;</span>
</span><span class="line">        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;game-board&quot;</span><span class="o">&gt;</span>
</span><span class="line">          <span class="o">&lt;</span><span class="nx">Board</span> <span class="o">/&gt;</span>
</span><span class="line">        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line">        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;game-info&quot;</span><span class="o">&gt;</span>
</span><span class="line">          <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="cm">/* status */</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line">          <span class="o">&lt;</span><span class="nx">ol</span><span class="o">&gt;</span><span class="p">{</span><span class="cm">/* TODO */</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/ol&gt;</span>
</span><span class="line">        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line">      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line">    <span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="c1">// ========================================</span>
</span><span class="line">
</span><span class="line"><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
</span><span class="line">  <span class="o">&lt;</span><span class="nx">Game</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class="line">  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;container&#39;</span><span class="p">)</span>
</span><span class="line"><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="kd">function</span> <span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">const</span> <span class="nx">lines</span> <span class="o">=</span> <span class="p">[</span>
</span><span class="line">    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
</span><span class="line">    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
</span><span class="line">    <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
</span><span class="line">    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
</span><span class="line">    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
</span><span class="line">    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
</span><span class="line">    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
</span><span class="line">    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
</span><span class="line">  <span class="p">];</span>
</span><span class="line">  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="kr">const</span> <span class="p">[</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">]</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">===</span> <span class="nx">squares</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">===</span> <span class="nx">squares</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span> <span class="p">{</span>
</span><span class="line">      <span class="k">return</span> <span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">  <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
它包含了今天需要编写的脚本。它会提供一些样式这样你只需要关心的你javascript。
我们有三个组件：
<ul>
<li>Square</li>
<li>Board</li>
<li>Game</li>
</ul>

Square组件提供一个div，Board提供9宫格，Game提供一个板包含我们接下来要填的字段。calculateWinner这个函数我们接下来会用到。
</p>
<h3>
通过props传递数据
</h3>
<p>
我们试图从Board组件传递数据到Square组件。Board的renderSquare方法，改变这个代码去返回<code>&lt;Square value={i} /&gt;</code>然后改变Square的render方法展示替换<code>{/* TODO*/}</code>为<code>{this.props.value}</code>
</p>
<h3>
一个交互的组件
</h3>
<p>
Square组件填充
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;button</span> <span class="na">className=</span><span class="s">&quot;square&quot;</span> <span class="na">onClick=</span><span class="s">{()</span> <span class="err">=</span><span class="nt">&gt;</span> alert(&#39;click&#39;)}&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div>
通过在构造函数中设置this.state，React组件可以具有状态，这应该被视为组件的私有。 让我们将方形的当前值存储在状态中，并在单击方形时更改它。 首先，向类添加一个构造函数以初始化状态：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">class</span> <span class="nx">Square</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="kr">super</span><span class="p">();</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">value</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span><span class="line">    <span class="p">};</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">  <span class="p">...</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
在JavaScript类中，需要显式调用super（）; 当定义一个子类的构造函数。

现在更改render方法以显示this.state.value，而不是this.props.value，并将事件处理程序更改为be（）=&gt; this.setState（{value：&#8217;X&#8217;}），而不是alert：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;square&quot;</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;X&#39;</span><span class="p">})}</span><span class="o">&gt;</span>
</span><span class="line">    <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span>
</span><span class="line"><span class="o">&lt;</span><span class="err">/button&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
每当调用this.setState时，都会调度组件的更新，导致React在已传递的状态更新中合并，并重新渲染组件及其后代。 当组件重建时，this.state.value将是&#8217;X&#8217;，所以你将在网格中看到一个X.
</p>
<h3>
开发工具
</h3>
<p>
Chrome和Firefox的React Devtools Extensions允许您检查浏览器devtools中的React组件树。

它允许您检查树中任何组件的道具和状态。

它不能在CodePen上工作很好，因为多个框架，但如果你登录到CodePen并确认您的电子邮件（为防止垃圾邮件），您可以转到更改视图&gt;调试以在新标签中打开您的代码，然后 devtools将工作。 这是很好，如果你不想这样做。
</p>
<h3>
向上移动状态
</h3>
<p>
我们现在有一个tic-tac-toe游戏的基本构建块。 但现在，状态被封装在每个Square组件中。 要做一个全面的游戏，我们现在需要检查一个玩家是否赢得了游戏，并将X和O交替放置在正方形中。 要检查某人是否赢了，我们需要在一个地方拥有所有9个方块的值，而不是在Square组件之间拆分。

你可能认为Board应该询问每个Square的当前状态。 虽然在技术上可以在React中做到这一点，但是它不鼓励，因为它往往使代码难以理解，更脆弱，更难重构。

相反，这里的最佳解决方案是将此状态存储在Board组件中，而不是每个Square - 并且Board组件可以告诉每个Square要显示什么，就像我们如何让每个方块早先显示其索引。

当要聚合来自多个子项的数据或使两个子组件相互通信时，向上移动状态，使其居住在父组件中。 然后父对象可以通过props将状态传回给孩子，这样子组件总是与父对象和父对象同步。

在重构React组件时，向上拉这种状态是很常见的，所以让我们借此机会尝试一下。 为包含具有9个空值的数组的Board添加初始状态，对应于9个正方形：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">class</span> <span class="nx">Board</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="kr">super</span><span class="p">();</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">squares</span><span class="o">:</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">),</span>
</span><span class="line">    <span class="p">};</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
我们会在以后填写它，使板子看起来像:
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="p">[</span>
</span><span class="line">  <span class="s1">&#39;O&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="s1">&#39;O&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span>
</span><span class="line"><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
传递每个方块的值
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">renderSquare</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Square</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">]}</span> <span class="o">/&gt;</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
并更改Square以再次使用this.props.value。 现在我们需要改变点击方块时发生的情况。 Board组件现在存储哪些方块填充，这意味着我们需要一些方法来更新Board的状态。 由于组件状态被认为是私有的，我们不能直接从Square更新Board的状态。 这里通常的模式是传递一个函数从Board到Square，当方块被点击时被调用。 再次更改renderSquare，使其显示为：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="k">return</span> <span class="o">&lt;</span><span class="nx">Square</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">]}</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)}</span> <span class="o">/&gt;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
现在我们把两个props从Board传递给Square：value和onClick。 后者是Square可以调用的函数。 所以让我们通过改变在Square中的render有：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;square&quot;</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onClick</span><span class="p">()}</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
这意味着，当方块被点击时，它调用由父代传递的onClick函数。 onClick在这里没有任何特殊的意义，但它很受欢迎的命名处理程序道具从开始和他们的实现与句柄。 尝试点击一个方块 - 你应该得到一个错误，因为我们还没有定义handleClick。 将其添加到Board类中：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">const</span> <span class="nx">squares</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span class="line">  <span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span><span class="p">;</span>
</span><span class="line">  <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">squares</span><span class="o">:</span> <span class="nx">squares</span><span class="p">});</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
我们调用.slice（）来复制square数组，而不是改变现有数组。 下面会了解为什么不变性很重要。

现在你应该能够点击方块再次填充它们，但状态存储在Board组件，而不是每个Square，这使我们继续构建游戏。 注意每当Board的状态改变时，Square组件会自动重新渲染。

Board不再保持自己的状态; 它从其父Board接收其值，并在其被点击时通知其父级。 我们调用类似这种受控组件的组件。
</p>
<h3>
为什么不变性很重要
</h3>
<p>
在前面的代码示例中，我建议使用.slice（）运算符在进行更改之前复制方块数组，并防止对现有数组进行修改。 让我们来谈谈这是什么意思，以及为什么它是一个重要的学习概念。

通常有两种方式来改变数据。 第一种方法是通过直接改变变量的值来改变数据。 第二种方法是使用还包括所需更改的对象的新副本替换数据。

直接更改变量的值
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">var</span> <span class="nx">player</span> <span class="o">=</span> <span class="p">{</span><span class="nx">score</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Jeff&#39;</span><span class="p">};</span>
</span><span class="line"><span class="nx">player</span><span class="p">.</span><span class="nx">score</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class="line"><span class="c1">// Now player is {score: 2, name: &#39;Jeff&#39;}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

不直接更改变量的值
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">var</span> <span class="nx">player</span> <span class="o">=</span> <span class="p">{</span><span class="nx">score</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Jeff&#39;</span><span class="p">};</span>
</span><span class="line">
</span><span class="line"><span class="kd">var</span> <span class="nx">newPlayer</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="nx">player</span><span class="p">,</span> <span class="p">{</span><span class="nx">score</span><span class="o">:</span> <span class="mi">2</span><span class="p">});</span>
</span><span class="line"><span class="c1">// Now player is unchanged, but newPlayer is {score: 2, name: &#39;Jeff&#39;}</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Or if you are using object spread, you can write:</span>
</span><span class="line"><span class="c1">// var newPlayer = {score: 2, ...player};</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
最终结果是相同的，但是通过不直接改变（或改变底层数据），我们现在有一个额外的好处，可以帮助我们增加组件和总体应用程序性能。
</p>
<h4>
追踪变化
</h4>
<p>
确定改变对象是否已更改是复杂的，因为更改是直接对对象进行的。 这需要将当前对象与前一个副本进行比较，遍历整个对象树，并比较每个变量和值。 这个过程可能变得越来越复杂。

确定不可变对象如何改变是相当容易的。 如果被引用的对象与以前不同，那么对象已经改变。
</p>
<h3>
确定何时在React中重新渲染
</h3>
<p>
当你构建简单的纯组件时，React中不可变性的最大好处就是。 由于不可变数据可以更容易地确定是否已经进行了更改，因此也有助于确定组件何时需要重新渲染。

要了解如何构建纯组件，请参阅<a href="https://facebook.github.io/react/docs/update.html">shouldComponentUpdate()</a>。 另外，看看<a href="https://facebook.github.io/immutable-js/">Immutable.js</a>库来严格执行不可变的数据。
</p>
<h2>
功能组件
</h2>
<p>
回到我们的项目，你现在可以从Square中删除构造函数; 我们不再需要它了。 事实上，React支持一种更简单的语法，称为无状态功能组件，用于类似于仅由渲染方法组成的Square。 而不是定义一个扩展React.Component的类，只需编写一个函数，它接受props并返回应该渲染的内容：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">Square</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="k">return</span> <span class="p">(</span>
</span><span class="line">    <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;square&quot;</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">props</span><span class="p">.</span><span class="nx">onClick</span><span class="p">()}</span><span class="o">&gt;</span>
</span><span class="line">      <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span>
</span><span class="line">    <span class="o">&lt;</span><span class="err">/button&gt;</span>
</span><span class="line">  <span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
你需要改变this.props到props每次出现。 您的应用程序中的许多组件将能够写作功能组件：这些组件往往更容易编写，并且React将在未来更好地优化它们。
</p>
<h3>
轮换
</h3>
<p>
我们的游戏的一个明显缺陷是只有X可以玩。 让我们解决这个问题。

让我们默认第一个移动是&#8217;X&#8217;。 在我们的Board构造函数中修改我们的初始状态。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">class</span> <span class="nx">Board</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="kr">super</span><span class="p">();</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">      <span class="p">...</span>
</span><span class="line">      <span class="nx">xIsNext</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class="line">    <span class="p">};</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
每次我们移动，我们将通过翻转布尔值并保存状态来切换xIsNext。 现在更新我们的handleClick函数来翻转xIsNext的值。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">const</span> <span class="nx">squares</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span class="line">  <span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">xIsNext</span> <span class="o">?</span> <span class="s1">&#39;X&#39;</span> <span class="o">:</span> <span class="s1">&#39;O&#39;</span><span class="p">;</span>
</span><span class="line">  <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
</span><span class="line">    <span class="nx">squares</span><span class="o">:</span> <span class="nx">squares</span><span class="p">,</span>
</span><span class="line">    <span class="nx">xIsNext</span><span class="o">:</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">xIsNext</span><span class="p">,</span>
</span><span class="line">  <span class="p">});</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
现在X和O轮流。 接下来，更改Board的渲染中的“状态”文本，以便它也显示下一个是谁。
</p>
<h3>
宣布获胜者
</h3>
<p>
让我们展示游戏赢了。 已在文件底部为您提供了一个calculateWinner(squares)助手函数，其中包含9个值的列表。 你可以在Board的render函数中调用它来检查是否有人赢得了游戏，并且当有人赢了时，使状态文本显示“Winner：[X / O]”：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">const</span> <span class="nx">winner</span> <span class="o">=</span> <span class="nx">calculateWinner</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">squares</span><span class="p">);</span>
</span><span class="line">  <span class="kd">let</span> <span class="nx">status</span><span class="p">;</span>
</span><span class="line">  <span class="k">if</span> <span class="p">(</span><span class="nx">winner</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="nx">status</span> <span class="o">=</span> <span class="s1">&#39;Winner: &#39;</span> <span class="o">+</span> <span class="nx">winner</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">    <span class="nx">status</span> <span class="o">=</span> <span class="s1">&#39;Next player: &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">xIsNext</span> <span class="o">?</span> <span class="s1">&#39;X&#39;</span> <span class="o">:</span> <span class="s1">&#39;O&#39;</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">  <span class="p">...</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
你现在可以更改handleClick以更早返回，并忽略点击如果有人已经赢得了游戏或如果一个square已经填充：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">const</span> <span class="nx">squares</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span class="line">  <span class="k">if</span> <span class="p">(</span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span> <span class="o">||</span> <span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
</span><span class="line">    <span class="k">return</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">  <span class="p">...</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
恭喜！ 你现在有一个工作的tic-tac-toe游戏。 现在你知道React的基本知识。 所以你可能是真正的赢家。
</p>
<h3>
存储历史
</h3>
<p>
让我们可以重新审视board的旧状态，以便我们可以看到在任何以前的举动后，它看起来像什么。 我们已经在每次移动时创建了一个新的方形数组，这意味着我们可以轻松地同时存储过去的board状态。

让我们计划在状态中存储一个这样的对象：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">history</span> <span class="o">=</span> <span class="p">[</span>
</span><span class="line">  <span class="p">{</span>
</span><span class="line">    <span class="nx">squares</span><span class="o">:</span> <span class="p">[</span><span class="kc">null</span> <span class="nx">x</span> <span class="mi">9</span><span class="p">]</span>
</span><span class="line">  <span class="p">},</span>
</span><span class="line">  <span class="p">{</span>
</span><span class="line">    <span class="nx">squares</span><span class="o">:</span> <span class="p">[...</span> <span class="nx">x</span> <span class="mi">9</span><span class="p">]</span>
</span><span class="line">  <span class="p">},</span>
</span><span class="line">  <span class="p">...</span>
</span><span class="line"><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
我们希望顶级游戏组件负责显示移动列表。 因此，就像我们将状态从Square推入Board之前，让我们再次将它从Board上拉到游戏中 - 这样我们就可以获得顶级所需的所有信息。

首先，设置Game的初始状态：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">class</span> <span class="nx">Game</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="kr">super</span><span class="p">();</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">history</span><span class="o">:</span> <span class="p">[{</span>
</span><span class="line">        <span class="nx">squares</span><span class="o">:</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
</span><span class="line">      <span class="p">}],</span>
</span><span class="line">      <span class="nx">xIsNext</span><span class="o">:</span> <span class="kc">true</span>
</span><span class="line">    <span class="p">};</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">  <span class="p">...</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
然后从Board中删除构造函数，并更改Board，以便它通过props使用square，并具有自己的由Game指定的onClick prop，就像我们之前对Square的转换一样。 您可以将每个Square的位置传递到点击处理程序，以便我们仍然知道点击了哪个Square：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="k">return</span> <span class="o">&lt;</span><span class="nx">Square</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">]}</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)}</span> <span class="o">/&gt;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
游戏的渲染应该查看最近的历史记录，并可以接管计算游戏状态：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">const</span> <span class="nx">history</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">history</span><span class="p">;</span>
</span><span class="line"><span class="kr">const</span> <span class="nx">current</span> <span class="o">=</span> <span class="nx">history</span><span class="p">[</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
</span><span class="line"><span class="kr">const</span> <span class="nx">winner</span> <span class="o">=</span> <span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">squares</span><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="kd">let</span> <span class="nx">status</span><span class="p">;</span>
</span><span class="line"><span class="k">if</span> <span class="p">(</span><span class="nx">winner</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">status</span> <span class="o">=</span> <span class="s1">&#39;Winner: &#39;</span> <span class="o">+</span> <span class="nx">winner</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">status</span> <span class="o">=</span> <span class="s1">&#39;Next player: &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">xIsNext</span> <span class="o">?</span> <span class="s1">&#39;X&#39;</span> <span class="o">:</span> <span class="s1">&#39;O&#39;</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="p">...</span>
</span><span class="line"><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;game-board&quot;</span><span class="o">&gt;</span>
</span><span class="line">  <span class="o">&lt;</span><span class="nx">Board</span>
</span><span class="line">    <span class="nx">squares</span><span class="o">=</span><span class="p">{</span><span class="nx">current</span><span class="p">.</span><span class="nx">squares</span><span class="p">}</span>
</span><span class="line">    <span class="nx">onClick</span><span class="o">=</span><span class="p">{(</span><span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)}</span>
</span><span class="line">  <span class="o">/&gt;</span>
</span><span class="line"><span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line"><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;game-info&quot;</span><span class="o">&gt;</span>
</span><span class="line">  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">status</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class="line">  <span class="o">&lt;</span><span class="nx">ol</span><span class="o">&gt;</span><span class="p">{</span><span class="cm">/* TODO */</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/ol&gt;</span>
</span><span class="line"><span class="o">&lt;</span><span class="err">/div&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
它的handleClick可以通过连接新的历史记录条目来创建新的历史记录数组来将新的条目推入堆栈：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">const</span> <span class="nx">history</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">history</span><span class="p">;</span>
</span><span class="line">  <span class="kr">const</span> <span class="nx">current</span> <span class="o">=</span> <span class="nx">history</span><span class="p">[</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
</span><span class="line">  <span class="kr">const</span> <span class="nx">squares</span> <span class="o">=</span> <span class="nx">current</span><span class="p">.</span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span class="line">  <span class="k">if</span> <span class="p">(</span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span> <span class="o">||</span> <span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
</span><span class="line">    <span class="k">return</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">  <span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">xIsNext</span> <span class="o">?</span> <span class="s1">&#39;X&#39;</span> <span class="o">:</span> <span class="s1">&#39;O&#39;</span><span class="p">;</span>
</span><span class="line">  <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
</span><span class="line">    <span class="nx">history</span><span class="o">:</span> <span class="nx">history</span><span class="p">.</span><span class="nx">concat</span><span class="p">([{</span>
</span><span class="line">      <span class="nx">squares</span><span class="o">:</span> <span class="nx">squares</span>
</span><span class="line">    <span class="p">}]),</span>
</span><span class="line">    <span class="nx">xIsNext</span><span class="o">:</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">xIsNext</span><span class="p">,</span>
</span><span class="line">  <span class="p">});</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
此时，Board只需要renderSquare和render; 状态初始化和点击处理程序都应该存在于Game中。
</p>
<h3>
显示移动
</h3>
<p>
让我们展示以前在游戏中做的动作。 我们早些时候学到React元素是一流的JS对象，我们可以存储它们或传递它们。 要在React中渲染多个项目，我们传递一个React元素数组。 最常见的构建数组的方法是映射数据数组。 让我们在游戏的渲染方法中这样做：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">const</span> <span class="nx">moves</span> <span class="o">=</span> <span class="nx">history</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">step</span><span class="p">,</span> <span class="nx">move</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">const</span> <span class="nx">desc</span> <span class="o">=</span> <span class="nx">move</span> <span class="o">?</span>
</span><span class="line">    <span class="s1">&#39;Move #&#39;</span> <span class="o">+</span> <span class="nx">move</span> <span class="o">:</span>
</span><span class="line">    <span class="s1">&#39;Game start&#39;</span><span class="p">;</span>
</span><span class="line">  <span class="k">return</span> <span class="p">(</span>
</span><span class="line">    <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span>
</span><span class="line">      <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;#&quot;</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">move</span><span class="p">)}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">desc</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/a&gt;</span>
</span><span class="line">    <span class="o">&lt;</span><span class="err">/li&gt;</span>
</span><span class="line">  <span class="p">);</span>
</span><span class="line"><span class="p">});</span>
</span><span class="line"><span class="p">...</span>
</span><span class="line"><span class="o">&lt;</span><span class="nx">ol</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">moves</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/ol&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
对于历史记录中的每个步骤，我们创建一个列表项<li>，其中的链接a在无处（href =“＃”），但有一个点击处理程序，我们将很快实现。 有了这个代码，你应该看到在游戏中做出的举动的列表，以及一个警告说
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">Warning</span><span class="o">:</span> <span class="nx">Each</span> <span class="nx">child</span> <span class="k">in</span> <span class="nx">an</span> <span class="nx">array</span> <span class="nx">or</span> <span class="nx">iterator</span> <span class="nx">should</span> <span class="nx">have</span> <span class="nx">a</span> <span class="nx">unique</span> <span class="s2">&quot;key&quot;</span> <span class="nx">prop</span><span class="p">.</span> <span class="nx">Check</span> <span class="nx">the</span> <span class="nx">render</span> <span class="nx">method</span> <span class="nx">of</span> <span class="s2">&quot;Game&quot;</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
让我们来谈谈这个警告是什么意思。

<h3>
Keys
</h3>
<p>
当渲染项目列表时，React总是存储列表中每个项目的一些信息。 如果渲染具有状态的组件，该状态需要存储，并且无论如何实现组件，React都会存储对后端本地视图的引用。

当您更新该列表时，React需要确定已更改的内容。 您可以在列表中添加，删除，重新排列或更新项目。

想象一下
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;li&gt;</span>Alexa: 7 tasks left<span class="nt">&lt;/li&gt;</span>
</span><span class="line"><span class="nt">&lt;li&gt;</span>Ben: 5 tasks left<span class="nt">&lt;/li&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
改成了
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;li&gt;</span>Ben: 9 tasks left<span class="nt">&lt;/li&gt;</span>
</span><span class="line"><span class="nt">&lt;li&gt;</span>Claudia: 8 tasks left<span class="nt">&lt;/li&gt;</span>
</span><span class="line"><span class="nt">&lt;li&gt;</span>Alexa: 5 tasks left<span class="nt">&lt;/li&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
对于人眼来说，看起来很可能Alexa和Ben交换了地方，Claudia被添加了 - 但React只是一个计算机程序，不知道你打算做什么。 因此，React要求您在列表中的每个元素上指定一个键属性，一个字符串来区分每个组件与其同级。 在这种情况下，alexa，ben，claudia可能是合理的键; 如果项目对应于数据库中的对象，则数据库ID通常是一个不错的选择：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;li</span> <span class="na">key=</span><span class="s">{user.id}</span><span class="nt">&gt;</span>{user.name}: {user.taskCount} tasks left<span class="nt">&lt;/li&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
key是React保留的一个特殊属性（与ref一起，是一个更高级的特性）。 当一个元素被创建时，React拉下key属性并将键直接存储在返回的元素上。 即使它可能看起来像是道具的一部分，它不能使用this.props.key来引用。 React在决定更新哪些子项时自动使用该键; 组件无法查询其自己的key。

当重新列出列表时，React会使用新版本中的每个元素，并在上一个列表中查找具有匹配键的元素。 当向该集合添加键时，将创建一个组件; 当删除键时，组件被销毁。 键告诉React关于每个组件的身份，以便它可以保持整个rerenders状态。 如果更改组件的键，它将被完全销毁并使用新状态重新创建。

强烈建议您在构建动态列表时分配正确的键。 如果您没有适当的key，您可能需要考虑重组您的数据，以便使用。

如果你不指定任何键，React会警告你并回退到使用数组索引作为键 - 这不是正确的选择，如果你重新排序列表中的元素或添加/删除项目的任何地方，但底部 列表。 显式传递key = {i}使警告静音，但具有相同的问题，因此在大多数情况下不建议使用。

组件键不需要是全局唯一的，相对于直接同级的只有唯一的。
</p>
<h3>
实施时间旅行
</h3>
<p>
对于我们的移动列表，我们已经为每个步骤都有一个唯一的ID：发生移动的次数。 将键添加为&lt;li key= {move}&gt;，键警告应该消失。

单击任何移动链接都会抛出错误，因为jumpTo未定义。 让我们在Game的状态中添加一个新键，以指示我们当前正在查看哪个步骤。 首先，将stepNumber：0添加到初始状态，然后让jumpTo更新该状态。

我们还想更新xIsNext。 如果移动号码的索引是偶数，那么我们将xIsNext设置为true。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
</span><span class="line">    <span class="nx">stepNumber</span><span class="o">:</span> <span class="nx">step</span><span class="p">,</span>
</span><span class="line">    <span class="nx">xIsNext</span><span class="o">:</span> <span class="p">(</span><span class="nx">step</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class="line">  <span class="p">});</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
然后通过向handleClick中的状态更新添加步骤Number：history.length来更新新的移动时的Number。 现在您可以修改渲染以从历史记录中的该步骤读取：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">const</span> <span class="nx">current</span> <span class="o">=</span> <span class="nx">history</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">stepNumber</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
如果你现在点击任何移动链接，Board应该立即更新，以显示游戏当时的样子。 您可能还需要更新handleClick以在读取当前Board状态时注意stepNumber，以便您可以及时返回，然后单击Board以创建新条目。 （提示：最简单的是.slice（）从handleClick的最顶部的历史的额外元素）。
</p>
<h2>
结束
</h2>
<p>
现在，你做了一个tic-tac-toe游戏：
<ul>
<li>让你玩tic-tac-toe，</li>
<li>表示当一个玩家赢得游戏时，</li>
<li>存储游戏期间的移动历史，</li>
<li>允许玩家在时间上跳回来看到老版本的游戏板。</li>
</ul>

我们希望你现在觉得你有一个正确的把握React的工作原理。

如果你有额外的时间或想练习你的新技能，这里有一些想法，你可以做的改进，列出难度递增的顺序：

<ul>
<li>1、以“（1，3）”格式而不是“6”格式显示移动位置。</li>
<li>2、加粗移动列表中当前选择的项目。</li>
<li>3、重写板使用两个循环来制作正方形，而不是硬编码。</li>
<li>4、添加一个切换按钮，可以按升序或降序对移动进行排序。</li>
<li>5、当有人赢了，突出显示导致胜利的三个方块。</li>
</ul>
</p>
 <hr />
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</li></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[React Native开发Redux]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/11/17/react-nativekai-fa-redux/"/>
    <updated>2016-11-17T14:52:37+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/11/17/react-nativekai-fa-redux</id>
    <content type="html"><![CDATA[<p>
Redux是一个可预测的javascript应用程序的状态容器。

它可以帮助您编写行为一致，在不同环境（客户端，服务器和本机）中运行的应用程序，并且易于测试。 此外，它提供了一个伟大的开发者体验，如实时代码编辑结合一个时间旅行调试器。
</p>
<p>
您可以与React或任何其他视图库一起使用<a href="https://facebook.github.io/react/">Redux</a>。
它是微小的（2kB，包括依赖）。
从其创建者学习Redux：<a href="https://egghead.io/series/getting-started-with-redux">Redux学习入门</a>
</p>
<h3>
开发经验
</h3>
<p>
我在工作在我的React Europe谈话时写了Redux，名为“Hot Reloading with Time Travel”。 我的目标是创建一个状态管理库，具有最少的API，但完全可预测的行为，所以可以实现日志记录，热重新加载，时间旅行，通用应用程序，记录和重放，没有任何从开发人员买入。
</p>
<h3>
影响
</h3>
<p>
Redux演化了<a href="http://facebook.github.io/flux/">Flux</a>的想法，但通过从<a href="https://github.com/evancz/elm-architecture-tutorial/">Elm</a>提取线索来避免其复杂性。
无论您是否使用过它们，Redux只需要几分钟的时间就可以开始使用。
</p>
<h3>
安装
</h3>
<p>
安装稳定版本：
<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">npm install --save redux</span></code></pre></td></tr></table></div></figure></notextile></div>
这假设你使用<a href="https://www.npmjs.com/">npm</a>作为你的包管理器。

最常见的是人们使用Redux作为<a href="http://webpack.github.io/docs/commonjs.html">CommonJS</a>模块的集合。 这些模块是在<a href="http://webpack.github.io/">Webpack</a>，<a href="http://browserify.org/">Browserify</a>或Node环境中导入redux时得到的。 如果你喜欢生活在边缘，使用<a href="http://rollupjs.org/">Rollup</a>，我们也支持。

如果你不使用模块bundler，它也没关系。 <code>redux</code> npm包包括在<a href="https://unpkg.com/redux/dist/">dist文件夹</a>中预编译的生产和开发<a href="https://github.com/umdjs/umd">UMD</a>版本。 它们可以直接使用而无需捆绑器，因此与许多流行的javascript模块加载器和环境兼容。 例如，可以将UMD构建作为<a href="https://unpkg.com/redux/dist/redux.js">script标记</a>放在页面上，或者告诉<a href="https://github.com/reactjs/redux/pull/1181#issuecomment-167361975">Bower安装它</a>。 UMD构建使Redux可用作<code>window.Redux</code>全局变量。

Redux源代码是在ES2015中编写的，但我们将CommonJS和UMD构建预编译为ES5，因此它们可在<a href="http://caniuse.com/#feat=es5">任何现代浏览器</a>中使用。 您不需要使用Babel或模块捆绑包来<a href="https://github.com/reactjs/redux/blob/master/examples/counter-vanilla/index.html">开始使用Redux</a>。
</p>
<h3>
互补包
</h3>
<p>
很可能，您还需要<a href="https://github.com/reactjs/react-redux">React绑定</a>和<a href="https://github.com/gaearon/redux-devtools">开发人员工具</a>。
<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class=""><span class="line">npm install --save react-redux
</span><span class="line">npm install --save-dev redux-devtools</span></code></pre></td></tr></table></div></figure></notextile></div>

请注意，与Redux本身不同，Redux生态系统中的许多软件包不提供UMD构建，因此我们建议使用<a href="http://webpack.github.io/"> Webpack </a>和<a href="http://browserify.org/">Browserify</a>之类的CommonJS模块捆绑软件，以获得最舒适的开发体验。
</p>
<h3>
要点
</h3>
<p>
应用程序的整个状态存储在单个存储中的对象树中。
改变状态树的唯一方法是发出一个动作，一个描述发生了什么的对象。
要指定动作如何转换状态树，您需要编写纯reducer。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createStore</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;redux&#39;</span>
</span><span class="line">
</span><span class="line"><span class="cm">/**</span>
</span><span class="line"><span class="cm"> * This is a reducer, a pure function with (state, action) =&gt; state signature.</span>
</span><span class="line"><span class="cm"> * It describes how an action transforms the state into the next state.</span>
</span><span class="line"><span class="cm"> *</span>
</span><span class="line"><span class="cm"> * The shape of the state is up to you: it can be a primitive, an array, an object,</span>
</span><span class="line"><span class="cm"> * or even an Immutable.js data structure. The only important part is that you should</span>
</span><span class="line"><span class="cm"> * not mutate the state object, but return a new object if the state changes.</span>
</span><span class="line"><span class="cm"> *</span>
</span><span class="line"><span class="cm"> * In this example, we use a `switch` statement and strings, but you can use a helper that</span>
</span><span class="line"><span class="cm"> * follows a different convention (such as function maps) if it makes sense for your</span>
</span><span class="line"><span class="cm"> * project.</span>
</span><span class="line"><span class="cm"> */</span>
</span><span class="line"><span class="kd">function</span> <span class="nx">counter</span><span class="p">(</span><span class="nx">state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="k">case</span> <span class="s1">&#39;INCREMENT&#39;</span><span class="o">:</span>
</span><span class="line">    <span class="k">return</span> <span class="nx">state</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class="line">  <span class="k">case</span> <span class="s1">&#39;DECREMENT&#39;</span><span class="o">:</span>
</span><span class="line">    <span class="k">return</span> <span class="nx">state</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class="line">  <span class="k">default</span><span class="o">:</span>
</span><span class="line">    <span class="k">return</span> <span class="nx">state</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Create a Redux store holding the state of your app.</span>
</span><span class="line"><span class="c1">// Its API is { subscribe, dispatch, getState }.</span>
</span><span class="line"><span class="kd">let</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">(</span><span class="nx">counter</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="c1">// You can use subscribe() to update the UI in response to state changes.</span>
</span><span class="line"><span class="c1">// Normally you&#39;d use a view binding library (e.g. React Redux) rather than subscribe() directly.</span>
</span><span class="line"><span class="c1">// However it can also be handy to persist the current state in the localStorage.</span>
</span><span class="line">
</span><span class="line"><span class="nx">store</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(()</span> <span class="o">=&gt;</span>
</span><span class="line">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">getState</span><span class="p">())</span>
</span><span class="line"><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="c1">// The only way to mutate the internal state is to dispatch an action.</span>
</span><span class="line"><span class="c1">// The actions can be serialized, logged or stored and later replayed.</span>
</span><span class="line"><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;INCREMENT&#39;</span> <span class="p">})</span>
</span><span class="line"><span class="c1">// 1</span>
</span><span class="line"><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;INCREMENT&#39;</span> <span class="p">})</span>
</span><span class="line"><span class="c1">// 2</span>
</span><span class="line"><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;DECREMENT&#39;</span> <span class="p">})</span>
</span><span class="line"><span class="c1">// 1</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<!--more-->
而不是直接改变状态，你指定你想要发生的变异称为动作的简单对象的突变。 然后，您编写一个称为reducer的特殊函数来决定每个操作如何转换整个应用程序的状态。

如果你来自Flux，有一个重要的区别，你需要了解。 Redux没有Dispatcher或者支持很多商店。 相反，只有一个存储具有单个根减少功能。 随着应用程序的增长，而不是添加商店，您将根还原器分割成更小的reducer独立操作在状态树的不同部分。 这就像在React应用程序中只有一个根组件，但是它由许多小组件组成。

这个架构可能看起来像一个计数器应用程序的过分，但这种模式的美丽是它扩展到大型和复杂的应用程序。 它还支持非常强大的开发工具，因为可以跟踪每个突变到导致它的操作。 您可以记录用户会话，并通过重播每个操作重现它们。


<a href="https://egghead.io/series/getting-started-with-redux">Redux入门</a>是一个视频课程，由30个视频组成，由Dan Abramov（Redux的作者）讲述。 它旨在补充文档的“基础”部分，同时提供关于不可变性，测试，Redux最佳实践以及使用Redux与React的更多见解。 本课程是免费的，将永远是。
</p>
<h3>
附录
</h3>
<p>
<a href="http://redux.js.org/docs/basics/">http://redux.js.org/docs/basics/</a>
</p>

<h3>
动机
</h3>
<p>
由于对javascript单页应用程序的要求变得越来越复杂，我们的代码必须管理更多的状态。 此状态可以包括服务器响应和缓存数据，以及尚未保留到服务器的本地创建的数据。 UI状态也越来越复杂，因为我们需要管理活动路由，选定的选项卡，是否显示微调框，是否应显示分页控件等。

管理这种不断变化的状态是很困难的。 如果模型可以更新另一个模型，则视图可以更新模型，该模型更新另一个模型，这反过来可能导致另一个视图更新。 在某些时候，你不再理解你的应用程序发生了什么，因为你失去了对状态的时间，原因和方式的控制。 当系统不透明和非确定性时，很难再现错误或添加新功能。

好像这还不够，考虑新的需求在前端产品开发中变得普遍。 作为开发人员，我们需要处理乐观更新，服务器端呈现，在执行路由转换之前获取数据，等等。 我们发现自己试图管理我们从来没有处理的复杂性，我们不可避免地提出这个问题：是时候放弃了吗？ 答案是不。

这种复杂性很难处理，因为我们混合了两个对人类思想很难理解的概念：变异和异步性。 我叫他们<a href="https://en.wikipedia.org/wiki/Diet_Coke_and_Mentos_eruption">Mentos和Coke</a>。 两者都可以伟大的分离，但在一起，他们创造了一团糟。 像React这样的库试图通过同时删除异步和直接DOM操作来解决视图层中的这个问题。 但是，管理数据的状态取决于您。 这是Redux进入的地方。

在Flux，<a href="http://martinfowler.com/bliki/CQRS.html">CQRS</a>和<a href="http://martinfowler.com/eaaDev/EventSourcing.html">Event Sourcing</a>的步骤中，Redux试图通过对可能发生更新的方式和时间施加某些限制来使状态突变可预测。 这些限制反映在Redux的三个原则中。

CQRS代表命令查询责任分离。 这是我第一次听到格雷格·杨描述的模式。 其核心是这样的概念：您可以使用不同的模型来更新信息，而不是用于读取信息的模型。 在某些情况下，这种分离是有价值的，但要注意对于大多数系统，CQRS增加了复杂性。

我们可以查询应用程序的状态以找出世界的当前状态，这回答了许多问题。然而，有时我们不只是想看看我们在哪里，我们也想知道我们如何到达那里。

事件源采购确保对应用程序状态的所有更改都存储为事件序列。我们不仅可以查询这些事件，还可以使用事件日志来重建过去的状态，并作为自动调整状态以应对追溯变化的基础。

Event Sourcing的基本思想是确保每个对应用程序状态的更改都捕获在事件对象中，并且这些事件对象本身按应用程序状态本身的相同生命周期存储在序列中。

让我们考虑一个关于运送通知的简单示例。在这个例子中，我们在公海上有许多船只，我们需要知道它们在哪里。一个简单的方法是让跟踪应用程序具有方法，以允许我们告知船舶何时到达或离开港口。

在这种情况下，当调用服务时，它会找到相关的船并更新其位置。船舶对象记录船舶的当前已知状态。

Event Sourcing简介为此过程增加了一个步骤。现在服务创建一个事件对象来记录更改并处理它以更新船。

看看刚才的处理，这只是一个不必要的间接级别。有趣的区别是，当我们看看在几个更改后应用程序中存在什么。让我们想象一些简单的变化：

使用基本服务，我们只看到船对象捕获的最终状态。我将这个称为应用程序状态。

使用事件源，我们还捕获每个事件。如果我们使用持久存储，事件将被持久化，就像船对象一样。我认为我们坚持两种不同的东西应用程序状态和事件日志是有用的。
</p>
<h2>
三个原则
</h2>
<p>
Redux可以用三个基本原则来描述：
</p>
<h3>
事实唯一性
</h3>
<p>
整个应用程序的状态存储在单个存储中的对象树中。

这使得创建通用应用程序变得容易，因为来自服务器的状态可以被序列化并转化到客户端，而无需额外的编码工作。 单个状态树还使得更容易调试或内测应用程序; 它还使您能够坚持您的应用程序的状态在开发中，以更快的开发周期。 一些传统上很难实现的功能 - 例如撤消/重做 - 如果你的所有状态都存储在一棵树中，那么它可能突然变得不重要。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">getState</span><span class="p">())</span>
</span><span class="line">
</span><span class="line"><span class="cm">/* Prints</span>
</span><span class="line"><span class="cm">{</span>
</span><span class="line"><span class="cm">  visibilityFilter: &#39;SHOW_ALL&#39;,</span>
</span><span class="line"><span class="cm">  todos: [</span>
</span><span class="line"><span class="cm">    {</span>
</span><span class="line"><span class="cm">      text: &#39;Consider using Redux&#39;,</span>
</span><span class="line"><span class="cm">      completed: true,</span>
</span><span class="line"><span class="cm">    },</span>
</span><span class="line"><span class="cm">    {</span>
</span><span class="line"><span class="cm">      text: &#39;Keep all state in a single tree&#39;,</span>
</span><span class="line"><span class="cm">      completed: false</span>
</span><span class="line"><span class="cm">    }</span>
</span><span class="line"><span class="cm">  ]</span>
</span><span class="line"><span class="cm">}</span>
</span><span class="line"><span class="cm">*/</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<h3>
状态只读
</h3>
<p>
改变状态的唯一方法是发出一个动作，一个描述发生了什么的对象。
这确保视图和网络回调都不会直接写入状态。 相反，他们表达了改变状态的意图。 因为所有的变化是集中的，并以严格的顺序一个接一个地发生，没有微妙的竞争条件值得注意。 由于操作只是普通对象，它们可以被记录，序列化，存储，并且随后被重放以用于调试或测试目的。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span>
</span><span class="line">  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;COMPLETE_TODO&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">index</span><span class="o">:</span> <span class="mi">1</span>
</span><span class="line"><span class="p">})</span>
</span><span class="line">
</span><span class="line"><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span>
</span><span class="line">  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;SET_VISIBILITY_FILTER&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">filter</span><span class="o">:</span> <span class="s1">&#39;SHOW_COMPLETED&#39;</span>
</span><span class="line"><span class="p">})</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<h3>
使用纯函数进行更改
</h3>
<p>
要指定如何通过操作转换状态树，可以编写纯reducer。

减少者只是纯函数，它采取前一个状态和一个动作，并返回下一个状态。 记住返回新的状态对象，而不是改变之前的状态。 你可以从一个单一的reducer开始，随着你的应用程序的增长，把它拆分成更小的reducer，它管理状态树的特定部分。 因为reducers只是函数，你可以控制它们被调用的顺序，传递额外的数据，甚至为普通任务（如分页）创建可重用的reducers。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">visibilityFilter</span><span class="p">(</span><span class="nx">state</span> <span class="o">=</span> <span class="s1">&#39;SHOW_ALL&#39;</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">case</span> <span class="s1">&#39;SET_VISIBILITY_FILTER&#39;</span><span class="o">:</span>
</span><span class="line">      <span class="k">return</span> <span class="nx">action</span><span class="p">.</span><span class="nx">filter</span>
</span><span class="line">    <span class="k">default</span><span class="o">:</span>
</span><span class="line">      <span class="k">return</span> <span class="nx">state</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kd">function</span> <span class="nx">todos</span><span class="p">(</span><span class="nx">state</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">case</span> <span class="s1">&#39;ADD_TODO&#39;</span><span class="o">:</span>
</span><span class="line">      <span class="k">return</span> <span class="p">[</span>
</span><span class="line">        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
</span><span class="line">        <span class="p">{</span>
</span><span class="line">          <span class="nx">text</span><span class="o">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span>
</span><span class="line">          <span class="nx">completed</span><span class="o">:</span> <span class="kc">false</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">      <span class="p">]</span>
</span><span class="line">    <span class="k">case</span> <span class="s1">&#39;COMPLETE_TODO&#39;</span><span class="o">:</span>
</span><span class="line">      <span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">todo</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="line">        <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">===</span> <span class="nx">action</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">          <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="nx">todo</span><span class="p">,</span> <span class="p">{</span>
</span><span class="line">            <span class="nx">completed</span><span class="o">:</span> <span class="kc">true</span>
</span><span class="line">          <span class="p">})</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">        <span class="k">return</span> <span class="nx">todo</span>
</span><span class="line">      <span class="p">})</span>
</span><span class="line">    <span class="k">default</span><span class="o">:</span>
</span><span class="line">      <span class="k">return</span> <span class="nx">state</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">combineReducers</span><span class="p">,</span> <span class="nx">createStore</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;redux&#39;</span>
</span><span class="line"><span class="kd">let</span> <span class="nx">reducer</span> <span class="o">=</span> <span class="nx">combineReducers</span><span class="p">({</span> <span class="nx">visibilityFilter</span><span class="p">,</span> <span class="nx">todos</span> <span class="p">})</span>
</span><span class="line"><span class="kd">let</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">(</span><span class="nx">reducer</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<h2>
现有技术
</h2>
<p>
Redux有一个混合遗产。 它类似于一些模式和技术，但也有重要的方面与他们不同。 我们将探讨一些相似之处和下面的差异。
</p>
<h3>
Flux
</h3>
<p>
可以将Redux视为Flux实现吗？

是的，没有。

（不要担心，Flux的创作者赞成它，如果这是你想知道的。）

Redux的灵感来自于Flux的几个重要特性。 像Flux一样，Redux规定您将模型更新逻辑集中在应用程序的某个层（“Flux”中的“商店”，Redux中的“reducer”）。 不是让应用程序代码直接变换数据，而是告诉你将每个变量描述为一个称为“动作”的简单对象。

与Flux不同，Redux没有Dispatcher的概念。 这是因为它依赖于纯函数而不是事件发射器，而纯函数很容易构成，并且不需要另外的实体来管理它们。 根据您查看Flux的方式，您可能会将此视为偏差或实施详细信息。 Flux经常被描述为(state, action) =&gt; state。 在这个意义上，Redux是真正的Flux架构，但由于纯函数使它更简单。

与Flux的另一个重要区别是Redux假设你从不改变你的数据。 你可以使用简单的对象和数组为你的状态很好，但是在reducer内变异他们是强烈不鼓励。 你应该总是返回一个新的对象，这是很容易与对象扩展运算符建议，或与像Immutable的库。

虽然在技术上可能编写不确定的缩减器，为性能角点突变数据，但我们积极阻止您这样做。 时间旅行，记录/重放或热重新加载等开发功能将会中断。 此外，似乎不可变性似乎在大多数真实应用程序中造成性能问题，因为，正如<a href="https://github.com/omcljs/om">Om</a>所示，即使你失去了对象分配，你仍然通过避免昂贵的重新渲染和重新计算赢得，因为你知道什么 改变由于减速器的纯度。
</p>
<h3>
Elm
</h3>
<p>
&lt;a href=&#8221;http://elm-lang.org/&#8221;Elm是一个由Haskell启发的函数式编程语言，由Evan Czaplicki创建。 它强制执行“模型视图更新”架构，其中更新具有以下签名：（action，state）=&gt; state。 Elm“updaters”与Redux中的reducer具有相同的目的。

与Redux不同，Elm是一种语言，因此它可以从诸如强制纯度，静态类型，开箱不可变性和模式匹配（使用case表达式）等许多方面受益。 即使你不打算使用Elm，你应该阅读关于Elm架构，并玩它。 有一个有趣的javascript库操场实现类似的想法。 我们应该看看Redux的灵感！ 我们可以更接近Elm的静态类型的一种方法是使用渐进打字解决方案，如Flow。
</p>
<h3>
Immutable
</h3>
<p>
 <a href="https://facebook.github.io/immutable-js">Immutable</a>是一个实现持久数据结构的javascript库。 它是性能和有一个惯用的javascript API。

Immutable的和最相似的库与Redux正交。 随意使用它们在一起！

Redux不关心你如何存储状态 - 它可以是一个简单的对象，一个Immutable的对象，或任何其他。 你可能想要一个（de）序列化机制，用于编写通用应用程序和从服务器转化化它们的状态，但除此之外，你可以使用任何数据存储库，只要它支持Immutable。 例如，将Backbone用于Redux状态没有意义，因为Backbone模型是可变的。

请注意，即使您的Immutable库支持光标，您不应在Redux应用程序中使用它们。 整个状态树应该被认为是只读的，你应该使用Redux来更新状态，并订阅更新。 因此，通过光标写入对于Redux没有意义。 如果您对光标的唯一用例是从UI树中解耦状态树并逐渐细化光标，则应查看选择器。 选择器是可组合的getter函数。 看到重选的一个真正伟大和简洁的可组合选择器的实现。
</p>
<h3>
Baobab
</h3>
<p>
<a href="https://github.com/Yomguithereal/baobab">Baobab</a>是另一个流行的库，用于实现不可变的API，用于更新纯javascript对象。 虽然你可以使用它与Redux，但是没有什么好处在一起使用它们。

Baobab提供的大多数功能都与使用游标更新数据相关，但Redux强制更新数据的唯一方法是调度操作。 因此，他们不同地解决相同的问题，并且不互补。

与Immutable不同，Baobab还没有实现任何特殊的高效数据结构，所以你不会真正赢得任何东西，使用它和Redux一起使用。 在这种情况下，更容易使用纯对象。
</p>
<h3>
Rx
</h3>
<p>
<a href="https://github.com/Reactive-Extensions/RxJS">Reactive </a>扩展（以及它们正在进行的现代重写）是管理异步应用程序的复杂性的极好方法。 实际上，有一种努力来创建一个将人机交互作为相互依赖的可观察者的库。

与Rx一起使用Redux有意义吗？ 当然！ 他们一起工作。 例如，很容易将Redux存储暴露为可观察者：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">toObservable</span><span class="p">(</span><span class="nx">store</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="k">return</span> <span class="p">{</span>
</span><span class="line">    <span class="nx">subscribe</span><span class="p">({</span> <span class="nx">onNext</span> <span class="p">})</span> <span class="p">{</span>
</span><span class="line">      <span class="kd">let</span> <span class="nx">dispose</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">onNext</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">getState</span><span class="p">()))</span>
</span><span class="line">      <span class="nx">onNext</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">getState</span><span class="p">())</span>
</span><span class="line">      <span class="k">return</span> <span class="p">{</span> <span class="nx">dispose</span> <span class="p">}</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

类似地，您可以组合不同的异步流，将它们转换为动作，然后将它们提供给store.dispatch（）。

问题是：如果你已经使用Rx，你真的需要Redux吗？ 也许不会。 在<a href="https://github.com/jas-chen/rx-redux">Rx中重新实现Redux</a>并不困难。 有人说这是一个两线程使用Rx.scan（）方法。 它可能很好！

如果你有疑问，请查看Redux源代码（没有太多的事情），以及它的生态系统（例如，<a href="https://github.com/gaearon/redux-devtools">开发工具</a>）。 如果你不太关心它，并且希望与反应数据流一路走，你可能想要探索类似于<a href="https://cycle.js.org/">Cycle</a>的东西，或者甚至将它与Redux组合。 让我们知道它怎么回事！
</p>

<h2>
生态系统
</h2>
<p>
Redux是一个很小的库，但它的合同和API被仔细选择，以产生一个工具和扩展的生态系统。

有关与Redux相关的一切的广泛列表，我们建议<a href="https://github.com/xgrommx/awesome-redux">Awesome Redux</a>。 它包含示例，模板，中间件，实用程序库等。<a href="https://github.com/markerikson/react-redux-links"> React / Redux链接</a>包含任何学习React或Redux的教程和其他有用的资源，<a href="https://github.com/markerikson/redux-ecosystem-links">Redux Ecosystem Links</a>列出了许多与Redux相关的库和插件。

在本页上，我们将只介绍Redux维护者已亲自审核的几个。 不要让这不鼓励你尝试其余的！ 生态系统正在增长太快，我们有限的时间来看待一切。 考虑这些“职员选择”，如果你用Redux构建了一些奇妙的东西，不要犹豫提交PR。
</p>

<h2>
学习Redux
</h2>
<h3>

</h3>
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[在现有iOS工程加入React-Native]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/11/15/zai-xian-you-iosgong-cheng-jia-ru-react-native/"/>
    <updated>2016-11-15T14:52:23+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/11/15/zai-xian-you-iosgong-cheng-jia-ru-react-native</id>
    <content type="html"><![CDATA[<h2>
React-Native在iOS工程的集成
</h2>
<p>
当我们想在现有的iOS开发工程中加入React-Native这个模块的时候，我们需要做一些准备工作。<我假设已经安装了homebrew>安装需要的工具：npm
<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">brew install npm</span></code></pre></td></tr></table></div></figure></notextile></div>
一般来说只要有这个就可以，但是鉴于npm 每次都要npm install React-Native并且时间很慢，我们可以辅助使用Yarn，这个工具也是Facebook出品的，这个打React-Native的效率比<code>npm install </code>高很多。
安装好了npm之后，我们创建一个package.json文件,内容如下
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
</pre></td><td class="code"><pre><code class="json"><span class="line"><span class="p">{</span>
</span><span class="line">  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;honer&quot;</span><span class="p">,</span>
</span><span class="line">  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
</span><span class="line">  <span class="nt">&quot;private&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class="line">  <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class="line">    <span class="nt">&quot;update&quot;</span><span class="p">:</span> <span class="s2">&quot;echo &#39;{\&quot;presets\&quot;:[\&quot;react-native\&quot;],\&quot;plugins\&quot;:[\&quot;transform-decorators-legacy\&quot;,[\&quot;react-native-css-class\&quot;,{\&quot;pragma\&quot;:\&quot;CSS\&quot;}]]}&#39; &gt; .babelrc &amp;&amp; mkdir bundle &amp;&amp; npm i&quot;</span><span class="p">,</span>
</span><span class="line">    <span class="nt">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;node node_modules/react-native/local-cli/cli.js start&quot;</span><span class="p">,</span>
</span><span class="line">    <span class="nt">&quot;build&quot;</span><span class="p">:</span> <span class="s2">&quot;rm -rf ./bundle/* &amp;&amp; react-native bundle --platform ios --entry-file ./ReactComponent/index.ios.js --bundle-output ./bundle/main.jsbundle --assets-dest ./bundle/  --dev false&quot;</span><span class="p">,</span>
</span><span class="line">    <span class="nt">&quot;test&quot;</span><span class="p">:</span> <span class="s2">&quot;jest&quot;</span>
</span><span class="line">  <span class="p">},</span>
</span><span class="line">  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class="line">    <span class="nt">&quot;react&quot;</span><span class="p">:</span> <span class="s2">&quot;15.3.2&quot;</span><span class="p">,</span>
</span><span class="line">    <span class="nt">&quot;react-native&quot;</span><span class="p">:</span> <span class="s2">&quot;0.36.1&quot;</span>
</span><span class="line">  <span class="p">},</span>
</span><span class="line">  <span class="nt">&quot;jest&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class="line">    <span class="nt">&quot;preset&quot;</span><span class="p">:</span> <span class="s2">&quot;jest-react-native&quot;</span>
</span><span class="line">  <span class="p">},</span>
</span><span class="line">  <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class="line">    <span class="nt">&quot;babel-jest&quot;</span><span class="p">:</span> <span class="s2">&quot;16.0.0&quot;</span><span class="p">,</span>
</span><span class="line">    <span class="nt">&quot;babel-plugin-react-native-css-class&quot;</span><span class="p">:</span> <span class="s2">&quot;git+https://github.com/qq4647805/babel-plugin-react-native-css-class.git&quot;</span><span class="p">,</span>
</span><span class="line">    <span class="nt">&quot;babel-plugin-transform-decorators-legacy&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.3.4&quot;</span><span class="p">,</span>
</span><span class="line">    <span class="nt">&quot;babel-plugin-transform-runtime&quot;</span><span class="p">:</span> <span class="s2">&quot;^6.15.0&quot;</span><span class="p">,</span>
</span><span class="line">    <span class="nt">&quot;babel-preset-react-native&quot;</span><span class="p">:</span> <span class="s2">&quot;1.9.0&quot;</span><span class="p">,</span>
</span><span class="line">    <span class="nt">&quot;jest&quot;</span><span class="p">:</span> <span class="s2">&quot;16.0.2&quot;</span><span class="p">,</span>
</span><span class="line">    <span class="nt">&quot;jest-react-native&quot;</span><span class="p">:</span> <span class="s2">&quot;16.1.0&quot;</span><span class="p">,</span>
</span><span class="line">    <span class="nt">&quot;react-test-renderer&quot;</span><span class="p">:</span> <span class="s2">&quot;15.3.2&quot;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
通过终端进入工程根目录下，如果这时安装了Yarn。在终端输入<code>yarn</code>，回车一按，自动查找需要安装的packages
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="json"><span class="line"><span class="err">RickdeMacBook-Pro:xueba_ios_</span><span class="mi">2016</span> <span class="err">Wenba$</span> <span class="err">yarn</span>
</span><span class="line"><span class="err">yarn</span> <span class="err">install</span> <span class="err">v</span><span class="mf">0.16</span><span class="err">.</span><span class="mi">1</span>
</span><span class="line"><span class="err">info</span> <span class="err">No</span> <span class="err">lockfile</span> <span class="err">found.</span>
</span><span class="line"><span class="p">[</span><span class="mi">1</span><span class="err">/</span><span class="mi">4</span><span class="p">]</span> <span class="err">🔍</span>  <span class="err">Resolving</span> <span class="err">packages...</span>
</span><span class="line"><span class="err">warning</span> <span class="err">jest</span> <span class="err">&gt;</span> <span class="err">jest-cli</span> <span class="err">&gt;</span> <span class="err">istanbul-api</span> <span class="err">&gt;</span> <span class="err">fileset</span> <span class="err">&gt;</span> <span class="err">minimatch@</span><span class="mf">2.0</span><span class="err">.</span><span class="mi">10</span><span class="err">:</span> <span class="err">Please</span> <span class="err">update</span> <span class="err">to</span> <span class="err">minimatch</span> <span class="mf">3.0</span><span class="err">.</span><span class="mi">2</span> <span class="err">or</span> <span class="err">higher</span> <span class="err">to</span> <span class="err">avoid</span> <span class="err">a</span> <span class="err">RegExp</span> <span class="err">DoS</span> <span class="err">issue</span>
</span><span class="line"><span class="p">[</span><span class="mi">2</span><span class="err">/</span><span class="mi">4</span><span class="p">]</span> <span class="err">🚚</span>  <span class="err">Fetching</span> <span class="err">packages...</span>
</span><span class="line"><span class="p">[</span><span class="mi">3</span><span class="err">/</span><span class="mi">4</span><span class="p">]</span> <span class="err">🔗</span>  <span class="err">Linking</span> <span class="err">dependencies...</span>
</span><span class="line"><span class="err">warning</span> <span class="err">Unmet</span> <span class="err">peer</span> <span class="err">dependency</span> <span class="s2">&quot;whatwg-fetch@^1.0.0&quot;</span><span class="err">.</span>
</span><span class="line"><span class="p">[</span><span class="mi">4</span><span class="err">/</span><span class="mi">4</span><span class="p">]</span> <span class="err">📃</span>  <span class="err">Building</span> <span class="err">fresh</span> <span class="err">packages...</span>
</span><span class="line"><span class="err">success</span> <span class="err">Saved</span> <span class="err">lockfile.</span>
</span><span class="line"><span class="err">✨</span>  <span class="err">Done</span> <span class="err">in</span> <span class="mf">19.62</span><span class="err">s.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

如果没有安装Yarn，安装了npm的话，只要键入 npm install 就会安装packages

然后我们去修改iOS工程的podfile文件，在所在的target多增加这个pod
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">pod</span> <span class="s1">&#39;React&#39;</span><span class="p">,</span> <span class="ss">:path</span> <span class="o">=&gt;</span> <span class="s1">&#39;./node_modules/react-native&#39;</span><span class="p">,</span> <span class="ss">:subspecs</span> <span class="o">=&gt;</span> <span class="o">[</span>
</span><span class="line">  <span class="s1">&#39;Core&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="s1">&#39;RCTImage&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="s1">&#39;RCTNetwork&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="s1">&#39;RCTText&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="s1">&#39;RCTWebSocket&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="c1"># Add any other subspecs you want to use in your project</span>
</span><span class="line"><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
在iOS工程目录下执行<code>Pod install</code>。等待安装完成。此时React-Native模块已经加入到我们iOS的工程里了。

<!--more-->
<h2>
在iOS工程使用React-Native。
</h2>
<p>
在工程新建一个ReactView。用于展示React-Native
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">@implementation</span> <span class="nc">ReactView</span>
</span><span class="line">
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">initWithFrame:</span><span class="p">(</span><span class="n">CGRect</span><span class="p">)</span><span class="nv">frame</span> <span class="p">{</span>
</span><span class="line">    <span class="n">self</span> <span class="o">=</span> <span class="p">[</span><span class="n">super</span> <span class="nl">initWithFrame:</span><span class="n">frame</span><span class="p">];</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">NSURL</span> <span class="o">*</span><span class="n">jsCodeLocation</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSBundle</span> <span class="n">mainBundle</span><span class="p">]</span> <span class="nl">URLForResource:</span><span class="s">@&quot;bundle/main&quot;</span> <span class="nl">withExtension:</span><span class="s">@&quot;jsbundle&quot;</span><span class="p">];</span>
</span><span class="line">        <span class="cm">/*</span>
</span><span class="line"><span class="cm">         For production use, this `NSURL` could instead point to a pre-bundled file on disk:</span>
</span><span class="line">
</span><span class="line"><span class="cm">         NSURL *jsCodeLocation = [[NSBundle mainBundle] URLForResource:@&quot;main&quot; withExtension:@&quot;jsbundle&quot;];</span>
</span><span class="line">
</span><span class="line"><span class="cm">         To generate that file, run the curl command and add the output to your main Xcode build target:</span>
</span><span class="line">
</span><span class="line"><span class="cm">         curl http://localhost:8081/index.ios.bundle -o main.jsbundle</span>
</span><span class="line"><span class="cm">         */</span>
</span><span class="line">        <span class="n">_rootView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">RCTRootView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithBundleURL:</span><span class="n">jsCodeLocation</span> <span class="nl">moduleName:</span><span class="s">@&quot;honer&quot;</span> <span class="nl">initialProperties:</span><span class="nb">nil</span> <span class="nl">launchOptions:</span><span class="nb">nil</span><span class="p">];</span>
</span><span class="line">        <span class="p">[</span><span class="n">self</span> <span class="nl">addSubview:</span><span class="n">_rootView</span><span class="p">];</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">self</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">layoutSubviews</span> <span class="p">{</span>
</span><span class="line">    <span class="p">[</span><span class="n">super</span> <span class="n">layoutSubviews</span><span class="p">];</span>
</span><span class="line">    <span class="n">_rootView</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">bounds</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="cm">/*</span>
</span><span class="line"><span class="cm">// Only override drawRect: if you perform custom drawing.</span>
</span><span class="line"><span class="cm">// An empty implementation adversely affects performance during animation.</span>
</span><span class="line"><span class="cm">- (void)drawRect:(CGRect)rect {</span>
</span><span class="line"><span class="cm">    // Drawing code</span>
</span><span class="line"><span class="cm">}</span>
</span><span class="line"><span class="cm">*/</span><span class="err">``</span>
</span><span class="line">
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
在终端输入 <code>(JS_DIR=`pwd`/ReactComponent;cd node_modules/react-native; npm run start -- --root $JS_DIR)</code> 启动React-Native服务
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="n">RickdeMacBook</span><span class="o">-</span><span class="nl">Pro:</span><span class="n">BestNote</span> <span class="n">Wenba$</span> <span class="p">(</span><span class="n">JS_DIR</span><span class="o">=</span><span class="err">`</span><span class="n">pwd</span><span class="err">`</span><span class="o">/</span><span class="n">ReactComponent</span><span class="p">;</span><span class="n">cd</span> <span class="n">node_modules</span><span class="o">/</span><span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="p">;</span> <span class="n">npm</span> <span class="n">run</span> <span class="n">start</span> <span class="o">--</span> <span class="o">--</span><span class="n">root</span> <span class="n">$JS_DIR</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="o">&gt;</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="err">@</span><span class="mf">0.36.1</span> <span class="n">start</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rick</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Work</span><span class="o">/</span><span class="n">ChatDemo</span><span class="o">/</span><span class="n">ReactNative</span><span class="o">/</span><span class="n">BestNote</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">react</span><span class="o">-</span><span class="n">native</span>
</span><span class="line"><span class="o">&gt;</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">env</span> <span class="n">bash</span> <span class="o">-</span><span class="n">c</span> <span class="err">&#39;</span><span class="p">.</span><span class="o">/</span><span class="n">packager</span><span class="o">/</span><span class="n">packager</span><span class="p">.</span><span class="n">sh</span> <span class="s">&quot;$@&quot;</span> <span class="o">||</span> <span class="n">true</span><span class="err">&#39;</span> <span class="o">--</span> <span class="s">&quot;--root&quot;</span> <span class="s">&quot;/Users/Rick/Documents/Work/ChatDemo/ReactNative/BestNote/ReactComponent&quot;</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="nl">node:</span><span class="mi">14754</span><span class="p">)</span> <span class="nl">DeprecationWarning:</span> <span class="n">os</span><span class="p">.</span><span class="n">tmpDir</span><span class="p">()</span> <span class="n">is</span> <span class="n">deprecated</span><span class="p">.</span> <span class="n">Use</span> <span class="n">os</span><span class="p">.</span><span class="n">tmpdir</span><span class="p">()</span> <span class="n">instead</span><span class="p">.</span>
</span><span class="line"><span class="p">(</span><span class="nl">node:</span><span class="mi">14754</span><span class="p">)</span> <span class="nl">DeprecationWarning:</span> <span class="n">Using</span> <span class="n">Buffer</span> <span class="n">without</span> <span class="err">`</span><span class="n">new</span><span class="err">`</span> <span class="n">will</span> <span class="n">soon</span> <span class="n">stop</span> <span class="n">working</span><span class="p">.</span> <span class="n">Use</span> <span class="err">`</span><span class="n">new</span> <span class="n">Buffer</span><span class="p">()</span><span class="err">`</span><span class="p">,</span> <span class="n">or</span> <span class="n">preferably</span> <span class="err">`</span><span class="n">Buffer</span><span class="p">.</span><span class="n">from</span><span class="p">()</span><span class="err">`</span><span class="p">,</span> <span class="err">`</span><span class="n">Buffer</span><span class="p">.</span><span class="n">allocUnsafe</span><span class="p">()</span><span class="err">`</span> <span class="n">or</span> <span class="err">`</span><span class="n">Buffer</span><span class="p">.</span><span class="n">alloc</span><span class="p">()</span><span class="err">`</span> <span class="n">instead</span><span class="p">.</span>
</span><span class="line"><span class="n">Scanning</span> <span class="mi">717</span> <span class="n">folders</span> <span class="k">for</span> <span class="n">symlinks</span> <span class="k">in</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rick</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Work</span><span class="o">/</span><span class="n">ChatDemo</span><span class="o">/</span><span class="n">ReactNative</span><span class="o">/</span><span class="n">BestNote</span><span class="o">/</span><span class="n">node_modules</span> <span class="p">(</span><span class="mi">9</span><span class="n">ms</span><span class="p">)</span>
</span><span class="line"> <span class="err">┌────────────────────────────────────────────────────────────────────────────┐</span>
</span><span class="line"> <span class="err">│</span>  <span class="n">Running</span> <span class="n">packager</span> <span class="n">on</span> <span class="n">port</span> <span class="mf">8081.</span>                                            <span class="err">│</span>
</span><span class="line"> <span class="err">│</span>                                                                            <span class="err">│</span>
</span><span class="line"> <span class="err">│</span>  <span class="n">Keep</span> <span class="n">this</span> <span class="n">packager</span> <span class="n">running</span> <span class="k">while</span> <span class="n">developing</span> <span class="n">on</span> <span class="n">any</span> <span class="n">JS</span> <span class="n">projects</span><span class="p">.</span> <span class="n">Feel</span>      <span class="err">│</span>
</span><span class="line"> <span class="err">│</span>  <span class="n">free</span> <span class="n">to</span> <span class="n">close</span> <span class="n">this</span> <span class="n">tab</span> <span class="n">and</span> <span class="n">run</span> <span class="n">your</span> <span class="n">own</span> <span class="n">packager</span> <span class="n">instance</span> <span class="k">if</span> <span class="n">you</span>          <span class="err">│</span>
</span><span class="line"> <span class="err">│</span>  <span class="n">prefer</span><span class="p">.</span>                                                                   <span class="err">│</span>
</span><span class="line"> <span class="err">│</span>                                                                            <span class="err">│</span>
</span><span class="line"> <span class="err">│</span>  <span class="nl">https:</span><span class="c1">//github.com/facebook/react-native                                  │</span>
</span><span class="line"> <span class="err">│</span>                                                                            <span class="err">│</span>
</span><span class="line"> <span class="err">└────────────────────────────────────────────────────────────────────────────┘</span>
</span><span class="line"><span class="n">Looking</span> <span class="k">for</span> <span class="n">JS</span> <span class="n">files</span> <span class="k">in</span>
</span><span class="line">   <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rick</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Work</span><span class="o">/</span><span class="n">ChatDemo</span><span class="o">/</span><span class="n">ReactNative</span><span class="o">/</span><span class="n">BestNote</span>
</span><span class="line">   <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rick</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Work</span><span class="o">/</span><span class="n">ChatDemo</span><span class="o">/</span><span class="n">ReactNative</span><span class="o">/</span><span class="n">BestNote</span><span class="o">/</span><span class="n">ReactComponent</span>
</span><span class="line">
</span><span class="line"><span class="p">[</span><span class="n">Hot</span> <span class="n">Module</span> <span class="n">Replacement</span><span class="p">]</span> <span class="n">Server</span> <span class="n">listening</span> <span class="n">on</span> <span class="o">/</span><span class="n">hot</span>
</span><span class="line">
</span><span class="line"><span class="n">React</span> <span class="n">packager</span> <span class="n">ready</span><span class="p">.</span>
</span><span class="line">
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="mi">50</span><span class="o">:</span><span class="mi">38</span> <span class="n">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">START</span><span class="o">&gt;</span> <span class="n">Initializing</span> <span class="n">Packager</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="mi">50</span><span class="o">:</span><span class="mi">38</span> <span class="n">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">START</span><span class="o">&gt;</span> <span class="n">Building</span> <span class="k">in</span><span class="o">-</span><span class="n">memory</span> <span class="n">fs</span> <span class="k">for</span> <span class="n">JavaScript</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="mi">50</span><span class="o">:</span><span class="mi">38</span> <span class="n">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">END</span><span class="o">&gt;</span>   <span class="n">Building</span> <span class="k">in</span><span class="o">-</span><span class="n">memory</span> <span class="n">fs</span> <span class="k">for</span> <span class="n">JavaScript</span> <span class="p">(</span><span class="mi">173</span><span class="n">ms</span><span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="mi">50</span><span class="o">:</span><span class="mi">38</span> <span class="n">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">START</span><span class="o">&gt;</span> <span class="n">Building</span> <span class="n">Haste</span> <span class="n">Map</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="mi">50</span><span class="o">:</span><span class="mi">39</span> <span class="n">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">END</span><span class="o">&gt;</span>   <span class="n">Building</span> <span class="n">Haste</span> <span class="n">Map</span> <span class="p">(</span><span class="mi">124</span><span class="n">ms</span><span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="mi">50</span><span class="o">:</span><span class="mi">39</span> <span class="n">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">END</span><span class="o">&gt;</span>   <span class="n">Initializing</span> <span class="n">Packager</span> <span class="p">(</span><span class="mi">365</span><span class="n">ms</span><span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="mi">50</span><span class="o">:</span><span class="mi">42</span> <span class="n">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">START</span><span class="o">&gt;</span> <span class="n">Requesting</span> <span class="nl">bundle:</span> <span class="p">{</span><span class="s">&quot;url&quot;</span><span class="o">:</span><span class="s">&quot;/index.ios.bundle?platform=ios&quot;</span><span class="p">}</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="mi">50</span><span class="o">:</span><span class="mi">42</span> <span class="n">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">START</span><span class="o">&gt;</span> <span class="n">Transforming</span> <span class="n">modules</span>
</span><span class="line"><span class="n">transformed</span> <span class="mi">662</span><span class="o">/</span><span class="mi">662</span> <span class="p">(</span><span class="mi">100</span><span class="o">%</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<code>NSURL *jsCodeLocation = [NSURL URLWithString:@"http://10.88.1.90:8081/index.ios.bundle?platform=ios"];</code>这个IP是开启服务的电脑IP。<code>(JS_DIR=`pwd`/ReactComponent;cd node_modules/react-native; npm run start -- --root $JS_DIR)</code>定义的JSDir会在这两个目录下去查找js文件
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line">   <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rick</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Work</span><span class="o">/</span><span class="n">ChatDemo</span><span class="o">/</span><span class="n">ReactNative</span><span class="o">/</span><span class="n">BestNote</span>
</span><span class="line">   <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">Rick</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Work</span><span class="o">/</span><span class="n">ChatDemo</span><span class="o">/</span><span class="n">ReactNative</span><span class="o">/</span><span class="n">BestNote</span><span class="o">/</span><span class="n">ReactComponent</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
我们在<code>ReactComponent</code>这个目录下放入index.ios.js文件。文件内容如下
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span>
</span><span class="line"><span class="kr">import</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">AppRegistry</span><span class="p">,</span>
</span><span class="line">  <span class="nx">Text</span>
</span><span class="line"><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-native&#39;</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="nx">Main</span> <span class="nx">from</span> <span class="s1">&#39;./src/main.js&#39;</span>
</span><span class="line">
</span><span class="line"><span class="kr">class</span> <span class="nx">myhonor</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="k">return</span> <span class="p">(</span>
</span><span class="line">      <span class="o">&lt;</span><span class="nx">Main</span><span class="o">&gt;&lt;</span><span class="err">/Main&gt;</span>
</span><span class="line">    <span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="nx">AppRegistry</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">(</span><span class="s1">&#39;honer&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">myhonor</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
在这里注册组件honer，我们在ReactView类中找到这个honer模块去使用。
此时我们运行我们的工程会发现运行ok的
</p>
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/develop/honer.png" />
<h2>
离线包
</h2>
<p>
加载需要时间，此时页面是空白，不好，建议将资源以及页面都打包成离线包，这样不用每次都连网去请求页面。如果有新的页面更换，可以先加载旧的页面，在渲染成新页面。
</p>
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/develop/package_honer.png" />
<p>
我们在终端输入
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">react</span><span class="o">-</span><span class="kr">native</span> <span class="nx">bundle</span> <span class="o">\</span>
</span><span class="line"><span class="o">--</span><span class="nx">platform</span> <span class="nx">ios</span> <span class="o">\</span>
</span><span class="line"><span class="o">--</span><span class="nx">entry</span><span class="o">-</span><span class="nx">file</span> <span class="nx">index</span><span class="p">.</span><span class="nx">ios2</span><span class="p">.</span><span class="nx">js</span> <span class="o">\</span>
</span><span class="line"><span class="o">--</span><span class="nx">bundle</span><span class="o">-</span><span class="nx">output</span> <span class="p">.</span><span class="o">/</span><span class="nx">main</span><span class="p">.</span><span class="nx">jsbundle</span> <span class="o">\</span>
</span><span class="line"><span class="o">--</span><span class="nx">assets</span><span class="o">-</span><span class="nx">dest</span> <span class="p">.</span><span class="o">/</span> <span class="o">\</span>
</span><span class="line"><span class="o">--</span><span class="nx">dev</span> <span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">RickdeMacBook</span><span class="o">-</span><span class="nx">Pro</span><span class="o">:</span><span class="nx">BestNote</span> <span class="nx">Wenba$</span> <span class="nx">react</span><span class="o">-</span><span class="kr">native</span> <span class="nx">bundle</span> <span class="o">--</span><span class="nx">platform</span> <span class="nx">ios</span> <span class="o">--</span><span class="nx">dev</span> <span class="kc">false</span> <span class="o">--</span><span class="nx">entry</span><span class="o">-</span><span class="nx">file</span> <span class="p">.</span><span class="o">/</span><span class="nx">ReactComponent</span><span class="o">/</span><span class="nx">index</span><span class="p">.</span><span class="nx">ios</span><span class="p">.</span><span class="nx">js</span> <span class="o">--</span><span class="nx">bundle</span><span class="o">-</span><span class="nx">output</span> <span class="nx">main</span><span class="p">.</span><span class="nx">jsbundle</span> <span class="o">--</span><span class="nx">assets</span><span class="o">-</span><span class="nx">dest</span> <span class="p">.</span><span class="o">/</span><span class="nx">Bundle</span>
</span><span class="line"><span class="p">(</span><span class="nx">node</span><span class="o">:</span><span class="mi">16763</span><span class="p">)</span> <span class="nx">DeprecationWarning</span><span class="o">:</span> <span class="nx">os</span><span class="p">.</span><span class="nx">tmpDir</span><span class="p">()</span> <span class="nx">is</span> <span class="nx">deprecated</span><span class="p">.</span> <span class="nx">Use</span> <span class="nx">os</span><span class="p">.</span><span class="nx">tmpdir</span><span class="p">()</span> <span class="nx">instead</span><span class="p">.</span>
</span><span class="line"><span class="p">(</span><span class="nx">node</span><span class="o">:</span><span class="mi">16763</span><span class="p">)</span> <span class="nx">DeprecationWarning</span><span class="o">:</span> <span class="nx">Using</span> <span class="nx">Buffer</span> <span class="nx">without</span> <span class="err">`</span><span class="k">new</span><span class="err">`</span> <span class="nx">will</span> <span class="nx">soon</span> <span class="nx">stop</span> <span class="nx">working</span><span class="p">.</span> <span class="nx">Use</span> <span class="err">`</span><span class="k">new</span> <span class="nx">Buffer</span><span class="p">()</span><span class="err">`</span><span class="p">,</span> <span class="nx">or</span> <span class="nx">preferably</span> <span class="err">`</span><span class="nx">Buffer</span><span class="p">.</span><span class="nx">from</span><span class="p">()</span><span class="err">`</span><span class="p">,</span> <span class="err">`</span><span class="nx">Buffer</span><span class="p">.</span><span class="nx">allocUnsafe</span><span class="p">()</span><span class="err">`</span> <span class="nx">or</span> <span class="err">`</span><span class="nx">Buffer</span><span class="p">.</span><span class="nx">alloc</span><span class="p">()</span><span class="err">`</span> <span class="nx">instead</span><span class="p">.</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span><span class="mi">28</span><span class="o">:</span><span class="mi">17</span> <span class="nx">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="nx">START</span><span class="o">&gt;</span> <span class="nx">Initializing</span> <span class="nx">Packager</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span><span class="mi">28</span><span class="o">:</span><span class="mi">17</span> <span class="nx">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="nx">START</span><span class="o">&gt;</span> <span class="nx">Building</span> <span class="k">in</span><span class="o">-</span><span class="nx">memory</span> <span class="nx">fs</span> <span class="k">for</span> <span class="nx">JavaScript</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span><span class="mi">28</span><span class="o">:</span><span class="mi">17</span> <span class="nx">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="nx">END</span><span class="o">&gt;</span>   <span class="nx">Building</span> <span class="k">in</span><span class="o">-</span><span class="nx">memory</span> <span class="nx">fs</span> <span class="k">for</span> <span class="nx">JavaScript</span> <span class="p">(</span><span class="mi">165</span><span class="nx">ms</span><span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span><span class="mi">28</span><span class="o">:</span><span class="mi">17</span> <span class="nx">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="nx">START</span><span class="o">&gt;</span> <span class="nx">Building</span> <span class="nx">Haste</span> <span class="nx">Map</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span><span class="mi">28</span><span class="o">:</span><span class="mi">17</span> <span class="nx">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="nx">END</span><span class="o">&gt;</span>   <span class="nx">Building</span> <span class="nx">Haste</span> <span class="nx">Map</span> <span class="p">(</span><span class="mi">226</span><span class="nx">ms</span><span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span><span class="mi">28</span><span class="o">:</span><span class="mi">17</span> <span class="nx">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="nx">END</span><span class="o">&gt;</span>   <span class="nx">Initializing</span> <span class="nx">Packager</span> <span class="p">(</span><span class="mi">463</span><span class="nx">ms</span><span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span><span class="mi">28</span><span class="o">:</span><span class="mi">17</span> <span class="nx">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="nx">START</span><span class="o">&gt;</span> <span class="nx">Transforming</span> <span class="nx">modules</span>
</span><span class="line"><span class="p">[</span><span class="mi">11</span><span class="o">/</span><span class="mi">15</span><span class="o">/</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span><span class="mi">28</span><span class="o">:</span><span class="mi">25</span> <span class="nx">PM</span><span class="p">]</span> <span class="o">&lt;</span><span class="nx">END</span><span class="o">&gt;</span>   <span class="nx">Transforming</span> <span class="nx">modules</span> <span class="p">(</span><span class="mi">7758</span><span class="nx">ms</span><span class="p">)</span>
</span><span class="line"><span class="nx">bundle</span><span class="o">:</span> <span class="nx">start</span>
</span><span class="line"><span class="nx">bundle</span><span class="o">:</span> <span class="nx">finish</span>
</span><span class="line"><span class="nx">bundle</span><span class="o">:</span> <span class="nx">Writing</span> <span class="nx">bundle</span> <span class="nx">output</span> <span class="nx">to</span><span class="o">:</span> <span class="nx">main</span><span class="p">.</span><span class="nx">jsbundle</span>
</span><span class="line"><span class="nx">bundle</span><span class="o">:</span> <span class="nx">Done</span> <span class="nx">writing</span> <span class="nx">bundle</span> <span class="nx">output</span>
</span><span class="line"><span class="nx">bundle</span><span class="o">:</span> <span class="nx">Copying</span> <span class="mi">15</span> <span class="nx">asset</span> <span class="nx">files</span>
</span><span class="line"><span class="nx">bundle</span><span class="o">:</span> <span class="nx">Done</span> <span class="nx">copying</span> <span class="nx">assets</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
将我们的js文件打包成bundle，同事将资源文件也打包起来，如果&#8211;assets-dest ./ 这个参数不加，会导致我们页面的img图片资源缺失。这个有点坑。
</p>
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</我假设已经安装了homebrew></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[破壳微信之旅]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/10/28/po-ke-wei-xin-zhi-lu/"/>
    <updated>2016-10-28T16:27:47+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/10/28/po-ke-wei-xin-zhi-lu</id>
    <content type="html"><![CDATA[<h2 id="section">砸壳前期准备</h2>

<p>一个越狱设备,一台Mac设备。
1、openssh<br />
修改ssh -&gt; congifure prot
修改ssh的密码</p>

<p>2、adv-cmds   cycript 安装在越狱设备上</p>

<p>3、ssh root@192.168.1.8 (设备的IP)</p>

<p>4、ps -e | grep WeChat
<br /></p>
<p>
<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class=""><span class="line">Phone:~ root# 825 ??         0:08.66 /var/mobile/Applications/20EC6C4E-F75C-4FA5-8457-DFF4C2C4E9BC/WeChat.app/WeChat
</span><span class="line">Phone:~ root# 832 ttys000    0:00.01 grep WeChat
</span><span class="line">  Phone:~ root# cycript -p 825
</span><span class="line">  cy# [[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask][0]
</span><span class="line">  cy#"file:///var/mobile/Applications/20EC6C4E-F75C-4FA5-8457-DFF4C2C4E9BC/Documents/"
</span><span class="line">  DYLD_INSERT_LIBRARIES=dumpdecrypted.dylib /var/mobile/Applications/20EC6C4E-F75C-4FA5-8457-DFF4C2C4E9BC/WeChat.app/WeChat</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<p>5、砸开
  class-dump –arch armv7 WeChat.decrypted -S -s -H -o /Users/Rick/Documents/ios/isere/WeChatHeader
<br /></p>
<p>
<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class=""><span class="line">mach-o decryption dumper
</span><span class="line">
</span><span class="line">DISCLAIMER: This tool is only meant for security research purposes, not for application crackers.
</span><span class="line">
</span><span class="line">[+] detected 32bit ARM binary in memory.
</span><span class="line">[+] offset to cryptid found: @0x15a4c(from 0x15000) = a4c
</span><span class="line">[+] Found encrypted data at address 00004000 of length 45400064 bytes - type 1.
</span><span class="line">[+] Opening /private/var/mobile/Applications/20EC6C4E-F75C-4FA5-8457-DFF4C2C4E9BC/WeChat.app/WeChat for reading.
</span><span class="line">[+] Reading header
</span><span class="line">[+] Detecting header type
</span><span class="line">[+] Executable is a FAT image - searching for right architecture
</span><span class="line">[+] Correct arch is at offset 16384 in the file
</span><span class="line">[+] Opening WeChat.decrypted for writing.
</span><span class="line">[+] Copying the not encrypted start of the file
</span><span class="line">[+] Dumping the decrypted data into the file
</span><span class="line">[+] Copying the not encrypted remainder of the file
</span><span class="line">[+] Setting the LC_ENCRYPTION_INFO-&gt;cryptid to 0 at offset 4a4c
</span><span class="line">[+] Closing original file
</span><span class="line">[+] Closing dump file</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<p>看到这些log就能看到砸开所有的文件，下面是我砸开的微信定义函数文件
<br /></p>

<!--more-->
<p>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="c1">//</span>
</span><span class="line"><span class="c1">//     Generated by class-dump 3.5 (64 bit).</span>
</span><span class="line"><span class="c1">//</span>
</span><span class="line"><span class="c1">//     class-dump is Copyright (C) 1997-1998, 2000-2001, 2004-2013 by Steve Nygard.</span>
</span><span class="line"><span class="c1">//</span>
</span><span class="line">
</span><span class="line"><span class="cp">#import &quot;NSObject.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="k">@class</span> <span class="nc">NSMutableDictionary</span>, <span class="nc">NSRecursiveLock</span>;
</span><span class="line">
</span><span class="line"><span class="k">@interface</span> <span class="nc">MMServiceCenter</span> : <span class="nc">NSObject</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="n">NSMutableDictionary</span> <span class="o">*</span> <span class="n">m_dicService</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSRecursiveLock</span> <span class="o">*</span> <span class="n">m_lock</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="o">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">defaultCenter</span><span class="p">;</span>
</span><span class="line"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">).</span><span class="n">cxx_destruct</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callClearData</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callEnterBackground</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callEnterForeground</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callReloadData</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callServiceMemoryWarning</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callTerminate</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">dealloc</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getService:</span><span class="p">(</span><span class="n">Class</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">init</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">removeService:</span><span class="p">(</span><span class="n">Class</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
<span class="line-number">107</span>
<span class="line-number">108</span>
<span class="line-number">109</span>
<span class="line-number">110</span>
<span class="line-number">111</span>
<span class="line-number">112</span>
<span class="line-number">113</span>
<span class="line-number">114</span>
<span class="line-number">115</span>
<span class="line-number">116</span>
<span class="line-number">117</span>
<span class="line-number">118</span>
<span class="line-number">119</span>
<span class="line-number">120</span>
<span class="line-number">121</span>
<span class="line-number">122</span>
<span class="line-number">123</span>
<span class="line-number">124</span>
<span class="line-number">125</span>
<span class="line-number">126</span>
<span class="line-number">127</span>
<span class="line-number">128</span>
<span class="line-number">129</span>
<span class="line-number">130</span>
<span class="line-number">131</span>
<span class="line-number">132</span>
<span class="line-number">133</span>
<span class="line-number">134</span>
<span class="line-number">135</span>
<span class="line-number">136</span>
<span class="line-number">137</span>
<span class="line-number">138</span>
<span class="line-number">139</span>
<span class="line-number">140</span>
<span class="line-number">141</span>
<span class="line-number">142</span>
<span class="line-number">143</span>
<span class="line-number">144</span>
<span class="line-number">145</span>
<span class="line-number">146</span>
<span class="line-number">147</span>
<span class="line-number">148</span>
<span class="line-number">149</span>
<span class="line-number">150</span>
<span class="line-number">151</span>
<span class="line-number">152</span>
<span class="line-number">153</span>
<span class="line-number">154</span>
<span class="line-number">155</span>
<span class="line-number">156</span>
<span class="line-number">157</span>
<span class="line-number">158</span>
<span class="line-number">159</span>
<span class="line-number">160</span>
<span class="line-number">161</span>
<span class="line-number">162</span>
<span class="line-number">163</span>
<span class="line-number">164</span>
<span class="line-number">165</span>
<span class="line-number">166</span>
<span class="line-number">167</span>
<span class="line-number">168</span>
<span class="line-number">169</span>
<span class="line-number">170</span>
<span class="line-number">171</span>
<span class="line-number">172</span>
<span class="line-number">173</span>
<span class="line-number">174</span>
<span class="line-number">175</span>
<span class="line-number">176</span>
<span class="line-number">177</span>
<span class="line-number">178</span>
<span class="line-number">179</span>
<span class="line-number">180</span>
<span class="line-number">181</span>
<span class="line-number">182</span>
<span class="line-number">183</span>
<span class="line-number">184</span>
<span class="line-number">185</span>
<span class="line-number">186</span>
<span class="line-number">187</span>
<span class="line-number">188</span>
<span class="line-number">189</span>
<span class="line-number">190</span>
<span class="line-number">191</span>
<span class="line-number">192</span>
<span class="line-number">193</span>
<span class="line-number">194</span>
<span class="line-number">195</span>
<span class="line-number">196</span>
<span class="line-number">197</span>
<span class="line-number">198</span>
<span class="line-number">199</span>
<span class="line-number">200</span>
<span class="line-number">201</span>
<span class="line-number">202</span>
<span class="line-number">203</span>
<span class="line-number">204</span>
<span class="line-number">205</span>
<span class="line-number">206</span>
<span class="line-number">207</span>
<span class="line-number">208</span>
<span class="line-number">209</span>
<span class="line-number">210</span>
<span class="line-number">211</span>
<span class="line-number">212</span>
<span class="line-number">213</span>
<span class="line-number">214</span>
<span class="line-number">215</span>
<span class="line-number">216</span>
<span class="line-number">217</span>
<span class="line-number">218</span>
<span class="line-number">219</span>
<span class="line-number">220</span>
<span class="line-number">221</span>
<span class="line-number">222</span>
<span class="line-number">223</span>
<span class="line-number">224</span>
<span class="line-number">225</span>
<span class="line-number">226</span>
<span class="line-number">227</span>
<span class="line-number">228</span>
<span class="line-number">229</span>
<span class="line-number">230</span>
<span class="line-number">231</span>
<span class="line-number">232</span>
<span class="line-number">233</span>
<span class="line-number">234</span>
<span class="line-number">235</span>
<span class="line-number">236</span>
<span class="line-number">237</span>
<span class="line-number">238</span>
<span class="line-number">239</span>
<span class="line-number">240</span>
<span class="line-number">241</span>
<span class="line-number">242</span>
<span class="line-number">243</span>
<span class="line-number">244</span>
<span class="line-number">245</span>
<span class="line-number">246</span>
<span class="line-number">247</span>
<span class="line-number">248</span>
<span class="line-number">249</span>
<span class="line-number">250</span>
<span class="line-number">251</span>
<span class="line-number">252</span>
<span class="line-number">253</span>
<span class="line-number">254</span>
<span class="line-number">255</span>
<span class="line-number">256</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="c1">//</span>
</span><span class="line"><span class="c1">//     Generated by class-dump 3.5 (64 bit).</span>
</span><span class="line"><span class="c1">//</span>
</span><span class="line"><span class="c1">//     class-dump is Copyright (C) 1997-1998, 2000-2001, 2004-2013 by Steve Nygard.</span>
</span><span class="line"><span class="c1">//</span>
</span><span class="line">
</span><span class="line"><span class="cp">#import &quot;CBaseContact.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="cp">#import &quot;NSCoding.h&quot;</span>
</span><span class="line"><span class="cp">#import &quot;PBCoding.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="k">@class</span> <span class="nc">ChatRoomData</span>, <span class="nc">ChatRoomDetail</span>, <span class="nc">NSArray</span>, <span class="nc">NSDictionary</span>, <span class="nc">NSString</span>, <span class="nc">SubscriptBrandInfo</span>;
</span><span class="line">
</span><span class="line"><span class="k">@interface</span> <span class="nc">CContact</span> : <span class="nc">CBaseContact</span> <span class="o">&lt;</span><span class="n">PBCoding</span><span class="p">,</span> <span class="n">NSCoding</span><span class="o">&gt;</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiChatRoomStatus</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsChatRoomMemList</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiChatRoomAccessType</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiChatRoomMaxCount</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiChatRoomVersion</span><span class="p">;</span>
</span><span class="line">    <span class="n">ChatRoomDetail</span> <span class="o">*</span><span class="n">m_ChatRoomDetail</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsChatRoomData</span><span class="p">;</span>
</span><span class="line">    <span class="n">ChatRoomData</span> <span class="o">*</span><span class="n">m_ChatRoomData</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsCountry</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsProvince</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsCity</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsSignature</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiCertificationFlag</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsCertificationInfo</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsOwner</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsFBNickName</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsFBID</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiNeedUpdate</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsWCBGImgObjectID</span><span class="p">;</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">m_iWCFlag</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_pcWCBGImgID</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsExternalInfo</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsBrandSubscriptConfigUrl</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiBrandSubscriptionSettings</span><span class="p">;</span>
</span><span class="line">    <span class="n">SubscriptBrandInfo</span> <span class="o">*</span><span class="n">m_subBrandInfo</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsBrandIconUrl</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_isExtInfoValid</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSDictionary</span> <span class="o">*</span><span class="n">externalInfoJSONCache</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_isShowRedDot</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMobileHash</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMobileFullHash</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsLinkedInID</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsLinkedInName</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsLinkedInPublicUrl</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiDeleteFlag</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsDescription</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsCardUrl</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsWorkID</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsLabelIDList</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSArray</span> <span class="o">*</span><span class="n">m_arrPhoneItem</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">_m_bFromNewDB</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsWeiDianInfo</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSDictionary</span> <span class="o">*</span><span class="n">_m_dicWeiDianInfo</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">_m_uiLastUpdate</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">_m_uiMetaFlag</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">_m_uiDebugModeType</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">_m_nsAppId</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">_m_uiWxAppOpt</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="o">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">HandleChatMemUsrImg:</span><span class="p">(</span><span class="k">struct</span> <span class="n">tagMMModChatRoomMember</span> <span class="o">*</span><span class="p">)</span><span class="n">arg1</span> <span class="nl">Contatct:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">arg2</span> <span class="nl">DocPath:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">HandleUsrImg:</span><span class="p">(</span><span class="k">struct</span> <span class="n">tagMMModContact</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">Contatct:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">DocPath:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">HandleUsrImgPB:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">Contatct:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">DocPath:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">SubscriptedBrandsFromString:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">genChatRoomName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">genChatRoomName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">appendTail:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getChatRoomMember:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span><span class="nf">getChatRoomMemberCount:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getChatRoomMemberUserName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getChatRoomMemberWithoutMyself:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMicroBlogUsrDisplayName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">initialize</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isHeadImgUpdated:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">Local:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isWeAppUserName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">parseContactKey:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">).</span><span class="n">cxx_destruct</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsAddFromLbs</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsAddFromShake</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsUserInChatRoom:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">bizMenuInfoFromContact</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">brandPrivileges</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">brandUrls</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">canSupportMessageNotify</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">compareForFavourGroup:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">containKFWorkerInfo</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">copyFieldFromContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">copyPatialFieldFromContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">description</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">encodeWithCoder:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">externalInfoJSONCache</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">genContactFromShareCardMsgWrap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">genContactFromShareCardMsgWrapContent:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getAppBrandInfo</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getAppBrandSologanImageURL</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getAppID</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getAudioPlayType</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandBusinessScope</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getBrandContactType</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandEvaluateCount</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandMerchantRatings</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandMerchantSecurity</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandMerchantSecurityUrl</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandRegisterSourceBody</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandRegisterSourceIntroUrl</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandTrademarkName</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandTrademarkUrl</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandVerifySourceDescription</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandVerifySourceIntroUrl</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandVerifySourceName</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nf">getBrandVerifySourceType</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getBrandVerifySubTitle</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getChatRoomMemberDisplayName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getChatRoomMemberNickName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getChatRoomMembrGroupNickName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getChatRoomMembrGroupNickNameForSearch:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nf">getConferenceContactExpireTime</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getConferenceVerifyButtonTitle</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getConferenceVerifyPromptTitle</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getConnectorMsgType</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getCustomizeMenu</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getEnterpriseBrandFrozenWording</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getEnterpriseMainBrandUserName</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getEnterpriseSubBrandChatExtUrl</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nf">getEnterpriseSubBrandChildType</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getEnterpriseSubBrandUrl</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getExternalInfoDictionary</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nf">getFunctionFlag</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getInteractiveMode</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">getIsTrademarkProtection</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getLabelIDList</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMainPageUrl</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMobileDisplayName</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMobileList</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMobileNumString</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getNearFieldDesc</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getNewChatroomData</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getNormalContactDisplayDesc</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getReportLocationType</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getScanQRCodeType</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getSpecifyWorkerOpenID</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getSupportEmoticonLinkPrefix</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="k">const</span> <span class="n">map_18e36f99</span> <span class="o">*</span><span class="p">)</span><span class="nf">getValueTagIndexMap</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getValueTypeTable</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getVerisonMD5</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getWeAppInfo</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">hasAppBrandInfo</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">hasMatchHashPhone</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">hasWeAppInfo</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">hasWeAppVersionInfo</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">init</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">initWithCoder:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">initWithModContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">initWithShareCardMsgWrap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">initWithShareCardMsgWrapContent:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isAccountDeleted</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isAdmin</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isBrandContact</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isChatStatusNotifyOpen</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isChatroomNeedAccessVerify</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isContactCanReceiveSpeexVoice</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isContactFrozen</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isContactSessionTop</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isContactTypeShouldDelete</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isEnterpriseBrand</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isEnterpriseChatSubBrand</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isEnterpriseDisableBrand</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isEnterpriseMainBrand</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isEnterpriseSubBrand</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isEnterpriseWebSubBrand</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isHardDeviceBrand</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isHardDeviceHideSubtitle</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isHardDeviceTestBrand</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isHasMobile</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isHasWeiDian</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isHolderContact</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isIgnoreBrandContat</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isInternalMyDeviceBrand</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isInternalSportBrand</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isLocalizedContact</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isMyContact</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isOpenMainPage</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isShowChatRoomDisplayName</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isShowHeadImgInMsg</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isShowLinkedIn</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isShowToolBarInMsg</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isSupportPublicWifi</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isVerified</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isVerifiedBrandContact</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isWeAppContact</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">ChatRoomData</span> <span class="o">*</span><span class="n">m_ChatRoomData</span><span class="p">;</span> <span class="c1">// @synthesize m_ChatRoomData;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">ChatRoomDetail</span> <span class="o">*</span><span class="n">m_ChatRoomDetail</span><span class="p">;</span> <span class="c1">// @synthesize m_ChatRoomDetail;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSArray</span> <span class="o">*</span><span class="n">m_arrPhoneItem</span><span class="p">;</span> <span class="c1">// @synthesize m_arrPhoneItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bFromNewDB</span><span class="p">;</span> <span class="c1">// @synthesize m_bFromNewDB=_m_bFromNewDB;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSDictionary</span> <span class="o">*</span><span class="n">m_dicWeiDianInfo</span><span class="p">;</span> <span class="c1">// @synthesize m_dicWeiDianInfo=_m_dicWeiDianInfo;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">int</span> <span class="n">m_iWCFlag</span><span class="p">;</span> <span class="c1">// @synthesize m_iWCFlag;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_isExtInfoValid</span><span class="p">;</span> <span class="c1">// @synthesize m_isExtInfoValid;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_isShowRedDot</span><span class="p">;</span> <span class="c1">// @synthesize m_isShowRedDot;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppId</span><span class="p">;</span> <span class="c1">// @synthesize m_nsAppId=_m_nsAppId;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsBrandIconUrl</span><span class="p">;</span> <span class="c1">// @synthesize m_nsBrandIconUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsBrandSubscriptConfigUrl</span><span class="p">;</span> <span class="c1">// @synthesize m_nsBrandSubscriptConfigUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsCardUrl</span><span class="p">;</span> <span class="c1">// @synthesize m_nsCardUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsCertificationInfo</span><span class="p">;</span> <span class="c1">// @synthesize m_nsCertificationInfo;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsChatRoomData</span><span class="p">;</span> <span class="c1">// @synthesize m_nsChatRoomData;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsChatRoomMemList</span><span class="p">;</span> <span class="c1">// @synthesize m_nsChatRoomMemList;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsCity</span><span class="p">;</span> <span class="c1">// @synthesize m_nsCity;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsCountry</span><span class="p">;</span> <span class="c1">// @synthesize m_nsCountry;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsDescription</span><span class="p">;</span> <span class="c1">// @synthesize m_nsDescription;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsExternalInfo</span><span class="p">;</span> <span class="c1">// @synthesize m_nsExternalInfo;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsFBID</span><span class="p">;</span> <span class="c1">// @synthesize m_nsFBID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsFBNickName</span><span class="p">;</span> <span class="c1">// @synthesize m_nsFBNickName;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsLabelIDList</span><span class="p">;</span> <span class="c1">// @synthesize m_nsLabelIDList;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsLinkedInID</span><span class="p">;</span> <span class="c1">// @synthesize m_nsLinkedInID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsLinkedInName</span><span class="p">;</span> <span class="c1">// @synthesize m_nsLinkedInName;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsLinkedInPublicUrl</span><span class="p">;</span> <span class="c1">// @synthesize m_nsLinkedInPublicUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMobileFullHash</span><span class="p">;</span> <span class="c1">// @synthesize m_nsMobileFullHash;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMobileHash</span><span class="p">;</span> <span class="c1">// @synthesize m_nsMobileHash;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsOwner</span><span class="p">;</span> <span class="c1">// @synthesize m_nsOwner;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsProvince</span><span class="p">;</span> <span class="c1">// @synthesize m_nsProvince;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsSignature</span><span class="p">;</span> <span class="c1">// @synthesize m_nsSignature;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsWCBGImgObjectID</span><span class="p">;</span> <span class="c1">// @synthesize m_nsWCBGImgObjectID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsWeiDianInfo</span><span class="p">;</span> <span class="c1">// @synthesize m_nsWeiDianInfo;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsWorkID</span><span class="p">;</span> <span class="c1">// @synthesize m_nsWorkID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_pcWCBGImgID</span><span class="p">;</span> <span class="c1">// @synthesize m_pcWCBGImgID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">SubscriptBrandInfo</span> <span class="o">*</span><span class="n">m_subBrandInfo</span><span class="p">;</span> <span class="c1">// @synthesize m_subBrandInfo;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiBrandSubscriptionSettings</span><span class="p">;</span> <span class="c1">// @synthesize m_uiBrandSubscriptionSettings;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiCertificationFlag</span><span class="p">;</span> <span class="c1">// @synthesize m_uiCertificationFlag;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiChatRoomAccessType</span><span class="p">;</span> <span class="c1">// @synthesize m_uiChatRoomAccessType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiChatRoomMaxCount</span><span class="p">;</span> <span class="c1">// @synthesize m_uiChatRoomMaxCount;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiChatRoomStatus</span><span class="p">;</span> <span class="c1">// @synthesize m_uiChatRoomStatus;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiChatRoomVersion</span><span class="p">;</span> <span class="c1">// @synthesize m_uiChatRoomVersion;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiDebugModeType</span><span class="p">;</span> <span class="c1">// @synthesize m_uiDebugModeType=_m_uiDebugModeType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiDeleteFlag</span><span class="p">;</span> <span class="c1">// @synthesize m_uiDeleteFlag;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiLastUpdate</span><span class="p">;</span> <span class="c1">// @synthesize m_uiLastUpdate=_m_uiLastUpdate;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiMetaFlag</span><span class="p">;</span> <span class="c1">// @synthesize m_uiMetaFlag=_m_uiMetaFlag;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiNeedUpdate</span><span class="p">;</span> <span class="c1">// @synthesize m_uiNeedUpdate;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiWxAppOpt</span><span class="p">;</span> <span class="c1">// @synthesize m_uiWxAppOpt=_m_uiWxAppOpt;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">needShowUnreadCountOnSession</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setChatRoomDataWithoutEmojiChange:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setChatStatusNotifyOpen:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setExternalInfoJSONCache:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setSignatureWithoutEmojiChange:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">tryLoadExtInfo</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">updateWithBizAttrChanged:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">xmlForMessageWrapContent</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Remaining properties</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">debugDescription</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hash</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">)</span> <span class="n">Class</span> <span class="n">superclass</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
<span class="line-number">107</span>
<span class="line-number">108</span>
<span class="line-number">109</span>
<span class="line-number">110</span>
<span class="line-number">111</span>
<span class="line-number">112</span>
<span class="line-number">113</span>
<span class="line-number">114</span>
<span class="line-number">115</span>
<span class="line-number">116</span>
<span class="line-number">117</span>
<span class="line-number">118</span>
<span class="line-number">119</span>
<span class="line-number">120</span>
<span class="line-number">121</span>
<span class="line-number">122</span>
<span class="line-number">123</span>
<span class="line-number">124</span>
<span class="line-number">125</span>
<span class="line-number">126</span>
<span class="line-number">127</span>
<span class="line-number">128</span>
<span class="line-number">129</span>
<span class="line-number">130</span>
<span class="line-number">131</span>
<span class="line-number">132</span>
<span class="line-number">133</span>
<span class="line-number">134</span>
<span class="line-number">135</span>
<span class="line-number">136</span>
<span class="line-number">137</span>
<span class="line-number">138</span>
<span class="line-number">139</span>
<span class="line-number">140</span>
<span class="line-number">141</span>
<span class="line-number">142</span>
<span class="line-number">143</span>
<span class="line-number">144</span>
<span class="line-number">145</span>
<span class="line-number">146</span>
<span class="line-number">147</span>
<span class="line-number">148</span>
<span class="line-number">149</span>
<span class="line-number">150</span>
<span class="line-number">151</span>
<span class="line-number">152</span>
<span class="line-number">153</span>
<span class="line-number">154</span>
<span class="line-number">155</span>
<span class="line-number">156</span>
<span class="line-number">157</span>
<span class="line-number">158</span>
<span class="line-number">159</span>
<span class="line-number">160</span>
<span class="line-number">161</span>
<span class="line-number">162</span>
<span class="line-number">163</span>
<span class="line-number">164</span>
<span class="line-number">165</span>
<span class="line-number">166</span>
<span class="line-number">167</span>
<span class="line-number">168</span>
<span class="line-number">169</span>
<span class="line-number">170</span>
<span class="line-number">171</span>
<span class="line-number">172</span>
<span class="line-number">173</span>
<span class="line-number">174</span>
<span class="line-number">175</span>
<span class="line-number">176</span>
<span class="line-number">177</span>
<span class="line-number">178</span>
<span class="line-number">179</span>
<span class="line-number">180</span>
<span class="line-number">181</span>
<span class="line-number">182</span>
<span class="line-number">183</span>
<span class="line-number">184</span>
<span class="line-number">185</span>
<span class="line-number">186</span>
<span class="line-number">187</span>
<span class="line-number">188</span>
<span class="line-number">189</span>
<span class="line-number">190</span>
<span class="line-number">191</span>
<span class="line-number">192</span>
<span class="line-number">193</span>
<span class="line-number">194</span>
<span class="line-number">195</span>
<span class="line-number">196</span>
<span class="line-number">197</span>
<span class="line-number">198</span>
<span class="line-number">199</span>
<span class="line-number">200</span>
<span class="line-number">201</span>
<span class="line-number">202</span>
<span class="line-number">203</span>
<span class="line-number">204</span>
<span class="line-number">205</span>
<span class="line-number">206</span>
<span class="line-number">207</span>
<span class="line-number">208</span>
<span class="line-number">209</span>
<span class="line-number">210</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="c1">//</span>
</span><span class="line"><span class="c1">//     Generated by class-dump 3.5 (64 bit).</span>
</span><span class="line"><span class="c1">//</span>
</span><span class="line"><span class="c1">//     class-dump is Copyright (C) 1997-1998, 2000-2001, 2004-2013 by Steve Nygard.</span>
</span><span class="line"><span class="c1">//</span>
</span><span class="line">
</span><span class="line"><span class="cp">#import &quot;MMService.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="cp">#import &quot;IAcctStorageMgrExt.h&quot;</span>
</span><span class="line"><span class="cp">#import &quot;IBrandAttrMgrExt.h&quot;</span>
</span><span class="line"><span class="cp">#import &quot;IContactProfileMgrExt.h&quot;</span>
</span><span class="line"><span class="cp">#import &quot;IMMLanguageMgrExt.h&quot;</span>
</span><span class="line"><span class="cp">#import &quot;MMService.h&quot;</span>
</span><span class="line"><span class="cp">#import &quot;MessageObserverDelegate.h&quot;</span>
</span><span class="line"><span class="cp">#import &quot;PBMessageObserverDelegate.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="k">@class</span> <span class="nc">CContactDB</span>, <span class="nc">CContactOPLog</span>, <span class="nc">NSMutableDictionary</span>, <span class="nc">NSRecursiveLock</span>, <span class="nc">NSString</span>, <span class="nc">NewContactDB</span>;
</span><span class="line">
</span><span class="line"><span class="k">@interface</span> <span class="nc">CContactMgr</span> : <span class="nc">MMService</span> <span class="o">&lt;</span><span class="n">MMService</span><span class="p">,</span> <span class="n">MessageObserverDelegate</span><span class="p">,</span> <span class="n">IContactProfileMgrExt</span><span class="p">,</span> <span class="n">PBMessageObserverDelegate</span><span class="p">,</span> <span class="n">IAcctStorageMgrExt</span><span class="p">,</span> <span class="n">IMMLanguageMgrExt</span><span class="p">,</span> <span class="n">IBrandAttrMgrExt</span><span class="o">&gt;</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="n">NSRecursiveLock</span> <span class="o">*</span><span class="n">m_oLock</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiLoadedType</span><span class="p">;</span>
</span><span class="line">    <span class="n">CContactDB</span> <span class="o">*</span><span class="n">m_oContactDB</span><span class="p">;</span>
</span><span class="line">    <span class="n">NewContactDB</span> <span class="o">*</span><span class="n">m_oNewContactDB</span><span class="p">;</span>
</span><span class="line">    <span class="n">CContactOPLog</span> <span class="o">*</span><span class="n">m_oContactOPLog</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSRecursiveLock</span> <span class="o">*</span><span class="n">m_oMainControllerLock</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">m_dicRemark</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">m_dicLastAccessTime</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">m_dicContacts</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">m_dicEncodeContacts</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">m_mapLastGetTime</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">m_dicHardCodeUsers</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiDBVersion</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_shouldContactDBMigration</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_bContactDBMigrationFinished</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiMaxStrangerCache</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_bOpenStrangerCache</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">).</span><span class="n">cxx_destruct</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">ChangeNotifyStatus:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">withStatus:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">ChangeNotifyStatusForChatRoom:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">withStatus:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">HandleMemContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">MainThread_ReloadMemContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">MessageReturn:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">Event:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">MessageReturn:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">MessageInfo:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">Event:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">ModifyNotifyStatus:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">withStatus:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">RemoveContactFromChatList:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">SetFriendMetaFlag:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">ForUser:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">SetLastUpdateTime:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">ForUser:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">addAddHardcodeContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">selector:</span><span class="p">(</span><span class="kt">SEL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">addContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">addContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">opLog:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">addContactInternal:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">addContactToDb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">addDictoryDataToCache:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">addFromMobileContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">addFromQQContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">addHardCodeContacts</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">addLocalContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">addOrUpdateContactToDB:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">add:</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg3</span> <span class="nf">modify:</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg4</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">addSelfContactToCache</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">addToGetContactMap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">autoreloadContacts:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">autoreloadContacts:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">needLoadExt:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callModifyContactForCPState:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callOnDeleteExt:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callOnModifyContactHeadImageExt:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callOnModifyExt:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callOnRemoveContactFromAddressBook:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">checkIfForbiddenGetContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">clearDraftForContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">dealloc</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">delayLoadAllContactInBackGround</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">deleteContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">deleteContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">andScene:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg3</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg4</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">deleteContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">fixContactPluginOldData</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">generateOfficialContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">generatePluginContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">generatePluginContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">uiType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">generatePluginContactNoListContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getAllBrandContacts</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">getAllContactList:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">getAllContactNoExtInfoList:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getAllContactUserName</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getAllEnterpriseMainBrandContacts</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">getAllRemarkList:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">getAllUserName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getContactByName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getContactByNameFromCache:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getContactByNameFromDB:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getContactForSearchByName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getContactFromDB:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getContactFromDic:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getContactList:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">contactType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getContactList:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">contactType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">needLoadExt:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">getContactsFromServer:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">getContactsFromServer:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">chatContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">getContactsFromServer:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">chatContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">withScene:</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nv">arg3</span> <span class="nf">withTicket:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg4</span> <span class="nf">usrData:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg5</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">getContactsFromSvrForTempChat:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getGroupCardMemberList:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">getInviteeContactsFromServer:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">withTicket:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getSelfContact</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">handleLocalField:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">oldContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">handleOfficalContactName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">init</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">initDB:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">lock:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">initListen</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">interalReloadContacts:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">needLoadExt:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">internalDeleteContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">internalGetContactsFromSvr:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">chatContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">usrData:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">internalModifyContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">internalNewContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">internalUpdateContactLocalDataWithUserName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isBelongToMMContactInCache:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isCacheAllLoaded</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isContactBlack:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isContactExistLocal:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isContactMatch:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">listType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">contactType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isHardCodeContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isHeadImgUpdated:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">Local:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isInContactList:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isOpenStrangerCache</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isUserNewDB</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">loadContactExtInfo:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">main_onPushAddContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">main_onPushBatchModContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">main_onPushDeleteContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">main_onPushModifyContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">mergeChatRoomData:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">oldContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">migrationContacts:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">first:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">modifyContactNickName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">nickName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">callMod:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onBrandContactModified:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">withAttrChanged:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onGetContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onLanguageChange</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onPushDeleteContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onPushModifyContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">updateImage:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onServiceClearData</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">onServiceMemoryWarning</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onServiceReloadData</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onSettingChange</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">refreshContactLocalData</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">refreshPluginNickName:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">reloadContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">reloadContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">mergeImage:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">reloadContactImageStatus:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">Status:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">Image:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">removeContactFromDB:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">removeContactFromDic:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">removeListen</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">reportIDKey:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">stranger:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">reportMigrationStat:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">status:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setBlack:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setBlack:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">blackFlag:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setBlack:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">RoomDetail:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">cardDesc:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">cardUrl:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">chatRoomAccessType:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">chatRoomData:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">chatState:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">favour:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">googleContactName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">googleContactNickName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">hideHashPhone:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">mobileIdentify:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">nickName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">notifyOpen:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">owner:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">remark:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">remark:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">hideHashPhone:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">sessionTop:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">snsBlack:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">textTranslateOpen:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">typeBit:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">set:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg4</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">typeBit:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">set:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg4</span> <span class="nf">localSet:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg5</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">watchContact:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setContactToDic:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">forKey:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setHDHeadUpdated:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setLocalContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">notifyOpen:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setLocalContactToUntopSession:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setMigrationFinished</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setNoBlack:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setNoBlack:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">sync:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">setPhone:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">Contact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setSelfContactUpdated</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">shouldUpdateContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">splist_migrationContactList:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">syncAllSXContact</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">thread_BatchModifyContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">thread_HandleMemContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">thread_ReloadMemConact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">ChatRoom:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">thread_onBatchModifyChatRoomMember:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">thread_onPushModifyContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">isInit:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">thread_onpushBatchModContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">thread_saveContactImageStatus:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">Status:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">Image:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg3</span> <span class="nf">Url:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg4</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">tryLoadExtInfoForContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">updateCache:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">updateContactLocalData</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">updateContactToCache:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">updateContactToDb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">updateNewDB:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">NewUser:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Remaining properties</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">debugDescription</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">description</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hash</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">)</span> <span class="n">Class</span> <span class="n">superclass</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
<span class="line-number">107</span>
<span class="line-number">108</span>
<span class="line-number">109</span>
<span class="line-number">110</span>
<span class="line-number">111</span>
<span class="line-number">112</span>
<span class="line-number">113</span>
<span class="line-number">114</span>
<span class="line-number">115</span>
<span class="line-number">116</span>
<span class="line-number">117</span>
<span class="line-number">118</span>
<span class="line-number">119</span>
<span class="line-number">120</span>
<span class="line-number">121</span>
<span class="line-number">122</span>
<span class="line-number">123</span>
<span class="line-number">124</span>
<span class="line-number">125</span>
<span class="line-number">126</span>
<span class="line-number">127</span>
<span class="line-number">128</span>
<span class="line-number">129</span>
<span class="line-number">130</span>
<span class="line-number">131</span>
<span class="line-number">132</span>
<span class="line-number">133</span>
<span class="line-number">134</span>
<span class="line-number">135</span>
<span class="line-number">136</span>
<span class="line-number">137</span>
<span class="line-number">138</span>
<span class="line-number">139</span>
<span class="line-number">140</span>
<span class="line-number">141</span>
<span class="line-number">142</span>
<span class="line-number">143</span>
<span class="line-number">144</span>
<span class="line-number">145</span>
<span class="line-number">146</span>
<span class="line-number">147</span>
<span class="line-number">148</span>
<span class="line-number">149</span>
<span class="line-number">150</span>
<span class="line-number">151</span>
<span class="line-number">152</span>
<span class="line-number">153</span>
<span class="line-number">154</span>
<span class="line-number">155</span>
<span class="line-number">156</span>
<span class="line-number">157</span>
<span class="line-number">158</span>
<span class="line-number">159</span>
<span class="line-number">160</span>
<span class="line-number">161</span>
<span class="line-number">162</span>
<span class="line-number">163</span>
<span class="line-number">164</span>
<span class="line-number">165</span>
<span class="line-number">166</span>
<span class="line-number">167</span>
<span class="line-number">168</span>
<span class="line-number">169</span>
<span class="line-number">170</span>
<span class="line-number">171</span>
<span class="line-number">172</span>
<span class="line-number">173</span>
<span class="line-number">174</span>
<span class="line-number">175</span>
<span class="line-number">176</span>
<span class="line-number">177</span>
<span class="line-number">178</span>
<span class="line-number">179</span>
<span class="line-number">180</span>
<span class="line-number">181</span>
<span class="line-number">182</span>
<span class="line-number">183</span>
<span class="line-number">184</span>
<span class="line-number">185</span>
<span class="line-number">186</span>
<span class="line-number">187</span>
<span class="line-number">188</span>
<span class="line-number">189</span>
<span class="line-number">190</span>
<span class="line-number">191</span>
<span class="line-number">192</span>
<span class="line-number">193</span>
<span class="line-number">194</span>
<span class="line-number">195</span>
<span class="line-number">196</span>
<span class="line-number">197</span>
<span class="line-number">198</span>
<span class="line-number">199</span>
<span class="line-number">200</span>
<span class="line-number">201</span>
<span class="line-number">202</span>
<span class="line-number">203</span>
<span class="line-number">204</span>
<span class="line-number">205</span>
<span class="line-number">206</span>
<span class="line-number">207</span>
<span class="line-number">208</span>
<span class="line-number">209</span>
<span class="line-number">210</span>
<span class="line-number">211</span>
<span class="line-number">212</span>
<span class="line-number">213</span>
<span class="line-number">214</span>
<span class="line-number">215</span>
<span class="line-number">216</span>
<span class="line-number">217</span>
<span class="line-number">218</span>
<span class="line-number">219</span>
<span class="line-number">220</span>
<span class="line-number">221</span>
<span class="line-number">222</span>
<span class="line-number">223</span>
<span class="line-number">224</span>
<span class="line-number">225</span>
<span class="line-number">226</span>
<span class="line-number">227</span>
<span class="line-number">228</span>
<span class="line-number">229</span>
<span class="line-number">230</span>
<span class="line-number">231</span>
<span class="line-number">232</span>
<span class="line-number">233</span>
<span class="line-number">234</span>
<span class="line-number">235</span>
<span class="line-number">236</span>
<span class="line-number">237</span>
<span class="line-number">238</span>
<span class="line-number">239</span>
<span class="line-number">240</span>
<span class="line-number">241</span>
<span class="line-number">242</span>
<span class="line-number">243</span>
<span class="line-number">244</span>
<span class="line-number">245</span>
<span class="line-number">246</span>
<span class="line-number">247</span>
<span class="line-number">248</span>
<span class="line-number">249</span>
<span class="line-number">250</span>
<span class="line-number">251</span>
<span class="line-number">252</span>
<span class="line-number">253</span>
<span class="line-number">254</span>
<span class="line-number">255</span>
<span class="line-number">256</span>
<span class="line-number">257</span>
<span class="line-number">258</span>
<span class="line-number">259</span>
<span class="line-number">260</span>
<span class="line-number">261</span>
<span class="line-number">262</span>
<span class="line-number">263</span>
<span class="line-number">264</span>
<span class="line-number">265</span>
<span class="line-number">266</span>
<span class="line-number">267</span>
<span class="line-number">268</span>
<span class="line-number">269</span>
<span class="line-number">270</span>
<span class="line-number">271</span>
<span class="line-number">272</span>
<span class="line-number">273</span>
<span class="line-number">274</span>
<span class="line-number">275</span>
<span class="line-number">276</span>
<span class="line-number">277</span>
<span class="line-number">278</span>
<span class="line-number">279</span>
<span class="line-number">280</span>
<span class="line-number">281</span>
<span class="line-number">282</span>
<span class="line-number">283</span>
<span class="line-number">284</span>
<span class="line-number">285</span>
<span class="line-number">286</span>
<span class="line-number">287</span>
<span class="line-number">288</span>
<span class="line-number">289</span>
<span class="line-number">290</span>
<span class="line-number">291</span>
<span class="line-number">292</span>
<span class="line-number">293</span>
<span class="line-number">294</span>
<span class="line-number">295</span>
<span class="line-number">296</span>
<span class="line-number">297</span>
<span class="line-number">298</span>
<span class="line-number">299</span>
<span class="line-number">300</span>
<span class="line-number">301</span>
<span class="line-number">302</span>
<span class="line-number">303</span>
<span class="line-number">304</span>
<span class="line-number">305</span>
<span class="line-number">306</span>
<span class="line-number">307</span>
<span class="line-number">308</span>
<span class="line-number">309</span>
<span class="line-number">310</span>
<span class="line-number">311</span>
<span class="line-number">312</span>
<span class="line-number">313</span>
<span class="line-number">314</span>
<span class="line-number">315</span>
<span class="line-number">316</span>
<span class="line-number">317</span>
<span class="line-number">318</span>
<span class="line-number">319</span>
<span class="line-number">320</span>
<span class="line-number">321</span>
<span class="line-number">322</span>
<span class="line-number">323</span>
<span class="line-number">324</span>
<span class="line-number">325</span>
<span class="line-number">326</span>
<span class="line-number">327</span>
<span class="line-number">328</span>
<span class="line-number">329</span>
<span class="line-number">330</span>
<span class="line-number">331</span>
<span class="line-number">332</span>
<span class="line-number">333</span>
<span class="line-number">334</span>
<span class="line-number">335</span>
<span class="line-number">336</span>
<span class="line-number">337</span>
<span class="line-number">338</span>
<span class="line-number">339</span>
<span class="line-number">340</span>
<span class="line-number">341</span>
<span class="line-number">342</span>
<span class="line-number">343</span>
<span class="line-number">344</span>
<span class="line-number">345</span>
<span class="line-number">346</span>
<span class="line-number">347</span>
<span class="line-number">348</span>
<span class="line-number">349</span>
<span class="line-number">350</span>
<span class="line-number">351</span>
<span class="line-number">352</span>
<span class="line-number">353</span>
<span class="line-number">354</span>
<span class="line-number">355</span>
<span class="line-number">356</span>
<span class="line-number">357</span>
<span class="line-number">358</span>
<span class="line-number">359</span>
<span class="line-number">360</span>
<span class="line-number">361</span>
<span class="line-number">362</span>
<span class="line-number">363</span>
<span class="line-number">364</span>
<span class="line-number">365</span>
<span class="line-number">366</span>
<span class="line-number">367</span>
<span class="line-number">368</span>
<span class="line-number">369</span>
<span class="line-number">370</span>
<span class="line-number">371</span>
<span class="line-number">372</span>
<span class="line-number">373</span>
<span class="line-number">374</span>
<span class="line-number">375</span>
<span class="line-number">376</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="c1">//</span>
</span><span class="line"><span class="c1">//     Generated by class-dump 3.5 (64 bit).</span>
</span><span class="line"><span class="c1">//</span>
</span><span class="line"><span class="c1">//     class-dump is Copyright (C) 1997-1998, 2000-2001, 2004-2013 by Steve Nygard.</span>
</span><span class="line"><span class="c1">//</span>
</span><span class="line">
</span><span class="line"><span class="cp">#import &quot;MMObject.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="cp">#import &quot;IAppMsgPathMgr.h&quot;</span>
</span><span class="line"><span class="cp">#import &quot;IMsgExtendOperation.h&quot;</span>
</span><span class="line"><span class="cp">#import &quot;ISysNewXmlMsgExtendOperation.h&quot;</span>
</span><span class="line"><span class="cp">#import &quot;NSCopying.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="k">@class</span> <span class="nc">AppInnerJumpItem</span>, <span class="nc">AppProductItem</span>, <span class="nc">AppTVItem</span>, <span class="nc">CardTicketItem</span>, <span class="nc">EmoticonSharedItem</span>, <span class="nc">EmotionDesignerSharedItem</span>, <span class="nc">EmotionPageSharedItem</span>, <span class="nc">FavoritesItem</span>, <span class="nc">HardWareItem</span>, <span class="nc">ImageInfo</span>, <span class="nc">MMAsset</span>, <span class="nc">MMWCPushInfo</span>, <span class="nc">MallProductItem</span>, <span class="nc">MessageExpItem</span>, <span class="nc">NSArray</span>, <span class="nc">NSData</span>, <span class="nc">NSMutableArray</span>, <span class="nc">NSMutableDictionary</span>, <span class="nc">NSString</span>, <span class="nc">PushMailWrap</span>, <span class="nc">WAAppMsgItem</span>, <span class="nc">WCCanvasPageItem</span>, <span class="nc">WCPayInfoItem</span>, <span class="nc">iWatchAppMsgItem</span>;
</span><span class="line">
</span><span class="line"><span class="k">@interface</span> <span class="nc">CMessageWrap</span> : <span class="nc">MMObject</span> <span class="o">&lt;</span><span class="n">IAppMsgPathMgr</span><span class="p">,</span> <span class="n">ISysNewXmlMsgExtendOperation</span><span class="p">,</span> <span class="n">IMsgExtendOperation</span><span class="p">,</span> <span class="n">NSCopying</span><span class="o">&gt;</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_bIsSplit</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_bNew</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiMesLocalID</span><span class="p">;</span>
</span><span class="line">    <span class="kt">long</span> <span class="kt">long</span> <span class="n">m_n64MesSvrID</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsFromUsr</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsToUsr</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiMessageType</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsContent</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiStatus</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiImgStatus</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiMsgFlag</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiCreateTime</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsPushContent</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMsgSource</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsRealChatUsr</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSData</span> <span class="o">*</span><span class="n">m_dtThumbnail</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiSendTime</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiEmojiStatFlag</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsPattern</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_bForward</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_bCdnForward</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiPercent</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiDownloadStatus</span><span class="p">;</span>
</span><span class="line">    <span class="kt">id</span> <span class="o">&lt;</span><span class="n">IMsgExtendOperation</span><span class="o">&gt;</span> <span class="n">m_extendInfoWithMsgTypeForBiz</span><span class="p">;</span>
</span><span class="line">    <span class="kt">id</span> <span class="o">&lt;</span><span class="n">IMsgExtendOperation</span><span class="o">&gt;</span> <span class="n">m_extendInfoWithMsgType</span><span class="p">;</span>
</span><span class="line">    <span class="kt">id</span> <span class="o">&lt;</span><span class="n">IMsgExtendOperation</span><span class="o">&gt;</span> <span class="n">m_extendInfoWithFromUsr</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsLastDisplayContent</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_isTempSessionMsg</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_isEnterpriseMsg</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_sequenceId</span><span class="p">;</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="n">m_bIsFromBrandSession</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsKFWorkerOpenID</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsBizClientMsgID</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsBizChatId</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiBizChatVer</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAtUserList</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">watchMsgSourceType</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsDisplayName</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">_m_forwardType</span><span class="p">;</span>
</span><span class="line">    <span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">_m_dicForwardParas</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="o">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nl">FormMessageWrapFromAddMsg:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">FormMessageWrapFromBuffer:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetCdnDownloadPathOfMsgThumb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">GetPathOfAppData:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">LocalID:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">FileExt:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg3</span> <span class="nf">retStrPath:</span><span class="p">(</span><span class="kt">id</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg4</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">GetPathOfAppDataByUserName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">andMessageWrap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">andAttachId:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg3</span> <span class="nf">andAttachFileExt:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg4</span> <span class="nf">retStrPath:</span><span class="p">(</span><span class="kt">id</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg5</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">GetPathOfAppDataByUserName:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">andMessageWrap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">retStrPath:</span><span class="p">(</span><span class="kt">id</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">GetPathOfAppDataTemp:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">LocalID:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">AttachId:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg3</span> <span class="nf">retStrPath:</span><span class="p">(</span><span class="kt">id</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg4</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">GetPathOfAppDataTemp:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">LocalID:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">retStrPath:</span><span class="p">(</span><span class="kt">id</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">GetPathOfAppDir:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">retStrPath:</span><span class="p">(</span><span class="kt">id</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">GetPathOfAppImgCacheDir:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">retStrPath:</span><span class="p">(</span><span class="kt">id</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">GetPathOfAppRemindAttach:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">retStrPath:</span><span class="p">(</span><span class="kt">id</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">GetPathOfAppThumb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">LocalID:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">retStrPath:</span><span class="p">(</span><span class="kt">id</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">GetPathOfMaskedAppThumb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">LocalID:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">retStrPath:</span><span class="p">(</span><span class="kt">id</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg3</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetPathOfMaskedSquareMesImgThumbDir:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetPathOfMesVideoWithMessageWrap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetPathOfSquareMesImgThumb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetTempPathOfMesShortVideoWithMessageWrap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsRecordMsg:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">SaveMesImg:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">MsgWrap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">SaveMsgThumbWithMsgWrap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">clearLocalImage:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">clearLocalMaskedThumbImage:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">createMaskedThumbImageForMessageWrap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMaskedMsgImgThumb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMaskedVideoMsgImgThumb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMessageListStatusImage:</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMsgHDImg:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMsgHDImgData:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMsgImg:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMsgImgData:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMsgImgThumb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getOldPathOfMessageImageCache</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getPathOfMaskedMsgImgThumb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getPathOfMaskedVideoMsgImgThumb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getPathOfMessageImageCache</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getPathOfMiddleImgForSender:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getPathOfMsgHDImg:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getPathOfMsgImg:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getPathOfMsgImgThumb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getPathOfVideoMsgImgThumb:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getUserNameFromMsgWrap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">initialize</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isSenderFromMsgWrap:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">).</span><span class="n">cxx_destruct</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">AddTagToMsgSource:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">value:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">ChangeForBackup</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">ChangeForChatRoom</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">ChangeForDisplay</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">ChangeForMsgSource</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetCdnDownloadPathOfVideo</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetCdnDownloadThumbPathOfVideo</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetChatName</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetDisplayContent</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetImg</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetMsgClientMsgID</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">GetThumb</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsAppMessage</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsAtMe</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsBottleMessage</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsChatRoomMessage</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsImgMsg</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsMassSendMessage</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsNeedAddMsgBizExt</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsNeedChatExt</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsNewInvitation</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsNewInvitationApprove</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsQQMessage</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsRoomAnnouncement</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsSameMsg:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsSameMsgWithFullCheck:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsSendBySendMsg</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsShortMovieMsg</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsSimpleVideoMsg</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsSxMessage</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsTextMsg</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">IsVideoMsg</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">UpdateMsgSource</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">bIsAppUrlTypeWithCanvas</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">canPlayVideo:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">compareMessageAscending:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">compareMessageLocalIDDescending:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">compareQQAscending:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">compareSXAscending:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">copyWithZone:</span><span class="p">(</span><span class="k">struct</span> <span class="n">_NSZone</span> <span class="o">*</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">description</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">fillMsgSourceFromContact:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">isFromTempSession:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">forwardInvocation:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">forwardingTargetForSelector:</span><span class="p">(</span><span class="kt">SEL</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">genImageFromMMAssetAndNotify:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">genMiddleImg:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">originImgData:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span> <span class="nf">isSaveOK:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg3</span> <span class="nf">delegate:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg4</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getMsgExtBizId</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">getNodeBtnList</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">init</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">initWithMsgType:</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">initWithMsgType:</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nv">arg1</span> <span class="nf">nsFromUsr:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg2</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isAd</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isSentOK</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isShowAppBottomButton</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isShowAppMessageBlockButton</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isShowCommentButton</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">keyDescription</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bCdnForward</span><span class="p">;</span> <span class="c1">// @synthesize m_bCdnForward;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bForward</span><span class="p">;</span> <span class="c1">// @synthesize m_bForward;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bIsFromBrandSession</span><span class="p">;</span> <span class="c1">// @synthesize m_bIsFromBrandSession;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bIsSplit</span><span class="p">;</span> <span class="c1">// @synthesize m_bIsSplit;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bNew</span><span class="p">;</span> <span class="c1">// @synthesize m_bNew;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">m_dicForwardParas</span><span class="p">;</span> <span class="c1">// @synthesize m_dicForwardParas=_m_dicForwardParas;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSData</span> <span class="o">*</span><span class="n">m_dtThumbnail</span><span class="p">;</span> <span class="c1">// @synthesize m_dtThumbnail;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">id</span> <span class="o">&lt;</span><span class="n">IMsgExtendOperation</span><span class="o">&gt;</span> <span class="n">m_extendInfoWithFromUsr</span><span class="p">;</span> <span class="c1">// @synthesize m_extendInfoWithFromUsr;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">id</span> <span class="o">&lt;</span><span class="n">IMsgExtendOperation</span><span class="o">&gt;</span> <span class="n">m_extendInfoWithMsgType</span><span class="p">;</span> <span class="c1">// @synthesize m_extendInfoWithMsgType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">id</span> <span class="o">&lt;</span><span class="n">IMsgExtendOperation</span><span class="o">&gt;</span> <span class="n">m_extendInfoWithMsgTypeForBiz</span><span class="p">;</span> <span class="c1">// @synthesize m_extendInfoWithMsgTypeForBiz;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_forwardType</span><span class="p">;</span> <span class="c1">// @synthesize m_forwardType=_m_forwardType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_isEnterpriseMsg</span><span class="p">;</span> <span class="c1">// @synthesize m_isEnterpriseMsg;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_isTempSessionMsg</span><span class="p">;</span> <span class="c1">// @synthesize m_isTempSessionMsg;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">m_n64MesSvrID</span><span class="p">;</span> <span class="c1">// @synthesize m_n64MesSvrID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAtUserList</span><span class="p">;</span> <span class="c1">// @synthesize m_nsAtUserList;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsBizChatId</span><span class="p">;</span> <span class="c1">// @synthesize m_nsBizChatId;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsBizClientMsgID</span><span class="p">;</span> <span class="c1">// @synthesize m_nsBizClientMsgID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsContent</span><span class="p">;</span> <span class="c1">// @synthesize m_nsContent;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsDisplayName</span><span class="p">;</span> <span class="c1">// @synthesize m_nsDisplayName;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsFromUsr</span><span class="p">;</span> <span class="c1">// @synthesize m_nsFromUsr;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsKFWorkerOpenID</span><span class="p">;</span> <span class="c1">// @synthesize m_nsKFWorkerOpenID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMsgSource</span><span class="p">;</span> <span class="c1">// @synthesize m_nsMsgSource;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsPattern</span><span class="p">;</span> <span class="c1">// @synthesize m_nsPattern;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsPushContent</span><span class="p">;</span> <span class="c1">// @synthesize m_nsPushContent;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsRealChatUsr</span><span class="p">;</span> <span class="c1">// @synthesize m_nsRealChatUsr;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsToUsr</span><span class="p">;</span> <span class="c1">// @synthesize m_nsToUsr;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_sequenceId</span><span class="p">;</span> <span class="c1">// @synthesize m_sequenceId;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiBizChatVer</span><span class="p">;</span> <span class="c1">// @synthesize m_uiBizChatVer;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiCreateTime</span><span class="p">;</span> <span class="c1">// @synthesize m_uiCreateTime;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiDownloadStatus</span><span class="p">;</span> <span class="c1">// @synthesize m_uiDownloadStatus;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiEmojiStatFlag</span><span class="p">;</span> <span class="c1">// @synthesize m_uiEmojiStatFlag;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiImgStatus</span><span class="p">;</span> <span class="c1">// @synthesize m_uiImgStatus;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiMesLocalID</span><span class="p">;</span> <span class="c1">// @synthesize m_uiMesLocalID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiMessageType</span><span class="p">;</span> <span class="c1">// @synthesize m_uiMessageType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiMsgFlag</span><span class="p">;</span> <span class="c1">// @synthesize m_uiMsgFlag;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiPercent</span><span class="p">;</span> <span class="c1">// @synthesize m_uiPercent;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiSendTime</span><span class="p">;</span> <span class="c1">// @synthesize m_uiSendTime;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiStatus</span><span class="p">;</span> <span class="c1">// @synthesize m_uiStatus;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">methodSignatureForSelector:</span><span class="p">(</span><span class="kt">SEL</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">nativeUrl</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setVideoPlayMode:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">arg1</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">watchMsgSourceType</span><span class="p">;</span> <span class="c1">// @synthesize watchMsgSourceType;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">wishingString</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span><span class="nf">yoCount</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">yoType</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Remaining properties</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">debugDescription</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hash</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_AttachedContent</span><span class="p">;</span> <span class="c1">// @dynamic m_AttachedContent;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_aesKey</span><span class="p">;</span> <span class="c1">// @dynamic m_aesKey;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSArray</span> <span class="o">*</span><span class="n">m_arrCustomWrap</span><span class="p">;</span> <span class="c1">// @dynamic m_arrCustomWrap;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">m_arrInviteeMembers</span><span class="p">;</span> <span class="c1">// @dynamic m_arrInviteeMembers;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">m_arrMembers</span><span class="p">;</span> <span class="c1">// @dynamic m_arrMembers;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSArray</span> <span class="o">*</span><span class="n">m_arrReaderWaps</span><span class="p">;</span> <span class="c1">// @dynamic m_arrReaderWaps;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">MMAsset</span> <span class="o">*</span><span class="n">m_asset</span><span class="p">;</span> <span class="c1">// @dynamic m_asset;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bAppAttachExistInSvr</span><span class="p">;</span> <span class="c1">// @dynamic m_bAppAttachExistInSvr;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bComeInByClick</span><span class="p">;</span> <span class="c1">// @dynamic m_bComeInByClick;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bHasApprove</span><span class="p">;</span> <span class="c1">// @dynamic m_bHasApprove;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bHaveMoovDownload</span><span class="p">;</span> <span class="c1">// @dynamic m_bHaveMoovDownload;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bIsForceUpdate</span><span class="p">;</span> <span class="c1">// @dynamic m_bIsForceUpdate;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bNeedReloadSubView</span><span class="p">;</span> <span class="c1">// @dynamic m_bNeedReloadSubView;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bNewApprove</span><span class="p">;</span> <span class="c1">// @dynamic m_bNewApprove;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bNewInv</span><span class="p">;</span> <span class="c1">// @dynamic m_bNewInv;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bShowRewardTips</span><span class="p">;</span> <span class="c1">// @dynamic m_bShowRewardTips;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_bStartPlay</span><span class="p">;</span> <span class="c1">// @dynamic m_bStartPlay;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_cdnUrlString</span><span class="p">;</span> <span class="c1">// @dynamic m_cdnUrlString;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">m_dicStatParas</span><span class="p">;</span> <span class="c1">// @dynamic m_dicStatParas;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSData</span> <span class="o">*</span><span class="n">m_dtImg</span><span class="p">;</span> <span class="c1">// @dynamic m_dtImg;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSData</span> <span class="o">*</span><span class="n">m_dtSenderMidImg</span><span class="p">;</span> <span class="c1">// @dynamic m_dtSenderMidImg;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSData</span> <span class="o">*</span><span class="n">m_dtVoice</span><span class="p">;</span> <span class="c1">// @dynamic m_dtVoice;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_duration</span><span class="p">;</span> <span class="c1">// @dynamic m_duration;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_encryptUrlString</span><span class="p">;</span> <span class="c1">// @dynamic m_encryptUrlString;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">float</span> <span class="n">m_fLatitude</span><span class="p">;</span> <span class="c1">// @dynamic m_fLatitude;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">float</span> <span class="n">m_fLongitude</span><span class="p">;</span> <span class="c1">// @dynamic m_fLongitude;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_fromChatUserName</span><span class="p">;</span> <span class="c1">// @dynamic m_fromChatUserName;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">m_i64VoipKey</span><span class="p">;</span> <span class="c1">// @dynamic m_i64VoipKey;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">long</span> <span class="n">m_iVoipRoomid</span><span class="p">;</span> <span class="c1">// @dynamic m_iVoipRoomid;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_infoUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_infoUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_inviterName</span><span class="p">;</span> <span class="c1">// @dynamic m_inviterName;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_isCanUpload</span><span class="p">;</span> <span class="c1">// @dynamic m_isCanUpload;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_isContentOriginal</span><span class="p">;</span> <span class="c1">// @dynamic m_isContentOriginal;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_isDirectSend</span><span class="p">;</span> <span class="c1">// @dynamic m_isDirectSend;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_isForNewYear</span><span class="p">;</span> <span class="c1">// @dynamic m_isForNewYear;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">m_isReaderForbidForward</span><span class="p">;</span> <span class="c1">// @dynamic m_isReaderForbidForward;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">double</span> <span class="n">m_latitude</span><span class="p">;</span> <span class="c1">// @dynamic m_latitude;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_locationLabel</span><span class="p">;</span> <span class="c1">// @dynamic m_locationLabel;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">double</span> <span class="n">m_longitude</span><span class="p">;</span> <span class="c1">// @dynamic m_longitude;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">double</span> <span class="n">m_mapScale</span><span class="p">;</span> <span class="c1">// @dynamic m_mapScale;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_mapType</span><span class="p">;</span> <span class="c1">// @dynamic m_mapType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">int</span> <span class="n">m_msgInnerType</span><span class="p">;</span> <span class="c1">// @dynamic m_msgInnerType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">long</span> <span class="n">m_nDownloadLimit</span><span class="p">;</span> <span class="c1">// @dynamic m_nDownloadLimit;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_newXmlType</span><span class="p">;</span> <span class="c1">// @dynamic m_newXmlType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAesKey</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAesKey;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppAction</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppAction;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppAttachID</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppAttachID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppContent</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppContent;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppExtInfo</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppExtInfo;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppFileExt</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppFileExt;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppID</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppMediaDataUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppMediaDataUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppMediaLowBandDataUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppMediaLowBandDataUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppMediaLowUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppMediaLowUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppMediaTagName</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppMediaTagName;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppMediaUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppMediaUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppMessageAction</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppMessageAction;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppMessageExt</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppMessageExt;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAppName</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAppName;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsAutoDownloadControl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsAutoDownloadControl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsCommentUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsCommentUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsDesc</span><span class="p">;</span> <span class="c1">// @dynamic m_nsDesc;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsDesignerId</span><span class="p">;</span> <span class="c1">// @dynamic m_nsDesignerId;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsEmoticonBelongToProductID</span><span class="p">;</span> <span class="c1">// @dynamic m_nsEmoticonBelongToProductID;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsEmoticonMD5</span><span class="p">;</span> <span class="c1">// @dynamic m_nsEmoticonMD5;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsFileParam</span><span class="p">;</span> <span class="c1">// @dynamic m_nsFileParam;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsImgHDUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsImgHDUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsImgMidUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsImgMidUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsImgSrc</span><span class="p">;</span> <span class="c1">// @dynamic m_nsImgSrc;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsInviteReason</span><span class="p">;</span> <span class="c1">// @dynamic m_nsInviteReason;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsInviteTickets</span><span class="p">;</span> <span class="c1">// @dynamic m_nsInviteTickets;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsJsAppId</span><span class="p">;</span> <span class="c1">// @dynamic m_nsJsAppId;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMsgAttachUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsMsgAttachUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMsgDataUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsMsgDataUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMsgMd5</span><span class="p">;</span> <span class="c1">// @dynamic m_nsMsgMd5;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMsgThumbAesKey</span><span class="p">;</span> <span class="c1">// @dynamic m_nsMsgThumbAesKey;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMsgThumbMd5</span><span class="p">;</span> <span class="c1">// @dynamic m_nsMsgThumbMd5;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsMsgThumbUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsMsgThumbUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsRemindAttachId</span><span class="p">;</span> <span class="c1">// @dynamic m_nsRemindAttachId;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsShareOpenUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsShareOpenUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsShareOriginUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsShareOriginUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsSourceDisplayname</span><span class="p">;</span> <span class="c1">// @dynamic m_nsSourceDisplayname;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsSourceUsername</span><span class="p">;</span> <span class="c1">// @dynamic m_nsSourceUsername;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsStatExtStr</span><span class="p">;</span> <span class="c1">// @dynamic m_nsStatExtStr;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsStreamVideoAdUxInfo</span><span class="p">;</span> <span class="c1">// @dynamic m_nsStreamVideoAdUxInfo;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsStreamVideoPublishId</span><span class="p">;</span> <span class="c1">// @dynamic m_nsStreamVideoPublishId;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsStreamVideoThumbUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsStreamVideoThumbUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsStreamVideoTitle</span><span class="p">;</span> <span class="c1">// @dynamic m_nsStreamVideoTitle;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsStreamVideoUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsStreamVideoUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsStreamVideoWebUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsStreamVideoWebUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsStreamVideoWording</span><span class="p">;</span> <span class="c1">// @dynamic m_nsStreamVideoWording;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsTemplateId</span><span class="p">;</span> <span class="c1">// @dynamic m_nsTemplateId;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsThumbImgUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsThumbImgUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsThumbUrl</span><span class="p">;</span> <span class="c1">// @dynamic m_nsThumbUrl;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_nsTitle</span><span class="p">;</span> <span class="c1">// @dynamic m_nsTitle;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">AppInnerJumpItem</span> <span class="o">*</span><span class="n">m_oAppInnerJumpItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oAppInnerJumpItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">AppProductItem</span> <span class="o">*</span><span class="n">m_oAppProductItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oAppProductItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">AppTVItem</span> <span class="o">*</span><span class="n">m_oAppTVItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oAppTVItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">WCCanvasPageItem</span> <span class="o">*</span><span class="n">m_oCanvasPageItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oCanvasPageItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">CardTicketItem</span> <span class="o">*</span><span class="n">m_oCardTicketItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oCardTicketItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">EmoticonSharedItem</span> <span class="o">*</span><span class="n">m_oEmoticonSharedItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oEmoticonSharedItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">EmotionDesignerSharedItem</span> <span class="o">*</span><span class="n">m_oEmotionDesignerSharedItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oEmotionDesignerSharedItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">EmotionPageSharedItem</span> <span class="o">*</span><span class="n">m_oEmotionPageSharedItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oEmotionPageSharedItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">HardWareItem</span> <span class="o">*</span><span class="n">m_oHardWareItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oHardWareItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">ImageInfo</span> <span class="o">*</span><span class="n">m_oImageInfo</span><span class="p">;</span> <span class="c1">// @dynamic m_oImageInfo;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">MallProductItem</span> <span class="o">*</span><span class="n">m_oMallProductItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oMallProductItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">MessageExpItem</span> <span class="o">*</span><span class="n">m_oMsgExpItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oMsgExpItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">PushMailWrap</span> <span class="o">*</span><span class="n">m_oPushMailWrap</span><span class="p">;</span> <span class="c1">// @dynamic m_oPushMailWrap;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">FavoritesItem</span> <span class="o">*</span><span class="n">m_oRecordItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oRecordItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">WAAppMsgItem</span> <span class="o">*</span><span class="n">m_oWAAppItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oWAAppItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">WCPayInfoItem</span> <span class="o">*</span><span class="n">m_oWCPayInfoItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oWCPayInfoItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">MMWCPushInfo</span> <span class="o">*</span><span class="n">m_oWebcachePushInfo</span><span class="p">;</span> <span class="c1">// @dynamic m_oWebcachePushInfo;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">iWatchAppMsgItem</span> <span class="o">*</span><span class="n">m_oiWatchMsgItem</span><span class="p">;</span> <span class="c1">// @dynamic m_oiWatchMsgItem;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_poiName</span><span class="p">;</span> <span class="c1">// @dynamic m_poiName;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_qrCode</span><span class="p">;</span> <span class="c1">// @dynamic m_qrCode;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">CMessageWrap</span> <span class="o">*</span><span class="n">m_refMessageWrap</span><span class="p">;</span> <span class="c1">// @dynamic m_refMessageWrap;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_scene</span><span class="p">;</span> <span class="c1">// @dynamic m_scene;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_sessionShowContent</span><span class="p">;</span> <span class="c1">// @dynamic m_sessionShowContent;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_showContent</span><span class="p">;</span> <span class="c1">// @dynamic m_showContent;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiApiSDKVersion</span><span class="p">;</span> <span class="c1">// @dynamic m_uiApiSDKVersion;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiAppContentAttributeBitSetFlag</span><span class="p">;</span> <span class="c1">// @dynamic m_uiAppContentAttributeBitSetFlag;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiAppDataSize</span><span class="p">;</span> <span class="c1">// @dynamic m_uiAppDataSize;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiAppExtShowType</span><span class="p">;</span> <span class="c1">// @dynamic m_uiAppExtShowType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiAppMsgInnerType</span><span class="p">;</span> <span class="c1">// @dynamic m_uiAppMsgInnerType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiAppVersion</span><span class="p">;</span> <span class="c1">// @dynamic m_uiAppVersion;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiCameraType</span><span class="p">;</span> <span class="c1">// @dynamic m_uiCameraType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">m_uiDownloadMode</span><span class="p">;</span> <span class="c1">// @dynamic m_uiDownloadMode;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiDownloadPercent</span><span class="p">;</span> <span class="c1">// @dynamic m_uiDownloadPercent;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiEmoticonHeight</span><span class="p">;</span> <span class="c1">// @dynamic m_uiEmoticonHeight;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiEmoticonType</span><span class="p">;</span> <span class="c1">// @dynamic m_uiEmoticonType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiEmoticonWidth</span><span class="p">;</span> <span class="c1">// @dynamic m_uiEmoticonWidth;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiEncryVer</span><span class="p">;</span> <span class="c1">// @dynamic m_uiEncryVer;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiGameContent</span><span class="p">;</span> <span class="c1">// @dynamic m_uiGameContent;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiGameType</span><span class="p">;</span> <span class="c1">// @dynamic m_uiGameType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiHDImgSize</span><span class="p">;</span> <span class="c1">// @dynamic m_uiHDImgSize;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiMsgThumbHeight</span><span class="p">;</span> <span class="c1">// @dynamic m_uiMsgThumbHeight;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiMsgThumbSize</span><span class="p">;</span> <span class="c1">// @dynamic m_uiMsgThumbSize;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiMsgThumbWidth</span><span class="p">;</span> <span class="c1">// @dynamic m_uiMsgThumbWidth;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiNormalImgSize</span><span class="p">;</span> <span class="c1">// @dynamic m_uiNormalImgSize;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiOriginFormat</span><span class="p">;</span> <span class="c1">// @dynamic m_uiOriginFormat;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiOriginMsgSvrId</span><span class="p">;</span> <span class="c1">// @dynamic m_uiOriginMsgSvrId;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">m_uiPlayMode</span><span class="p">;</span> <span class="c1">// @dynamic m_uiPlayMode;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiRemindAttachTotalLen</span><span class="p">;</span> <span class="c1">// @dynamic m_uiRemindAttachTotalLen;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiRemindFormat</span><span class="p">;</span> <span class="c1">// @dynamic m_uiRemindFormat;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiRemindId</span><span class="p">;</span> <span class="c1">// @dynamic m_uiRemindId;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiRemindTime</span><span class="p">;</span> <span class="c1">// @dynamic m_uiRemindTime;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiScene</span><span class="p">;</span> <span class="c1">// @dynamic m_uiScene;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiShowType</span><span class="p">;</span> <span class="c1">// @dynamic m_uiShowType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiStreamVideoTime</span><span class="p">;</span> <span class="c1">// @dynamic m_uiStreamVideoTime;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiUploadStatus</span><span class="p">;</span> <span class="c1">// @dynamic m_uiUploadStatus;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiVideoLen</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVideoLen;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiVideoOffset</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVideoOffset;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiVideoSource</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVideoSource;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiVideoTime</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVideoTime;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiVoiceCancelFlag</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVoiceCancelFlag;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiVoiceEndFlag</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVoiceEndFlag;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiVoiceFormat</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVoiceFormat;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiVoiceForwardFlag</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVoiceForwardFlag;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiVoiceTime</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVoiceTime;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiVoipInviteType</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVoipInviteType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">m_uiVoipRecvTime</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVoipRecvTime;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_uiVoipStatus</span><span class="p">;</span> <span class="c1">// @dynamic m_uiVoipStatus;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">retain</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">m_url</span><span class="p">;</span> <span class="c1">// @dynamic m_url;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">m_wordingType</span><span class="p">;</span> <span class="c1">// @dynamic m_wordingType;</span>
</span><span class="line"><span class="k">@property</span><span class="p">(</span><span class="n">readonly</span><span class="p">)</span> <span class="n">Class</span> <span class="n">superclass</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &quot;WeChatRedEnvelop.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="o">%</span><span class="n">hook</span> <span class="n">CMessageMgr</span>
</span><span class="line"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">AsyncOnAddMsg:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">msg</span> <span class="nl">MsgWrap:</span><span class="p">(</span><span class="n">CMessageWrap</span> <span class="o">*</span><span class="p">)</span><span class="n">wrap</span> <span class="p">{</span>
</span><span class="line">	<span class="o">%</span><span class="n">orig</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">	<span class="k">switch</span><span class="p">(</span><span class="n">wrap</span><span class="p">.</span><span class="n">m_uiMessageType</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">	<span class="k">case</span> <span class="mi">49</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// AppNode</span>
</span><span class="line">
</span><span class="line">		<span class="n">CContactMgr</span> <span class="o">*</span><span class="n">contactManager</span> <span class="o">=</span> <span class="p">[[</span><span class="n">objc_getClass</span><span class="p">(</span><span class="s">&quot;MMServiceCenter&quot;</span><span class="p">)</span> <span class="n">defaultCenter</span><span class="p">]</span> <span class="nl">getService:</span><span class="p">[</span><span class="n">objc_getClass</span><span class="p">(</span><span class="s">&quot;CContactMgr&quot;</span><span class="p">)</span> <span class="n">class</span><span class="p">]];</span>
</span><span class="line">		<span class="n">CContact</span> <span class="o">*</span><span class="n">selfContact</span> <span class="o">=</span> <span class="p">[</span><span class="n">contactManager</span> <span class="n">getSelfContact</span><span class="p">];</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">		<span class="k">if</span> <span class="p">([</span><span class="n">wrap</span><span class="p">.</span><span class="n">m_nsContent</span> <span class="nl">rangeOfString:</span><span class="s">@&quot;wxpay://&quot;</span><span class="p">].</span><span class="n">location</span> <span class="o">!=</span> <span class="n">NSNotFound</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 红包</span>
</span><span class="line">			<span class="k">if</span> <span class="p">([</span><span class="n">wrap</span><span class="p">.</span><span class="n">m_nsFromUsr</span> <span class="nl">rangeOfString:</span><span class="s">@&quot;@chatroom&quot;</span><span class="p">].</span><span class="n">location</span> <span class="o">!=</span> <span class="n">NSNotFound</span> <span class="o">||</span>
</span><span class="line">				<span class="p">([</span><span class="n">wrap</span><span class="p">.</span><span class="n">m_nsToUsr</span> <span class="nl">rangeOfString:</span><span class="s">@&quot;@chatroom&quot;</span><span class="p">].</span><span class="n">location</span> <span class="o">!=</span> <span class="n">NSNotFound</span><span class="p">))</span> <span class="p">{</span> <span class="c1">// 群组红包或群组里自己发的红包</span>
</span><span class="line">
</span><span class="line">				<span class="n">NSString</span> <span class="o">*</span><span class="n">nativeUrl</span> <span class="o">=</span> <span class="p">[[</span><span class="n">wrap</span> <span class="n">m_oWCPayInfoItem</span><span class="p">]</span> <span class="n">m_c2cNativeUrl</span><span class="p">];</span>
</span><span class="line">				<span class="n">nativeUrl</span> <span class="o">=</span> <span class="p">[</span><span class="n">nativeUrl</span> <span class="nl">substringFromIndex:</span><span class="p">[</span><span class="s">@&quot;wxpay://c2cbizmessagehandler/hongbao/receivehongbao?&quot;</span> <span class="n">length</span><span class="p">]];</span>
</span><span class="line">
</span><span class="line">				<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">nativeUrlDict</span> <span class="o">=</span> <span class="p">[</span><span class="o">%</span><span class="n">c</span><span class="p">(</span><span class="n">WCBizUtil</span><span class="p">)</span> <span class="nl">dictionaryWithDecodedComponets:</span><span class="n">nativeUrl</span> <span class="nl">separator:</span><span class="s">@&quot;&amp;&quot;</span><span class="p">];</span>
</span><span class="line">
</span><span class="line">				<span class="cm">/** 构造参数 */</span>
</span><span class="line">				<span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="err">@</span><span class="p">{}</span> <span class="n">mutableCopy</span><span class="p">];</span>
</span><span class="line">				<span class="p">[</span><span class="n">params</span> <span class="nl">safeSetObject:</span><span class="n">nativeUrlDict</span><span class="p">[</span><span class="s">@&quot;msgtype&quot;</span><span class="p">]</span> <span class="nl">forKey:</span><span class="s">@&quot;msgType&quot;</span><span class="p">];</span>
</span><span class="line">				<span class="p">[</span><span class="n">params</span> <span class="nl">safeSetObject:</span><span class="n">nativeUrlDict</span><span class="p">[</span><span class="s">@&quot;sendid&quot;</span><span class="p">]</span> <span class="nl">forKey:</span><span class="s">@&quot;sendId&quot;</span><span class="p">];</span>
</span><span class="line">				<span class="p">[</span><span class="n">params</span> <span class="nl">safeSetObject:</span><span class="n">nativeUrlDict</span><span class="p">[</span><span class="s">@&quot;channelid&quot;</span><span class="p">]</span> <span class="nl">forKey:</span><span class="s">@&quot;channelId&quot;</span><span class="p">];</span>
</span><span class="line">				<span class="p">[</span><span class="n">params</span> <span class="nl">safeSetObject:</span><span class="p">[</span><span class="n">selfContact</span> <span class="n">getContactDisplayName</span><span class="p">]</span> <span class="nl">forKey:</span><span class="s">@&quot;nickName&quot;</span><span class="p">];</span>
</span><span class="line">				<span class="p">[</span><span class="n">params</span> <span class="nl">safeSetObject:</span><span class="p">[</span><span class="n">selfContact</span> <span class="n">m_nsHeadImgUrl</span><span class="p">]</span> <span class="nl">forKey:</span><span class="s">@&quot;headImg&quot;</span><span class="p">];</span>
</span><span class="line">				<span class="p">[</span><span class="n">params</span> <span class="nl">safeSetObject:</span><span class="p">[[</span><span class="n">wrap</span> <span class="n">m_oWCPayInfoItem</span><span class="p">]</span> <span class="n">m_c2cNativeUrl</span><span class="p">]</span> <span class="nl">forKey:</span><span class="s">@&quot;nativeUrl&quot;</span><span class="p">];</span>
</span><span class="line">				<span class="p">[</span><span class="n">params</span> <span class="nl">safeSetObject:</span><span class="n">wrap</span><span class="p">.</span><span class="n">m_nsFromUsr</span> <span class="nl">forKey:</span><span class="s">@&quot;sessionUserName&quot;</span><span class="p">];</span>
</span><span class="line">
</span><span class="line">				<span class="n">WCRedEnvelopesLogicMgr</span> <span class="o">*</span><span class="n">logicMgr</span> <span class="o">=</span> <span class="p">[[</span><span class="n">objc_getClass</span><span class="p">(</span><span class="s">&quot;MMServiceCenter&quot;</span><span class="p">)</span> <span class="n">defaultCenter</span><span class="p">]</span> <span class="nl">getService:</span><span class="p">[</span><span class="n">objc_getClass</span><span class="p">(</span><span class="s">&quot;WCRedEnvelopesLogicMgr&quot;</span><span class="p">)</span> <span class="n">class</span><span class="p">]];</span>
</span><span class="line">				<span class="p">[</span><span class="n">logicMgr</span> <span class="nl">OpenRedEnvelopesRequest:</span><span class="n">params</span><span class="p">];</span>
</span><span class="line">			<span class="p">}</span>
</span><span class="line">		<span class="p">}</span>
</span><span class="line">		<span class="k">break</span><span class="p">;</span>
</span><span class="line">	<span class="p">}</span>
</span><span class="line">	<span class="k">default</span><span class="o">:</span>
</span><span class="line">		<span class="k">break</span><span class="p">;</span>
</span><span class="line">	<span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="o">%</span><span class="n">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>

<hr />

<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[面向对象之数据抽象]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/10/14/mian-xiang-dui-xiang-zhi-shu-ju-chou-xiang/"/>
    <updated>2016-10-14T16:33:04+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/10/14/mian-xiang-dui-xiang-zhi-shu-ju-chou-xiang</id>
    <content type="html"><![CDATA[<h3 id="oo-programming">OO Programming</h3>
<p>Java中的编程主要基于构建数据类型。 这种编程风格被称为面向对象编程，因为它围绕着对象的概念，对象是一个保存数据类型值的实体。 对于Java的原始类型，我们主要局限于对数字进行操作的程序，但是对于引用类型，我们可以编写操作字符串，图片，声音或者在Java标准库中或在我们的书站上可用的数百个其他抽象中的任何一个 。 比预定义数据类型的库更重要的是，Java编程中可用的数据类型范围是开放式的，因为您可以定义自己的数据类型。
1. 数据类型。 数据类型是一组值和一组对这些值的操作。
2. 抽象数据类型。 抽象数据类型是其内部表示对客户端隐藏的数据类型。
3. 对象。 对象是可以接受数据类型值的实体。 对象的特征在于三个基本属性：对象的状态是来自其数据类型的值; 对象的身份将一个对象与另一个对象区分开; 对象的行为是数据类型操作的影响。 在Java中，引用是访问对象的机制。
4. 应用程序编程接口（API）。 为了指定抽象数据类型的行为，我们使用一个应用程序编程接口（API），它是构造函数和实例方法（操作）的列表，并对每个函数的效果进行非正式描述，如本计数器的API一样：
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogrithms_1.2_counter-api.png" /><br />
5. 客户。 客户端是使用数据类型的程序。
6. 实现。 实现是实现API中指定的数据类型的代码。</p>

<h3 id="section">使用抽象数据类型。</h3>
<p>客户端不需要知道数据类型是如何实现的，以便能够使用它。
1. 创建对象。 每个数据类型值存储在对象中。 要创建（或实例化）单个对象，我们使用关键字new调用构造函数。 每次客户端使用new时，系统为对象分配内存空间，初始化其值，并返回对对象的引用。
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogrithms_1.2_constructor.png" /><br />
2. 调用实例方法。 实例方法的目的是对数据类型值进行操作。 实例方法具有静态方法的所有属性：参数通过值传递，方法名称可以重载，它们可能具有返回值，并且它们可能导致副作用。 他们有一个额外的属性，表征他们：每个调用与一个对象相关联。
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogrithms_1.2_instance-method.png" /><br />
3. 使用对象。 声明给了我们可以在代码中使用的对象的变量名。 要使用给定的数据类型，我们：
	* 声明类型的变量，用于引用对象
  * 使用关键字new来调用创建类型对象的构造函数
  * 使用对象名称来调用实例方法，作为语句或表达式
例如，<a href="http://algs4.cs.princeton.edu/12oop/Flips.java.html">Flips.java</a>是一个<a href="http://algs4.cs.princeton.edu/12oop/Counter.java.html">Counter.java</a>客户端，它接受命令行参数T并模拟T硬币翻转。
4. 分配语句。 具有引用类型的赋值语句创建引用的副本（并且不创建新对象）。 这种情况称为别名：两个变量都指向相同的对象。 别名是Java程序中常见的错误来源，如以下示例所示：</p>
<p>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">Counter</span> <span class="n">c1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Counter</span><span class="o">(</span><span class="s">&quot;ones&quot;</span><span class="o">);</span>
</span><span class="line"><span class="n">c1</span><span class="o">.</span><span class="na">increment</span><span class="o">();</span>
</span><span class="line"><span class="n">Counter</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">c1</span><span class="o">;</span>
</span><span class="line"><span class="n">c2</span><span class="o">.</span><span class="na">increment</span><span class="o">();</span>
</span><span class="line"><span class="n">StdOut</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c1</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<p>代码打印字符串“2 ones”。</p>
<hr />

<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[算法之程序模型]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/10/13/suan-fa-zhi-cheng-xu-mo-xing/"/>
    <updated>2016-10-13T20:41:28+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/10/13/suan-fa-zhi-cheng-xu-mo-xing</id>
    <content type="html"><![CDATA[<p>
我们对算法的研究是基于将它们实现为用Java编程语言编写的程序。 我们这样做有几个原因：
<ul>
<li> 我们的程序是简洁，优雅，完整的算法描述。</li>
<li> 您可以运行程序来研究算法的属性。</li>
<li> 您可以立即在应用程序中使用算法。</li>
</ul>
</p>
<p>
<h2>原始数据类型和表达式</h2> <em>数据类型</em> 是一组值和一组对这些值的操作。以下四种基本数据类型是Java语言的基础：
<ul>
<li>整数，带算术运算（int）</li>
<li>实数，再次与算术运算(<tt>double</tt>)</li>
<li>布尔值，带有逻辑运算符的值{true，false}的集合（布尔）</li>
<li>字符，您键入的字母数字字符和符号（char）</li>
</ul>
Java程序操作以标识符命名的变量。 每个变量与数据类型相关联，并存储允许的数据类型值之一。 我们使用表达式来应用与每个类型相关联的操作。
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogorithms_1.1_building-blocks.png" />
<br />下表总结了对于Java的int，double，boolean和char数据类型的值的集合和最常见的操作。
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogorithms_1.1_primitive.png" />
<ul>
<li>表达式。 典型的表达式是中缀。 当表达式包含多个运算符时，优先级顺序指定它们的应用顺序：运算符*和/（和％）的优先级高于（应用于）+和 - 运算符; 在逻辑运算符之间！ 是最高优先级，后跟&amp;&amp;和然后||。 通常，相同优先级的运算符是左关联的（从左到右应用）。 您可以使用括号来覆盖这些规则。</li>
<li>类型转换。 如果没有丢失信息，则数字将自动提升为更具包容性的类型。例如，在表达式1 + 2.5中，1被提升为双精度值1.0，表达式的值为双精度值3.5。 转换是将一个类型的值转换为另一个类型的值的指令。 例如（int）3.7是3.将double转换为int将截断到零。</li>
<li>比较。 以下混合类型运算符比较相同类型的两个值并生成布尔值：
<ul>
<li>相等 (==)</li>
<li>不等 (!=)</li>
<li>小于 (&lt;)</li>
<li><em>小于等于</em> (&lt;=)</li>
<li><em>大于</em> (&gt;)</li>
<li><em>大于等于</em> (&gt;=)</li>
</ul></li>
<li>其他原语类型。
Java的int有一个32位的表示; Java的double类型具有64位表示。 Java有五种额外的原始数据类型：
<ul>
<li>64位整数，带算术运算（长整型）</li>
<li>16位整数，带算术运算（短）</li>
<li>16位字符，带算术运算（char）</li>
<li>8位整数，带算术运算（字节）</li>
<li>32位单精度实数，带算术运算（float）</li>
</ul></li>
</ul>
<br />
</p>
<!--more-->
<p><h2>语句</h2>Java程序由语句组成，语句通过创建和操作变量，为其分配数据类型值以及控制这些操作的执行流程来定义计算。
<ul>
<li>声明创建指定类型的变量，并用标识符命名它们。 Java是一种强类型语言，因为Java编译器检查一致性。 变量的范围是定义它的程序的一部分。</li>
<li>分配将数据类型值（由表达式定义）与变量关联。</li>
<li>初始化声明将声明与赋值相结合，以便在声明变量的同时初始化变量。</li>
<li>隐式分配。 当我们的目的是修改变量相对于当前值的值时，可以使用以下快捷键：
<ul>
<li>递增/递减运算符：代码i ++是i = i + 1的缩写。除了表达式值是在递增/递减之后，而不是之前，代码++ i是相同的。</li>
<li>其他复合运算符：代码i / = 2是i = i / 2的缩写。</li>
</ul></li>
<li>条件提供了执行流程的简单改变 - 根据指定的条件，在两个块中的一个块中执行语句。</li>
<li>循环提供了执行流程中更深刻的变化 - 只要给定条件为真，就执行块中的语句。 我们将循环中的块中的语句称为循环体。</li>
<li>break和continue。 Java支持在while循环中使用两个附加语句：
<ul>
<li>break语句，它立即退出循环</li>
<li>continue语句，它立即开始循环的下一次迭代</li>
</ul></li>
<li>符号。 许多循环遵循这个方案：将索引变量初始化为某个值，然后使用while循环测试涉及索引变量的循环继续条件，其中while循环中的最后一个语句增加索引变量。 你可以用Java的表示法来表达这样的循环。</li>
<li>单语句块。 如果条件或循环中的语句块只有一个语句，则可以省略花括号。</li>
</ul>
下表说明了不同种类的Java语句。
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogorithms_1.1_statements.png" />
</p>
<p>
<h2>数组。</h2> 数组存储所有相同类型的值序列。 如果我们有N个值，我们可以使用符号a [i]来指代从0到N-1的i的任何值的第i个值。
<ul>
<li>创建和初始化数组。 在Java程序中创建数组涉及三个不同的步骤：
<ul>
<li>声明数组的类型和名称</li>
<li>创建数组</li>
<li>初始化数组的值</li>
</ul></li>
<li>默认数组初始化。 对于代码更简洁，我们经常利用Java的默认数组初始化约定，并将所有三个步骤组合成一个语句。 对于数字类型，默认初始值为零，对于类型布尔值为false。</li>
<li>初始化声明。 我们可以在编译时指定初始化值，方法是在花括号之间列出文字值，用逗号分隔。</li>
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogorithms_1.1_array.png" />
<li>使用数组。 一旦我们创建一个数组，它的大小是固定的。 程序可以使用代码a.length引用数组a []的长度。 Java执行自动边界检查 - 如果你访问一个非法索引的数组，你的程序将终止ArrayIndexOutOfBoundsException。</li>
<li>别名。 数组名称引用整个数组 - 如果我们将一个数组名称指定给另一个数组名称，那么它们都引用相同的数组，如下面的代码片段所示。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kt">int</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">N</span><span class="o">];</span>
</span><span class="line"><span class="o">...</span>
</span><span class="line"><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1234</span><span class="o">;</span>
</span><span class="line"><span class="o">...</span>
</span><span class="line"><span class="kt">int</span><span class="o">[]</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
</span><span class="line"><span class="o">...</span>
</span><span class="line"><span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="mi">5678</span><span class="o">;</span>   <span class="c1">// a[i] is now 5678.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
这种情况被称为混叠，并且可能导致微妙的错误。</li>
<li>二维数组。 Java中的二维数组是一维数组的数组。 二维阵列可以是粗糙的（其阵列可以都具有不同的长度），但是我们最常使用（对于适当的参数M和N）M乘N的二维阵列。 为了引用二维数组a [] []的行i和列j中的条目，我们使用符号a [i] [j]。</li>
</ul>
</p>
<p>
<h2>静态方法。</h2> 静态方法在许多编程语言中被称为函数，因为它们可以表现得像数学函数。 每个静态方法是一系列语句，它们在调用静态方法时一个接一个执行。
<ul>
<li>定义静态方法。 方法封装被定义为语句序列的计算。 方法接受参数（给定数据类型的值），并计算一些数据类型的返回值或导致副作用。 每个静态方法由签名和主体组成。
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogorithms_1.1_static-method.png" /></li>
<li>调用静态方法。 对静态方法的调用是其名称，后跟表达式，指定括号中的参数值，用逗号分隔。 当一个方法被调用时，它的参数变量用调用中相应表达式的值初始化。 返回语句终止静态方法，将控制权返回给调用者。 如果静态方法是计算值，则必须在return语句中指定该值。</li>
<li>方法的属性。 Java方法具有以下特性：
<ul>
<li>参数通过值传递。 调用函数时，参数值将完全求值，并将结果值复制到参数变量中。 这称为值传递。 数组（和其他对象）引用也通过值传递：方法不能更改引用，但它可以更改数组中的条目（或对象的值）。</li>
<li>方法名称可以重载。 类中的方法可以具有相同的名称，只要它们具有不同的签名。 此功能称为重载。</li>
<li>方法具有单个返回值，但可能有多个返回语句。 Java方法只能提供一个返回值。 一旦达到第一个return语句，控制就返回调用程序。</li>
<li>一种方法可能有副作用。 方法可以使用关键字void作为其返回类型，以指示它没有返回值，并产生副作用（消耗输入，产生输出，改变数组中的条目，或以其它方式改变系统的状态）。</li>
</ul></li>
<li>递归。 递归方法是直接或间接调用自身的方法。 开发递归程序有三个重要的经验法则：
<ul>
<li>递归具有基本案例。</li>
<li>递归调用必须解决在某种意义上较小的子问题，因此递归调用会收敛到基本情况。</li>
<li>递归调用不应解决重叠的子问题。</li>
</ul></li>
<li>基本编程模型。 静态方法库是一组在Java类中定义的静态方法。 Java编程的基本模型是开发一个程序，通过创建一个静态方法库，其中一个名为main（），来解决特定的计算任务。</li>
<li>模块化编程。 静态方法的库允许模块化编程，其中一个库中的静态方法可以调用其他库中定义的静态方法。 这种方法有许多重要的优点。
<ul>
<li>使用合理大小的模块</li>
<li>共享和重用代码，而不必重新实现它</li>
<li>替代改进的实现</li>
<li>为解决编程问题开发适当的抽象模型</li>
<li>本地化调试</li>
</ul></li>
<li>单元测试。 Java编程的最佳实践是在每个测试库中的方法的静态方法库中包含一个main（）。</li>
<li>外部库。 我们使用来自四种不同类型库的静态方法，每种都需要（略）不同的代码重用程序。</li>
<ul>
<li>java.lang中的标准系统库，包括java.lang.Math，java.lang.Integer和java.lang.Double。</li>
<li>导入的系统库，如java.util.Arrays。 在程序开始时需要一个import语句来使用这样的库。</li>
<li>我们开发用的标准库。 要使用这样的程序，请将源码下载到您的工作目录中，或按照<a href="http://algs4.cs.princeton.edu/code">以下说明</a>将<a href="http://algs4.cs.princeton.edu/code/stdlib.jar">stdlib.jar</a>添加到类路径中。</li>
</ul>
要从另一个库调用方法，我们将库名称作为每个调用的方法名称的前缀：Math.sqrt（），Arrays.sort（），BinarySearch.rank（）和StdIn.readInt（）。
</ul>
</p>
<p>
<h2>字符串</h2>
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogorithms_1.1_string.png" />
<ul>
<li>串联</li>
<li>转换</li>
<li>自动转换。</li>
<li>命令行参数。</li>
</ul>
</p>

<p>
输入与输出
<ul>
<li>命令和参数。
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogorithms_1.1_command.png" /></li>
<li>标准输出</li>
<li>格式化输出
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogorithms_1.1_printf.png" /></li>
<li>标准输入</li>
<li>重定向和管道。
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogorithms_1.1_redirect.png" /></li>
<li>从文件输入和输出。</li>
<li>标准绘图</li>
</ul>
</p>
<p>
<h2>二进制搜索。</h2> 下面是一个完整的Java程序<a href="http://algs4.cs.princeton.edu/11model/BinarySearch.java.html">BinarySearch.java</a>，它说明了我们的编程模型的许多基本特性。 它实现了一种称为二进制搜索的经典算法，并针对称为白名单过滤的应用程序对其进行测试。
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogorithms_1.1_binary-search-anatomy.png" />
<br />
静态方法rank（）使用整数键和int值的排序数组作为参数，并返回键的索引（如果它存在于数组中），否则为-1。 它通过维护变量lo和hi来完成这个任务，使得如果在数组中，则密钥在[lo..hi]中，然后进入测试间隔中的中间条目（在索引mid）的循环。 如果键等于[mid]，返回值为mid; 否则，该方法将大约一半的间隔大小，如果该键小于a [mid]，则查看左半部分，如果该键大于[mid]，则查看右半部分。 当找到键或间隔为空时，进程终止。
<br /><img src="http://ITMonkeyLife.github.io/Blog/images/algorithms/alogorithms_1.1_binary-search.png" />
<ul>
<li>开发客户端</li>
<li>白名单</li>
<li>性能</li>
</ul>
</p>

<p>
输入和输出库。 这里是一个输入和输出库的列表.

<table>
  <tr>
  <th><b /></th>
  <th><b>程序</b></th>
  <th><b>描述 / JAVA文档</b></th>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#1.5">1.5</a></td>
  <td><a title="read numbers and text from standard input" href="http://algs4.cs.princeton.edu/stdlib/StdIn.java.html">StdIn.java</a></td>
  <td><a title="read numbers and text from standard input" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdIn.html">从标准输入读取数字和文本</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#1.5">1.5</a></td>
  <td><a title="write numbers and text to standard output" href="http://algs4.cs.princeton.edu/stdlib/StdOut.java.html">StdOut.java</a></td>
  <td><a title="write numbers and text to standard output" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdOut.html">将数字和文本写入标准输出</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#1.5">1.5</a></td>
  <td><a title="draw geometric shapes in a window" href="http://algs4.cs.princeton.edu/stdlib/StdDraw.java.html">StdDraw.java</a></td>
  <td><a title="draw geometric shapes in a window" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdDraw.html">在窗口中绘制几何形状</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#1.5">1.5</a></td>
  <td><a title="create, play, and manipulate sound" href="http://algs4.cs.princeton.edu/stdlib/StdAudio.java.html">StdAudio.java</a></td>
  <td><a title="create, play, and manipulate sound" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdAudio.html">创建，播放和操纵声音</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/22library/index.php#2.2">2.2</a></td>
  <td><a title="generate random numbers" href="http://algs4.cs.princeton.edu/stdlib/StdRandom.java.html">StdRandom.java</a></td>
  <td><a title="generate random numbers" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdRandom.html">生成随机数</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/22library/index.php#2.2">2.2</a></td>
  <td><a title="compute statistics" href="http://algs4.cs.princeton.edu/stdlib/StdStats.java.html">StdStats.java</a></td>
  <td><a title="compute statistics" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdStats.html">计算统计</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/22library/index.php#2.2">2.2</a></td>
  <td><a title="read and write 1D and 2D arrays" href="http://algs4.cs.princeton.edu/stdlib/StdArrayIO.java.html">StdArrayIO.java</a></td>
  <td><a title="read and write 1D and 2D arrays" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdArrayIO.html">读取和写入1D和2D阵列</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/31datatype/index.php#3.1">3.1</a></td>
  <td><a title="read numbers and text from files and URLs" href="http://algs4.cs.princeton.edu/stdlib/In.java.html">In.java</a></td>
  <td><a title="read numbers and text from files and URLs" href="http://algs4.cs.princeton.edu/stdlib/javadoc/In.html">从文件和URL读取数字和文本</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/31datatype/index.php#3.1">3.1</a></td>
  <td><a title="write numbers and text to files" href="http://algs4.cs.princeton.edu/stdlib/Out.java.html">Out.java</a></td>
  <td><a title="write numbers and text to files" href="http://algs4.cs.princeton.edu/stdlib/javadoc/Out.html">写数字和文本到文件</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/31datatype/index.php#3.1">3.1</a></td>
  <td><a title="draw geometric shapes" href="http://algs4.cs.princeton.edu/stdlib/Draw.java.html">Draw.java</a></td>
  <td><a title="draw geometric shapes" href="http://algs4.cs.princeton.edu/stdlib/javadoc/Draw.html">绘制几何形状</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/31datatype/index.php#3.1">3.1</a></td>
  <td><a title="process digital images" href="http://algs4.cs.princeton.edu/stdlib/Picture.java.html">Picture.java</a></td>
  <td><a title="process digital images" href="http://algs4.cs.princeton.edu/stdlib/javadoc/Picture.html">过程数字图像</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/32class/index.php#3.2">3.2</a></td>
  <td><a title="measure running time" href="http://algs4.cs.princeton.edu/stdlib/Stopwatch.java.html">Stopwatch.java</a></td>
  <td><a title="measure running time" href="http://algs4.cs.princeton.edu/stdlib/javadoc/Stopwatch.html">测量运行时间</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#-">-</a></td>
  <td><a title="write bits to standard output" href="http://algs4.cs.princeton.edu/stdlib/BinaryStdOut.java.html">BinaryStdOut.java</a></td>
  <td><a title="write bits to standard output" href="http://algs4.cs.princeton.edu/stdlib/javadoc/BinaryStdOut.html">写位到标准输出</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#-">-</a></td>
  <td><a title="read bits from files and URLs" href="http://algs4.cs.princeton.edu/stdlib/BinaryIn.java.html">BinaryIn.java</a></td>
  <td><a title="read bits from files and URLs" href="http://algs4.cs.princeton.edu/stdlib/javadoc/BinaryIn.html">从文件和URL读取位</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#-">-</a></td>
  <td><a title="write bits to files" href="http://algs4.cs.princeton.edu/stdlib/BinaryOut.java.html">BinaryOut.java</a></td>
  <td><a title="write bits to files" href="http://algs4.cs.princeton.edu/stdlib/javadoc/BinaryOut.html">写位到文件</a></td>
  </tr>
</table>

我们简要描述输入和输出库，并包括一个示例客户端。
</p>

<p>标准输入和标准输出。 <a href="http://algs4.cs.princeton.edu/11model/StdIn.java.html">StdIn.java</a>和<a href="http://algs4.cs.princeton.edu/11model/StdOut.java.html">StdOut.java</a>是用于从标准输入中读取数字和文本以及将数字和文本打印到标准输出的库。 我们的版本有一个比相应的Java接口更简单的接口（并提供一些技术改进）。 <a href="http://algs4.cs.princeton.edu/11model/RandomSeq.java.html">RandomSeq.java</a>生成给定范围内的随机数。 <a href="http://algs4.cs.princeton.edu/11model/Average.java.html">Average.java</a>从标准输入读取一系列实数，并在标准输出上打印它们的平均值。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="o">%</span> <span class="n">java</span> <span class="n">Average</span>
</span><span class="line"><span class="mf">10.0</span> <span class="mf">5.0</span> <span class="mf">6.0</span> <span class="mf">3.0</span> <span class="mf">7.0</span> <span class="mf">32.0</span>
</span><span class="line"><span class="mf">3.14</span> <span class="mf">6.67</span> <span class="mf">17.71</span>
</span><span class="line"><span class="o">&lt;</span><span class="n">Ctrl</span><span class="o">-</span><span class="n">d</span><span class="o">&gt;</span>
</span><span class="line"><span class="n">Average</span> <span class="n">is</span> <span class="mf">10.05777777777778</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<a href="http://algs4.cs.princeton.edu/11model/In.java.html">In.java</a>和<a href="http://algs4.cs.princeton.edu/11model/Out.java.html">Out.java</a>是面向对象的版本，支持多个输入和输出流，包括从文件或URL读取和写入文件。
</p>

<p>
标准绘制。 <a href="http://algs4.cs.princeton.edu/11model/StdDraw.java.html">StdDraw.java</a>是一个易于使用的库，用于绘制几何形状，如点，线和圆。 <a href="http://algs4.cs.princeton.edu/11model/RightTriangle.java.html">RightTriangle.java</a>绘制一个直角三角形和一个外接圆。
<a href="http://algs4.cs.princeton.edu/11model/Draw.java.html">Draw.java</a>是一个面向对象的版本，支持在多个窗口中绘制。
</p>
<p>
标准音频。 <a href="http://algs4.cs.princeton.edu/11model/StdAudio.java.html">StdAudio.java</a>是一个易于使用的库合成声音。 <a href="http://algs4.cs.princeton.edu/11model/Tone.java.html">Tone.java</a>从命令行读取频率和持续时间，并且在给定持续时间内声化给定频率的正弦波。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="o">%</span> <span class="n">java</span> <span class="n">Tone</span> <span class="mf">440.0</span> <span class="mf">3.0</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>

<p>
图像处理。 <a href="http://algs4.cs.princeton.edu/11model/Picture.java.html">Picture.java</a>是一个易于使用的图像处理库。 <a href="http://algs4.cs.princeton.edu/11model/Scale.java.html">Scale.java</a>使用图片文件的名称和两个整数（width w和height h）作为命令行参数，并将图像缩放为w-by-h。
</p>

<hr />

<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[音乐乐理:音调和记号]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/09/18/yin-le-le-li-yin-diao-he-ji-hao/"/>
    <updated>2016-09-18T17:47:43+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/09/18/yin-le-le-li-yin-diao-he-ji-hao</id>
    <content type="html"><![CDATA[<div id="static">
<ul>
<li> 半步（或&#8221;半音&#8221;）是从键盘到下一个相邻的键上一个键之间的距离。
<li> 键1到键2是一半的音，因为它们是彼此相邻。
<li> 半步并不总是从白键到黑键。
<li> 在这个例子中，键1和键2仍然彼此相邻。
<li> 一个完整的全音（或&#8221;全音&#8221;或简称&#8217;音&#8221;）是相同的距离，两个半音。
<li> 键1到键3是一个整体的音。
<li> 键1到键2是第一半步。 2键是键3的第二半步。
<li> 一个偶然的是用来提高或降低音符的音高的标志。
<li> 我们将讨论的第一个记号是平的和尖锐。
<li> 平半步降低了一个音调，而锐半步提出了一个音调。
<li> 键入时，您可以使用＃来代表尖锐，A B来代表一个单位。
<li> 让我们来看看在C和D之间的黑键
<li> 此键可称为C＃，因为它首先是C.半步
<li> 它也可以被称为Db，因为它低于D.半步
<li> 另一个例子是E和F
<li> E也可以被称为Fb的，因为它低于F.半步
<li> 同样，F可称为E＃。
<li> 每当有一定间距有多个名字，它被称为等音拼写。
<li> 接下来，让我们讨论双平板和双锐利。
<li> 虽然平滑和尖锐半步，双平双锐利的改变的说明一整步改变一个音符。
<li> 打字时，您可以使用x要代表一个双锐利和bb表示double持平。
<li> 例如，D和Ebb具有相同的间距，因为你可以从E去整个音步长（或两个半台阶）往下到达D
<li> D也可以听起来一样Cx，因为它是上述C的整个步长
<li> 最后，自然消除了任何意外，并返回一个音符到原来的白键。
<li> 我们将在即将到来的课程了解更多关于本位音。


<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[音乐乐理:增强点和持续音]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/09/08/yin-le-le-li-dian-he-lian-xian/"/>
    <updated>2016-09-08T16:56:40+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/09/08/yin-le-le-li-dian-he-lian-xian</id>
    <content type="html"><![CDATA[<div id="static">
<ul>
<li> 增强点和持续音的关系有两种类型来改变一个音符的时间标记。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson14_20.png" />
<li> 一个点了一大半增加持续时间。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson14_40.png" />
<li> 由于八分音符的四分音符的1/2时间，我们将用它替换了1/2个符号。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson14_60.png" />
<li> 正如你所看到的，一个点四分音符等于四分音符加上八分音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson14_80.png" />
<li> 一个点四分音符也可以等于3八分音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson14_100.png" />
<li> 连线持续合并相同间距的多个音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson14_120.png" />
<li> 它们被用来让穿过屏障（如本例中的音节）的音符，声音的持续时间。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson14_140.png" />
<li> 第四和第五音符现在合并在一起。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson14_160.png" />
<li> 如果音节分隔线都没有了，我们可以写一个半音符来代替。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson14_180.png" /><br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson14_200.png" />
<li> 使用此图表参考增强点。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson14_220.png" /><br />完整的流程如下: <br />
<embed src="http://ITMonkeyLife.github.io/Blog/videos/lesson14.swf" width="800" height="380" type="application/x-shockwave-flash" />


<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</li></li></li></li></li></li></li></li></li></li></ul></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[音乐乐理:休止符]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/09/08/yin-le-le-li-xiu-zhi-fu/"/>
    <updated>2016-09-08T14:55:44+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/09/08/yin-le-le-li-xiu-zhi-fu</id>
    <content type="html"><![CDATA[<div id="static">
<ul>
<li>休止符标示在一个音节中沉默的时期。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_20.png" />
<li>每种类型的休止符对应的同等类型的音符的持续时间。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_40.png" />
<li>例如:这两个四分之一休止符和四分音符占用的时间是相同的。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_60.png" /><br />当音符发出声音时，休止符是沉默的。
<li>为了证明这一点，让我们填写4/4时间的音节与四分音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_80.png" /><br />当弹奏时，所有的音符都发出声音。
<li>接下来，我们替换第二个音符为休止符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_100.png" /><br />当弹奏时，第二个没有声音。
<li>接下来，我们讨论其他类型的休止符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_120.png" />
<li>一个全休止符占据的时间是相同的全音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_140.png" />
<li>它被画成一个盒子从第四条五线谱向下。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_160.png" />
<li>半休止符占有时间等同数量的一半音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_180.png" />
<li>它被画成一个盒子从中间线的五线谱升起。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_200.png" />
<li>像音符，休止符可以有标志。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_220.png" />
<li>与一个标志，八分休止符具有相同的持续时间作为一个八分音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_240.png" />
<li>有两个标志，十六休止符有相同的时间为十六分音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_260.png" />
<li>尽管罕见，休止符可以有三个或更多个标志。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_280.png" />
<li>使用此图表，以供参考休止符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson13_281.png" /> 


<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[音乐乐理:标准音与节拍]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/09/07/yin-le-le-li-biao-zhun-yin-yu-jie-pai/"/>
    <updated>2016-09-07T16:44:14+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/09/07/yin-le-le-li-biao-zhun-yin-yu-jie-pai</id>
    <content type="html"><![CDATA[<div id="static">
<ul>
<li> 垂直的黑线将切分五线谱。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson12_20@2x.png" />
<li> 五线谱划分两个音符区。 <br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson12_40@2x.png" />
<li> 节拍定义了每个区包含的不同种类的音符。
<li> 第一个区的节拍是 4/4 第二个区的节拍是 3/4 。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson12_60@2x.png" />
<li> 第一区 (4/4) 包含四个四分音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson12_80@2x.png" />
<li> 第二区(3/4) 包含三个四分音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson12_100@2x.png" />
<li> 接下来，我们将讨论非四分音符节拍。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson12_120@2x.png" />
<li> 6/8 包含了六个八分音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson12_140@2x.png" />
<li> 3/2 包含三个半音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson12_160@2x.png" />
<li> 该图表显示了所有我们讨论的节拍。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson12_161@2x.png" />


<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</li></li></li></li></li></li></li></li></li></li></ul></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[音乐乐理:音符持续时间]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/09/06/yin-le-le-li-yin-fu-chi-xu-shi-jian/"/>
    <updated>2016-09-06T16:12:20+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/09/06/yin-le-le-li-yin-fu-chi-xu-shi-jian</id>
    <content type="html"><![CDATA[<div id="static">
<ul>
<li> 一个音符演奏的时间长度被称为它的音符时值，它是由音符的类型决定。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_20@2x.png" />
<li> 该全音符在现代音乐最长的音符时值。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_40@2x.png" />
<li> 二分音符具有全音符的一半的持续时间。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_60@2x.png" />
<li> 两个半音符占据的时间相同为一体的全音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_80@2x.png" />
<li> 四分音符为全音符的第四（或四分之一）。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_100@2x.png" />
<li> 四个四分音符占据的时间相同为一体的全音符。两个四分音符等于一个半音符的持续时间。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_120@2x.png" />
<li> 注意到，在持续时间小于四分音符有标志。每个标志减半音符的价值。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_140@2x.png" />
<li> 八分音符有一个标志。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_160@2x.png" />
<li> 因此，二个八分音符占用的时间相同数量的四分之一音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_180@2x.png" />
<li> 一个十六分音符有两个标志，再减半值。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_200@2x.png" />
<li> 两个十六分音符等于八分音符的持续时间。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_220@2x.png" />
<li> 四个十六分音符占据的时间相同数量的四分之一音符。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_240@2x.png" />
<li> 虽然可以有一个与三个或更多个标志音符，它们一般不使用。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_260@2x.png" />
<li> 该图表显示在本节讨论的所有五种音符类型的关系。<br /><img src="http://ITMonkeyLife.github.io/Blog/images/music/lesson11_261@2x.png" />


<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[音乐乐理:五线谱，谱号，加线]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/09/06/yin-le-le-li-wu-xian-pu-%2Cpu-hao-%2Cjia-xian/"/>
    <updated>2016-09-06T10:02:28+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/09/06/yin-le-le-li-wu-xian-pu-,pu-hao-,jia-xian</id>
    <content type="html"><![CDATA[<p>
<code>五线谱</code>是对音符绘制的基础。现代的五线谱是由5根线和4个空间组成的。
<br />
<img src="http://ww2.sinaimg.cn/large/626e5d69gw1f7jn3flan2j21kw0lcdh6.jpg" />
在五线谱上的每行线或者空白处都表示键盘上的白建。
<br />
</p>

<p>
谱号分配给各个音符某些行或空格。
两个谱号经常用到，分别是：高音和低音。
<br />
<img src="http://ww3.sinaimg.cn/large/626e5d69gw1f7jqbp0363j21kw0lcq4r.jpg" />
<br />
我们先讨论高音（通常也称为G 谱）.该谱号环绕（显示为红色）五线谱线被称为G.放在该行的任何音符变成G.
<br />
G调以上的空白处的调是A调（记住，没有一个“H”调）
<br />
A调以上的调是B调。以此类推，G、A、B、C、D、E、F、G
<br />
<img src="http://ww1.sinaimg.cn/large/626e5d69gw1f7jqd7qzk5j21kw0lcdi6.jpg" />
额我们看来已经超过了五线谱的范围了，这时候该怎么办？
</p>

<p>
加线将解决我们的困境。
我们在五线谱之外，额外添加一条线，然后在这个线处继续添加A
<br />
<img src="http://ww2.sinaimg.cn/large/626e5d69gw1f7jsx3rujij21kw0lcdi5.jpg" />
</p>
<!-- more -->
<p>
接下来，我们看看低音（也被称为F谱）
F谱是在这两个点之间的线上做的谱。
<br />
<img src="http://ww1.sinaimg.cn/large/626e5d69gw1f7jsz10y8bj21kw0lc0u3.jpg" />
我们把剩下的五线谱上的谱都标记出来。
<br />
<img src="http://ww2.sinaimg.cn/large/626e5d69gw1f7jsxovewdj21kw0lcjtl.jpg" />
</p>

<p>
最后我们来看看Grand Staff,五线谱基于原理组成的十一条线。消掉中间的线，变成两个五线谱。
<br />
<img src="http://ww4.sinaimg.cn/large/626e5d69gw1f7jtlgp82ej21kw0lcmzh.jpg" />
</p>

<p>
在上面的五线谱添加高音，下面的五线谱添加低音，我们能看到这两个五线谱的关系。
我们注意到这两个五线谱通过C谱连接在一起（红色展示）,在这里的C通常称中C,因为它对应于Grand Staff中间的线
</p>

<p>
下面是本小节完整的演示。
</p>
<p>
<video width="800" height="300" controls="controls" preload="auto">
 <source src="http://ITMonkeyLife.github.io/Blog/videos/lesson10.mp4" type="video/mp4" />
</video>
<!-- <embed src="http://www.musictheory.net/vc/6/0/53481700c244fded30bde8b5683ebc08f0eaafe6/lesson10.swf"
width="800" height="380"
type="application/x-shockwave-flash"> &#8211;>
</p>
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS 推送证书过期指南]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/09/05/ios-tui-song-zheng-shu-guo-qi-zhi-nan/"/>
    <updated>2016-09-05T12:30:46+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/09/05/ios-tui-song-zheng-shu-guo-qi-zhi-nan</id>
    <content type="html"><![CDATA[<p>  
今天一早，运维部门同事，说咱们友盟上面推送证书已经到期了。那么到期了证书应该怎么样去更换新的证书呢。
</p>
<p>
1、我们先去<a href="https://developer.apple.com/account/ios/certificate/distribution">苹果开发者中心</a>新建一个Certificates证书。
</p>
<p>
2、下载<code>Cert</code>文件到本地，双击之后。在<code>Keychain Access</code>中找到我们创建的证书。Export导出p12格式，创建密码。
</p>
<p>
3、有时候后端需要pem格式的证书,我们通过终端进入p12 文件所在的文件夹，通过终端输入下面的命令生成pem文件
<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class=""><span class="line">openssl pkcs12 -in dev_push_Certificates.p12 -out apns-dev-cert.pem -nodes -clcerts
</span><span class="line">Enter Import Password:
</span><span class="line">MAC verified OK</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<p>
4、生成证书后，只要替换Push证书就好了。
</p>
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS开发锦囊]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/08/29/ioskai-fa-jin-nang/"/>
    <updated>2016-08-29T15:44:35+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/08/29/ioskai-fa-jin-nang</id>
    <content type="html"><![CDATA[<p>
1、判断是不是AppStore版本
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isAppStoreEnvironment</span> <span class="p">{</span>
</span><span class="line"><span class="cp">#if TARGET_OS_IOS &amp;&amp; !TARGET_IPHONE_SIMULATOR</span>
</span><span class="line">    <span class="k">return</span> <span class="p">([[</span><span class="n">NSBundle</span> <span class="n">mainBundle</span><span class="p">]</span> <span class="nl">pathForResource:</span><span class="s">@&quot;embedded&quot;</span> <span class="nl">ofType:</span><span class="s">@&quot;mobileprovision&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">);</span>
</span><span class="line"><span class="cp">#endif</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">NO</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>
<p>
2、判断当前系统时区名称
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">+</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">currentSystemTimeZoneName</span> <span class="p">{</span>
</span><span class="line">    <span class="k">static</span> <span class="n">NSLock</span> <span class="o">*</span> <span class="n">methodLock</span><span class="p">;</span>
</span><span class="line">    <span class="k">static</span> <span class="n">dispatch_once_t</span> <span class="n">onceToken</span><span class="p">;</span>
</span><span class="line">    <span class="n">dispatch_once</span><span class="p">(</span><span class="o">&amp;</span><span class="n">onceToken</span><span class="p">,</span> <span class="o">^</span><span class="p">{</span>
</span><span class="line">        <span class="n">methodLock</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSLock</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class="line">    <span class="p">});</span>
</span><span class="line">
</span><span class="line">    <span class="p">[</span><span class="n">methodLock</span> <span class="n">lock</span><span class="p">];</span>
</span><span class="line">    <span class="p">[</span><span class="n">NSTimeZone</span> <span class="n">resetSystemTimeZone</span><span class="p">];</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span> <span class="n">systemTimeZoneName</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSTimeZone</span> <span class="n">systemTimeZone</span><span class="p">].</span><span class="n">name</span> <span class="n">copy</span><span class="p">];</span>
</span><span class="line">    <span class="p">[</span><span class="n">methodLock</span> <span class="n">unlock</span><span class="p">];</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">systemTimeZoneName</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>

<p>
3、安全的执行method
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cm">/**</span>
</span><span class="line"><span class="cm"> * Performs selector on the target, only if the target and selector are non-nil,</span>
</span><span class="line"><span class="cm"> * as well as target responds to selector</span>
</span><span class="line"><span class="cm"> */</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">safePerformSelector:</span><span class="p">(</span><span class="kt">SEL</span><span class="p">)</span><span class="nv">selector</span> <span class="nf">withTarget:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">target</span> <span class="nf">object:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">object</span> <span class="nf">object:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">anotherObject</span> <span class="p">{</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">target</span> <span class="o">==</span> <span class="nb">nil</span> <span class="o">||</span> <span class="n">selector</span> <span class="o">==</span> <span class="nb">nil</span> <span class="o">||</span> <span class="o">!</span><span class="p">[</span><span class="n">target</span> <span class="nl">respondsToSelector:</span><span class="n">selector</span><span class="p">])</span> <span class="p">{</span>
</span><span class="line">        <span class="k">return</span><span class="p">;</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="cp">#pragma clang diagnostic push</span>
</span><span class="line"><span class="cp">#pragma clang diagnostic ignored &quot;-Warc-performSelector-leaks&quot;</span>
</span><span class="line">    <span class="p">[</span><span class="n">target</span> <span class="nl">performSelector:</span><span class="n">selector</span> <span class="nl">withObject:</span><span class="n">object</span> <span class="nl">withObject:</span><span class="n">anotherObject</span><span class="p">];</span>
</span><span class="line"><span class="cp">#pragma clang diagnostic pop</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<p>
4、主线程执行
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">+</span> <span class="p">(</span><span class="n">CLLocationManager</span> <span class="o">*</span><span class="p">)</span><span class="nf">_newSystemLocationManager</span> <span class="p">{</span>
</span><span class="line">    <span class="n">__</span> <span class="n">block</span> <span class="n">CLLocationManager</span> <span class="o">*</span> <span class="n">manager</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// CLLocationManager should be created only on main thread, as it needs a run loop to serve delegate callbacks</span>
</span><span class="line">    <span class="n">dispatch_block_t</span> <span class="n">block</span> <span class="o">=</span> <span class="o">^</span><span class="p">{</span>
</span><span class="line">        <span class="n">manager</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CLLocationManager</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class="line">    <span class="p">};</span>
</span><span class="line">    <span class="k">if</span> <span class="p">([</span><span class="n">NSThread</span> <span class="n">currentThread</span><span class="p">].</span><span class="n">isMainThread</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">block</span><span class="p">();</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="n">dispatch_sync</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="n">block</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="k">return</span> <span class="n">manager</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>

<p>
5、添加Block
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">addBlockForCurrentLocation:</span><span class="p">(</span><span class="n">PFLocationManagerLocationUpdateBlock</span><span class="p">)</span><span class="nv">handler</span> <span class="p">{</span>
</span><span class="line">    <span class="k">@synchronized</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">blockSet</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">blockSet</span> <span class="nl">addObject:</span><span class="p">[</span><span class="n">handler</span> <span class="n">copy</span><span class="p">]];</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="c1">//</span>
</span><span class="line">    <span class="c1">// Abandon hope all ye who enter here.</span>
</span><span class="line">    <span class="c1">// Apparently, the CLLocationManager API is different for iOS/OSX/watchOS/tvOS up to the point,</span>
</span><span class="line">    <span class="c1">// where encapsulating pieces together just makes much more sense</span>
</span><span class="line">    <span class="c1">// than hard to human-parse compiled out pieces of the code.</span>
</span><span class="line">    <span class="c1">// This looks duplicated, slightly, but very much intentional.</span>
</span><span class="line">    <span class="c1">//</span>
</span><span class="line"><span class="cp">#if TARGET_OS_WATCH</span>
</span><span class="line">    <span class="k">if</span> <span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">bundle</span> <span class="nl">objectForInfoDictionaryKey:</span><span class="s">@&quot;NSLocationWhenInUseUsageDescription&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestWhenInUseAuthorization</span><span class="p">];</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestAlwaysAuthorization</span><span class="p">];</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestLocation</span><span class="p">];</span>
</span><span class="line"><span class="cp">#elif TARGET_OS_TV</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestWhenInUseAuthorization</span><span class="p">];</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestLocation</span><span class="p">];</span>
</span><span class="line"><span class="cp">#elif TARGET_OS_IOS</span>
</span><span class="line">    <span class="k">if</span> <span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="nl">respondsToSelector:</span><span class="k">@selector</span><span class="p">(</span><span class="n">requestAlwaysAuthorization</span><span class="p">)])</span> <span class="p">{</span>
</span><span class="line">        <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">application</span><span class="p">.</span><span class="n">applicationState</span> <span class="o">!=</span> <span class="n">UIApplicationStateBackground</span> <span class="o">&amp;&amp;</span>
</span><span class="line">            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">bundle</span> <span class="nl">objectForInfoDictionaryKey:</span><span class="s">@&quot;NSLocationWhenInUseUsageDescription&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestWhenInUseAuthorization</span><span class="p">];</span>
</span><span class="line">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestAlwaysAuthorization</span><span class="p">];</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">startUpdatingLocation</span><span class="p">];</span>
</span><span class="line"><span class="cp">#elif PF_TARGET_OS_OSX</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">startUpdatingLocation</span><span class="p">];</span>
</span><span class="line"><span class="cp">#endif</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>

<p>
6、安全执行线程
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>
</span><span class="line"><span class="k">extern</span> <span class="n">dispatch_queue_t</span> <span class="nf">JPThreadsafetyCreateQueueForObject</span><span class="p">(</span><span class="kt">id</span> <span class="n">object</span><span class="p">);</span>
</span><span class="line"><span class="k">extern</span> <span class="kt">void</span> <span class="nf">JPThreadsafetySafeDispatchSync</span><span class="p">(</span><span class="n">dispatch_queue_t</span> <span class="n">queue</span><span class="p">,</span> <span class="n">dispatch_block_t</span> <span class="n">block</span><span class="p">);</span>
</span><span class="line"><span class="cp">#define JPThreadSafetyPerform(queue, block) ({                      \</span>
</span><span class="line"><span class="cp">    __ block typeof((block())) result;                              \</span>
</span><span class="line"><span class="cp">    JPThreadsafetySafeDispatchSync(queue, ^{ result = block(); }); \</span>
</span><span class="line"><span class="cp">    result;                                                        \</span>
</span><span class="line"><span class="cp">})</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &quot;JPThreadsafety.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="k">static</span> <span class="kt">void</span> <span class="o">*</span><span class="k">const</span> <span class="n">JPThreadsafetyQueueIDKey</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">JPThreadsafetyQueueIDKey</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="n">dispatch_queue_t</span> <span class="nf">JPThreadsafetyCreateQueueForObject</span><span class="p">(</span><span class="kt">id</span> <span class="n">object</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="n">NSString</span><span class="o">*</span> <span class="n">label</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSStringFromClass</span><span class="p">([</span><span class="n">object</span> <span class="n">class</span><span class="p">])</span> <span class="nl">stringByAppendingString:</span><span class="s">@&quot;.synchronizationQueue&quot;</span><span class="p">];</span>
</span><span class="line">    <span class="n">dispatch_queue_t</span> <span class="n">queue</span> <span class="o">=</span> <span class="n">dispatch_queue_create</span><span class="p">(</span><span class="n">label</span><span class="p">.</span><span class="n">UTF8String</span><span class="p">,</span> <span class="n">DISPATCH_QUEUE_SERIAL</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="kt">void</span><span class="o">*</span> <span class="n">uuid</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">uuid</span><span class="p">));</span>
</span><span class="line">    <span class="n">dispatch_queue_set_specific</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">JPThreadsafetyQueueIDKey</span><span class="p">,</span> <span class="n">uuid</span><span class="p">,</span> <span class="n">free</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">queue</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="nf">JPThreadsafetySafeDispatchSync</span><span class="p">(</span><span class="n">dispatch_queue_t</span> <span class="n">queue</span><span class="p">,</span> <span class="n">dispatch_block_t</span> <span class="n">block</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="kt">void</span><span class="o">*</span> <span class="n">uuidMine</span> <span class="o">=</span> <span class="n">dispatch_get_specific</span><span class="p">(</span><span class="n">JPThreadsafetyQueueIDKey</span><span class="p">);</span>
</span><span class="line">    <span class="kt">void</span><span class="o">*</span> <span class="n">uuidOther</span> <span class="o">=</span> <span class="n">dispatch_queue_get_specific</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">JPThreadsafetyQueueIDKey</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">uuidMine</span> <span class="o">==</span> <span class="n">uuidOther</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">block</span><span class="p">();</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="n">dispatch_sync</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">block</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Method Swizzling]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/08/26/method-swizzling/"/>
    <updated>2016-08-26T09:43:31+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/08/26/method-swizzling</id>
    <content type="html"><![CDATA[<p>
在没有一个类的实现源码的情况下，想改变其中一个方法的实现，除了继承它重写、和借助类别重名方法暴力抢先之外，还有更加灵活的方法吗？在Objective-C编程中，如何实现hook呢？标题有点大，计划分几篇来总结。

本文主要介绍针对selector的hook，主角被标题剧透了———— Method Swizzling
</p>
<h2>Method Swizzling 原理</h2>
<p>在Objective-C中调用一个方法，其实是向一个对象发送消息，查找消息的唯一依据是selector的名字。利用Objective-C的动态特性，可以实现在运行时偷换selector对应的方法实现，达到给方法挂钩的目的。</p>
<p>每个类都有一个方法列表，存放着selector的名字和方法实现的映射关系。IMP有点类似函数指针，指向具体的Method实现。</p>
<p><img src="http://ww3.sinaimg.cn/large/626e5d69gw1f76wrdzvssj214y0dcmxy.jpg" /></p>
<p>
我们可以利用 method_exchangeImplementations 来交换2个方法中的IMP，

我们可以利用 class_replaceMethod 来修改类，

我们可以利用 method_setImplementation 来直接设置某个方法的IMP，
……
归根结底，都是偷换了selector的IMP，如下图所示：
</p>
<p><img src="http://ww2.sinaimg.cn/large/626e5d69gw1f76wshrop2j20kf09mt95.jpg" /></p>
<h2>Method Swizzling 实践</h2>
<p>

举个例子好了，我想钩一下NSArray的lastObject 方法，只需两个步骤。
第一步：给NSArray加一个我自己的lastObject
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &quot;NSArray+Swizzle.h&quot;  </span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">@implementation</span> <span class="nc">NSArray</span> <span class="nl">(Swizzle)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">myLastObject</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="kt">id</span> <span class="n">ret</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="n">myLastObject</span><span class="p">];</span>
</span><span class="line">    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;**********  myLastObject *********** &quot;</span><span class="p">);</span>
</span><span class="line">    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
乍一看，这不递归了么？别忘记这是我们准备调换IMP的selector，[self myLastObject] 将会执行真的 [self lastObject] 。
</p>
<p>
第二步：调换IMP
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &lt;objc/runtime.h&gt;  </span>
</span><span class="line"><span class="cp">#import &quot;NSArray+Swizzle.h&quot;  </span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="err">@</span><span class="n">autoreleasepool</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">        <span class="n">Method</span> <span class="n">ori_Method</span> <span class="o">=</span>  <span class="n">class_getInstanceMethod</span><span class="p">([</span><span class="n">NSArray</span> <span class="n">class</span><span class="p">],</span> <span class="k">@selector</span><span class="p">(</span><span class="n">lastObject</span><span class="p">));</span>
</span><span class="line">        <span class="n">Method</span> <span class="n">my_Method</span> <span class="o">=</span> <span class="n">class_getInstanceMethod</span><span class="p">([</span><span class="n">NSArray</span> <span class="n">class</span><span class="p">],</span> <span class="k">@selector</span><span class="p">(</span><span class="n">myLastObject</span><span class="p">));</span>
</span><span class="line">        <span class="n">method_exchangeImplementations</span><span class="p">(</span><span class="n">ori_Method</span><span class="p">,</span> <span class="n">my_Method</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">        <span class="n">NSArray</span><span class="o">*</span> <span class="n">array</span> <span class="o">=</span> <span class="err">@</span><span class="p">[</span><span class="s">@&quot;0&quot;</span><span class="p">,</span><span class="s">@&quot;1&quot;</span><span class="p">,</span><span class="s">@&quot;2&quot;</span><span class="p">,</span><span class="s">@&quot;3&quot;</span><span class="p">];</span>
</span><span class="line">        <span class="n">NSString</span><span class="o">*</span> <span class="n">string</span> <span class="o">=</span> <span class="p">[</span><span class="n">array</span> <span class="n">lastObject</span><span class="p">];</span>
</span><span class="line">        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;TEST RESULT : %@&quot;</span><span class="p">,</span><span class="n">string</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<!-- more -->
<p>
控制台输出Log：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="mi">2013</span><span class="o">-</span><span class="mo">07</span><span class="o">-</span><span class="mi">18</span> <span class="mi">16</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">12.585</span> <span class="n">Hook</span><span class="p">[</span><span class="mi">1740</span><span class="o">:</span><span class="n">c07</span><span class="p">]</span> <span class="o">**********</span>  <span class="n">myLastObject</span> <span class="o">***********</span>
</span><span class="line"><span class="mi">2013</span><span class="o">-</span><span class="mo">07</span><span class="o">-</span><span class="mi">18</span> <span class="mi">16</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">12.589</span> <span class="n">Hook</span><span class="p">[</span><span class="mi">1740</span><span class="o">:</span><span class="n">c07</span><span class="p">]</span> <span class="n">TEST</span> <span class="n">RESULT</span> <span class="o">:</span> <span class="mi">3</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<p>
结果很让人欣喜，是不是忍不住想给UIWebView的loadRequest: 加 TODO 了呢？
</p>
<h2>Method Swizzling 的封装</h2>
<p>之前在github上找到的RNSwizzle，推荐给大家，可以搜一下。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="c1">//  </span>
</span><span class="line"><span class="c1">//  RNSwizzle.m  </span>
</span><span class="line"><span class="c1">//  MethodSwizzle  </span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="cp">#import &quot;RNSwizzle.h&quot;  </span>
</span><span class="line"><span class="cp">#import &lt;objc/runtime.h&gt;  </span>
</span><span class="line"><span class="k">@implementation</span> <span class="nc">NSObject</span> <span class="nl">(RNSwizzle)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="n">IMP</span><span class="p">)</span><span class="nf">swizzleSelector:</span><span class="p">(</span><span class="kt">SEL</span><span class="p">)</span><span class="nv">origSelector</span>
</span><span class="line">               <span class="nf">withIMP:</span><span class="p">(</span><span class="n">IMP</span><span class="p">)</span><span class="nv">newIMP</span> <span class="p">{</span>
</span><span class="line">  <span class="n">Class</span> <span class="n">class</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="n">class</span><span class="p">];</span>
</span><span class="line">  <span class="n">Method</span> <span class="n">origMethod</span> <span class="o">=</span> <span class="n">class_getInstanceMethod</span><span class="p">(</span><span class="n">class</span><span class="p">,</span>
</span><span class="line">                                              <span class="n">origSelector</span><span class="p">);</span>
</span><span class="line">  <span class="n">IMP</span> <span class="n">origIMP</span> <span class="o">=</span> <span class="n">method_getImplementation</span><span class="p">(</span><span class="n">origMethod</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">class_addMethod</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">origSelector</span><span class="p">,</span> <span class="n">newIMP</span><span class="p">,</span>
</span><span class="line">                      <span class="n">method_getTypeEncoding</span><span class="p">(</span><span class="n">origMethod</span><span class="p">)))</span>
</span><span class="line">  <span class="p">{</span>
</span><span class="line">    <span class="n">method_setImplementation</span><span class="p">(</span><span class="n">origMethod</span><span class="p">,</span> <span class="n">newIMP</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="k">return</span> <span class="n">origIMP</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
<h2>Method Swizzling 危险不危险</h2>
<p>
针对这个问题，我在<a href="http://stackoverflow.com/questions/5339276/what-are-the-dangers-of-method-swizzling-in-objective-c">stackoverflow</a>上看到了满意的答案，这里翻译一下，总结记录在本文中，以示分享：


使用 Method Swizzling 编程就好比切菜时使用锋利的刀，一些人因为担心切到自己所以害怕锋利的刀具，可是事实上，使用钝刀往往更容易出事，而利刀更为安全。
Method swizzling 可以帮助我们写出更好的，更高效的，易维护的代码。但是如果滥用它，也将会导致难以排查的bug。
</p>
<h3>背景</h3>
<p>
好比设计模式，如果我们摸清了一个模式的门道，使用该模式与否我们自己心里有数。单例模式就是一个很好的例子，它饱受争议但是许多人依旧使用它。Method Swizzling也是一样，一旦你真正理解它的优势和弊端，使用它与否你应该就有你自己的观点。
</p>
<h3>讨论</h3>
<p>
这里是一些 Method Swizzling的陷阱：
Method swizzling is not atomic
Changes behavior of un-owned code
Possible naming conflicts
Swizzling changes the method arguments
The order of swizzles matters
Difficult to understand (looks recursive)
Difficult to debug
</p>
<p>我将逐一分析这些点，增进对Method Swizzling的理解的同时，并搞懂如何应对。</p>
<h4>Method swizzling is not atomic</h4>
<p>
我所见过的使用method swizzling实现的方法在并发使用时基本都是安全的。95%的情况里这都不会是个问题。通常你替换一个方法的实现，是希望它在整个程序的生命周期里有效的。也就是说，你会把 method swizzling 修改方法实现的操作放在一个加号方法 +(void)load里，并在应用程序的一开始就调用执行。你将不会碰到并发问题。假如你在 +(void)initialize初始化方法中进行swizzle，那么……rumtime可能死于一个诡异的状态。
</p>
<h4>Changes behavior of un-owned code</h4>
<p>
这是swizzling的一个问题。我们的目标是改变某些代码。swizzling方法是一件灰常灰常重要的事，当你不只是对一个NSButton类的实例进行了修改，而是程序中所有的NSButton实例。因此在swizzling时应该多加小心，但也不用总是去刻意避免。
</p>
<p>
想象一下，如果你重写了一个类的方法，而且没有调用父类的这个方法，这可能会引起问题。大多数情况下，父类方法期望会被调用（至少文档是这样说的）。如果你在swizzling实现中也这样做了，这会避免大部分问题。还是调用原始实现吧，如若不然，你会费很大力气去考虑代码的安全问题。
</p>
<h4>Possible naming conflicts</h4>
<p>
命名冲突贯穿整个Cocoa的问题. 我们常常在类名和类别方法名前加上前缀。不幸的是，命名冲突仍是个折磨。但是swizzling其实也不必过多考虑这个问题。我们只需要在原始方法命名前做小小的改动来命名就好，比如通常我们这样命名：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">@interface</span> <span class="nc">NSView</span> : <span class="nc">NSObject</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setFrame:</span><span class="p">(</span><span class="n">NSRect</span><span class="p">)</span><span class="nv">frame</span><span class="p">;</span>
</span><span class="line"><span class="k">@end</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">@implementation</span> <span class="nc">NSView</span> <span class="nl">(MyViewAdditions)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">my_setFrame:</span><span class="p">(</span><span class="n">NSRect</span><span class="p">)</span><span class="nv">frame</span> <span class="p">{</span>
</span><span class="line">    <span class="c1">// do custom work  </span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span> <span class="nl">my_setFrame:</span><span class="n">frame</span><span class="p">];</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">load</span> <span class="p">{</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span> <span class="nl">swizzle:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">setFrame:</span><span class="p">)</span> <span class="nl">with:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">my_setFrame:</span><span class="p">)];</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<p>
这段代码运行正确，但是如果my_setFrame: 在别处被定义了会发生什么呢？

</p>
<p>
这个问题不仅仅存在于swizzling，这里有一个替代的变通方法：

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">@implementation</span> <span class="nc">NSView</span> <span class="nl">(MyViewAdditions)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">static</span> <span class="kt">void</span> <span class="nf">MySetFrame</span><span class="p">(</span><span class="kt">id</span> <span class="n">self</span><span class="p">,</span> <span class="kt">SEL</span> <span class="n">_cmd</span><span class="p">,</span> <span class="n">NSRect</span> <span class="n">frame</span><span class="p">);</span>
</span><span class="line"><span class="k">static</span> <span class="nf">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">SetFrameIMP</span><span class="p">)(</span><span class="kt">id</span> <span class="n">self</span><span class="p">,</span> <span class="kt">SEL</span> <span class="n">_cmd</span><span class="p">,</span> <span class="n">NSRect</span> <span class="n">frame</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">static</span> <span class="kt">void</span> <span class="nf">MySetFrame</span><span class="p">(</span><span class="kt">id</span> <span class="n">self</span><span class="p">,</span> <span class="kt">SEL</span> <span class="n">_cmd</span><span class="p">,</span> <span class="n">NSRect</span> <span class="n">frame</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="c1">// do custom work  </span>
</span><span class="line">    <span class="n">SetFrameIMP</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">_cmd</span><span class="p">,</span> <span class="n">frame</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">load</span> <span class="p">{</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span> <span class="nl">swizzle:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">setFrame:</span><span class="p">)</span> <span class="nl">with:</span><span class="p">(</span><span class="n">IMP</span><span class="p">)</span><span class="n">MySetFrame</span> <span class="nl">store:</span><span class="p">(</span><span class="n">IMP</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">SetFrameIMP</span><span class="p">];</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
看起来不那么Objectice-C了（用了函数指针），这样避免了selector的命名冲突。

最后给出一个较完美的swizzle方法的定义：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">typedef</span> <span class="n">IMP</span> <span class="o">*</span><span class="n">IMPPointer</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="kt">BOOL</span> <span class="nf">class_swizzleMethodAndStore</span><span class="p">(</span><span class="n">Class</span> <span class="n">class</span><span class="p">,</span> <span class="kt">SEL</span> <span class="n">original</span><span class="p">,</span> <span class="n">IMP</span> <span class="n">replacement</span><span class="p">,</span> <span class="n">IMPPointer</span> <span class="n">store</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="n">IMP</span> <span class="n">imp</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class="line">    <span class="n">Method</span> <span class="n">method</span> <span class="o">=</span> <span class="n">class_getInstanceMethod</span><span class="p">(</span><span class="n">class</span><span class="p">,</span> <span class="n">original</span><span class="p">);</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">method</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">type</span> <span class="o">=</span> <span class="n">method_getTypeEncoding</span><span class="p">(</span><span class="n">method</span><span class="p">);</span>
</span><span class="line">        <span class="n">imp</span> <span class="o">=</span> <span class="n">class_replaceMethod</span><span class="p">(</span><span class="n">class</span><span class="p">,</span> <span class="n">original</span><span class="p">,</span> <span class="n">replacement</span><span class="p">,</span> <span class="n">type</span><span class="p">);</span>
</span><span class="line">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">imp</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">            <span class="n">imp</span> <span class="o">=</span> <span class="n">method_getImplementation</span><span class="p">(</span><span class="n">method</span><span class="p">);</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">imp</span> <span class="o">&amp;&amp;</span> <span class="n">store</span><span class="p">)</span> <span class="p">{</span> <span class="o">*</span> <span class="n">store</span> <span class="o">=</span> <span class="n">imp</span><span class="p">;</span> <span class="p">}</span>
</span><span class="line">    <span class="k">return</span> <span class="p">(</span><span class="n">imp</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">@implementation</span> <span class="nc">NSObject</span> <span class="nl">(FRRuntimeAdditions)</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">swizzle:</span><span class="p">(</span><span class="kt">SEL</span><span class="p">)</span><span class="nv">original</span> <span class="nf">with:</span><span class="p">(</span><span class="n">IMP</span><span class="p">)</span><span class="nv">replacement</span> <span class="nf">store:</span><span class="p">(</span><span class="n">IMPPointer</span><span class="p">)</span><span class="nv">store</span> <span class="p">{</span>
</span><span class="line">    <span class="k">return</span> <span class="n">class_swizzleMethodAndStore</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">original</span><span class="p">,</span> <span class="n">replacement</span><span class="p">,</span> <span class="n">store</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<h4>Swizzling changes the method&#8217;s arguments</h4>
<p>
我认为这是最大的问题。想正常调用method swizzling 将会是个问题。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="p">[</span><span class="n">self</span> <span class="nl">my_setFrame:</span><span class="n">frame</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
直接调用my_setFrame: ， runtime做的是
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="n">objc_msgSend</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="k">@selector</span><span class="p">(</span><span class="nl">my_setFrame:</span><span class="p">),</span> <span class="n">frame</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
runtime去寻找my_setFrame:的方法实现, _ cmd参数为 my_setFrame: ，但是事实上runtime找到的方法实现是原始的 setFrame: 的。
一个简单的解决办法：使用上面介绍的swizzling定义。
</p>
<h4>The order of swizzles matters</h4>
<p>
多个swizzle方法的执行顺序也需要注意。假设 setFrame: 只定义在NSView中，想像一下按照下面的顺序执行：
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="p">[</span><span class="n">NSButton</span> <span class="nl">swizzle:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">setFrame:</span><span class="p">)</span> <span class="nl">with:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">my_buttonSetFrame:</span><span class="p">)];</span>
</span><span class="line"><span class="p">[</span><span class="n">NSControl</span> <span class="nl">swizzle:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">setFrame:</span><span class="p">)</span> <span class="nl">with:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">my_controlSetFrame:</span><span class="p">)];</span>
</span><span class="line"><span class="p">[</span><span class="n">NSView</span> <span class="nl">swizzle:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">setFrame:</span><span class="p">)</span> <span class="nl">with:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">my_viewSetFrame:</span><span class="p">)];</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
What happens when the method on NSButton is swizzled? Well most swizzling will ensure that it&#8217;s not replacing the implementation of setFrame: for all views, so it will pull up the instance method. This will use the existing implementation to re-define setFrame: in the NSButton class so that exchanging implementations doesn&#8217;t affect all views. The existing implementation is the one defined on NSView. The same thing will happen when swizzling on NSControl (again using the NSView implementation).

When you call setFrame: on a button, it will therefore call your swizzled method, and then jump straight to the setFrame: method originally defined on NSView. The NSControl and NSView swizzled implementations will not be called.

But what if the order were:
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="p">[</span><span class="n">NSView</span> <span class="nl">swizzle:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">setFrame:</span><span class="p">)</span> <span class="nl">with:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">my_viewSetFrame:</span><span class="p">)];</span>
</span><span class="line"><span class="p">[</span><span class="n">NSControl</span> <span class="nl">swizzle:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">setFrame:</span><span class="p">)</span> <span class="nl">with:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">my_controlSetFrame:</span><span class="p">)];</span>
</span><span class="line"><span class="p">[</span><span class="n">NSButton</span> <span class="nl">swizzle:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">setFrame:</span><span class="p">)</span> <span class="nl">with:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">my_buttonSetFrame:</span><span class="p">)];</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
Since the view swizzling takes place first, the control swizzling will be able to pull up the right method. Likewise, since the control swizzling was before the button swizzling, the button will pull up the control&#8217;s swizzled implementation of setFrame:. This is a bit confusing, but this is the correct order. How can we ensure this order of things?

Again, just use load to swizzle things. If you swizzle in load and you only make changes to the class being loaded, you&#8217;ll be safe. The load method guarantees that the super class load method will be called before any subclasses. We&#8217;ll get the exact right order!
这段贴了原文，硬翻译太拗口……总结一下就是：多个有继承关系的类的对象swizzle时，先从父对象开始。 这样才能保证子类方法拿到父类中的被swizzle的实现。在+(void)load中swizzle不会出错，就是因为load类方法会默认从父类开始调用。
</p>
<h4>Difficult to understand (looks recursive)</h4>
<p>
（新方法的实现）看起来像递归，但是看看上面已经给出的 swizzling 封装方法, 使用起来就很易读懂.
这个问题是已完全解决的了！
</p>
<h4>Difficult to debug</h4>
<p>
debug时打出的backtrace，其中掺杂着被swizzle的方法名，一团糟啊！上面介绍的swizzle方案，使backtrace中打印出的方法名还是很清晰的。但仍然很难去debug，因为很难记住swizzling影响过什么。给你的代码写好文档（即使只有你一个人会看到）。养成一个好习惯，不会比调试多线程问题还难的。
</p>
<h2>结论</h2>
<p>
如果使用恰当，Method swizzling 还是很安全的.一个简单安全的方法是，仅在load中swizzle。 和许多其他东西一样，它也是有危险性的，但理解它了也就可以正确恰当的使用它了。
</p>

<hr />

<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[敏感逻辑的保护方案]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/08/25/min-gan-luo-ji-de-bao-hu-fang-an/"/>
    <updated>2016-08-25T15:13:53+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/08/25/min-gan-luo-ji-de-bao-hu-fang-an</id>
    <content type="html"><![CDATA[<div class="container">
<div class="item chapter">
    <h1 class="title"><span class="label">24</span> <span class="title">敏感逻辑的保护方案</span></h1>
    <p>Objective-C 代码容易被 hook，暴露信息太赤裸裸，为了安全，改用 C 来写吧！</p>

<div class="figure" id="figure-24-1">
    <img src="http://ww2.sinaimg.cn/large/626e5d69gw1f760k4kot8j205p04gdfu.jpg" />

    <p class="caption"><strong>图片 24.1</strong> sensitive1</p>
</div>


<p>当然不是全部代码都要 C 来写，我指的是敏感业务逻辑代码。</p>

<p>本文就介绍一种低学习成本的，简易的，Objective-C 逻辑代码重写为 C 代码的办法。</p>

<p>也许，程序中存在一个类似这样的类：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">@interface</span> <span class="nc">XXUtil</span> : <span class="nc">NSObject</span>
</span><span class="line">
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isVerified</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isNeedSomething</span><span class="p">;</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">resetPassword:</span><span class="p">(</span><span class="n">NSString</span><span class="o">*</span><span class="p">)</span><span class="nv">password</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>被 class-dump 出来后，利用 Cycript 很容易实现攻击，容易被 hook ，存在很大的安全隐患。</p>

<div class="figure" id="figure-24-2">
    <img src="http://ww2.sinaimg.cn/large/626e5d69gw1f760knfbzhj20350360sm.jpg" />

    <p class="caption"><strong>图片 24.2</strong> sensitive2</p>
</div>


<p>想改，但是不想大改程序结构，肿么办呢？</p>

<p>把函数名隐藏在结构体里，以函数指针成员的形式存储。
这样做的好处是，编译后，只留了下地址，去掉了名字和参数表，提高了逆向成本和攻击门槛。</p>

<p>改写的程序如下：</p>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="c1">//XXUtil.h  </span>
</span><span class="line"> <span class="err">#</span><span class="n">import</span> <span class="o">&lt;</span><span class="n">Foundation</span><span class="o">/</span><span class="n">Foundation</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
</span><span class="line">
</span><span class="line"><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_util</span> <span class="p">{</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="p">(</span><span class="o">*</span><span class="n">isVerified</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
</span><span class="line">    <span class="kt">BOOL</span> <span class="p">(</span><span class="o">*</span><span class="n">isNeedSomething</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
</span><span class="line">    <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">resetPassword</span><span class="p">)(</span><span class="n">NSString</span> <span class="o">*</span><span class="n">password</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span><span class="n">XXUtil_t</span> <span class="p">;</span>
</span><span class="line">
</span><span class="line"> <span class="err">#</span><span class="n">define</span> <span class="n">XXUtil</span> <span class="p">([</span><span class="n">_XXUtil</span> <span class="n">sharedUtil</span><span class="p">])</span>
</span><span class="line">
</span><span class="line"><span class="k">@interface</span> <span class="nc">_XXUtil</span> : <span class="nc">NSObject</span>
</span><span class="line">
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="n">XXUtil_t</span> <span class="o">*</span><span class="p">)</span><span class="nf">sharedUtil</span><span class="p">;</span>
</span><span class="line"><span class="k">@end</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="c1">//XXUtil.m  </span>
</span><span class="line"> <span class="err">#</span><span class="n">import</span> <span class="s">&quot;XXUtil.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="k">static</span> <span class="kt">BOOL</span> <span class="n">_isVerified</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="c1">//bala bala ...  </span>
</span><span class="line">    <span class="k">return</span> <span class="n">YES</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="k">static</span> <span class="kt">BOOL</span> <span class="n">_isNeedSomething</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="c1">//bala bala ...  </span>
</span><span class="line">    <span class="k">return</span> <span class="n">YES</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="k">static</span> <span class="kt">void</span> <span class="n">_resetPassword</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="n">password</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="c1">//bala bala ...  </span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="k">static</span> <span class="n">XXUtil_t</span> <span class="o">*</span> <span class="n">util</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class="line"><span class="k">@implementation</span> <span class="nc">_XXUtil</span>
</span><span class="line">
</span><span class="line"><span class="k">+</span><span class="p">(</span><span class="n">XXUtil_t</span> <span class="o">*</span><span class="p">)</span><span class="nf">sharedUtil</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="k">static</span> <span class="n">dispatch_once_t</span> <span class="n">onceToken</span><span class="p">;</span>
</span><span class="line">    <span class="n">dispatch_once</span><span class="p">(</span><span class="o">&amp;</span><span class="n">onceToken</span><span class="p">,</span> <span class="o">^</span><span class="p">{</span>
</span><span class="line">        <span class="n">util</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">XXUtil_t</span><span class="p">));</span>
</span><span class="line">        <span class="n">util</span><span class="o">-&gt;</span><span class="n">isVerified</span> <span class="o">=</span> <span class="n">_isVerified</span><span class="p">;</span>
</span><span class="line">        <span class="n">util</span><span class="o">-&gt;</span><span class="n">isNeedSomething</span> <span class="o">=</span> <span class="n">_isNeedSomething</span><span class="p">;</span>
</span><span class="line">        <span class="n">util</span><span class="o">-&gt;</span><span class="n">resetPassword</span> <span class="o">=</span> <span class="n">_resetPassword</span><span class="p">;</span>
</span><span class="line">    <span class="p">});</span>
</span><span class="line">    <span class="k">return</span> <span class="n">util</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">destroy</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="n">util</span> <span class="o">?</span> <span class="n">free</span><span class="p">(</span><span class="n">util</span><span class="p">)</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="line">    <span class="n">util</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>最后，根据 Xcode 的报错指引，把以前这样的调用
<code>[XXUtil isVerified];</code></p>

<p>对应改成：
<code>XXUtil-&gt;isVerified();</code></p>

<p>就可以了。</p>

<p>是的，绝不费一点脑子。</p>

</div>
</div>
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Objective-C 代码混淆]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/08/25/objective-c-dai-ma-hun-yao/"/>
    <updated>2016-08-25T15:09:37+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/08/25/objective-c-dai-ma-hun-yao</id>
    <content type="html"><![CDATA[<div class="container">
<div class="item chapter">
    <h1 class="title"><span class="label">23</span> <span class="title">Objective-C 代码混淆</span></h1>
    <p>class-dump 可以很方便的导出程序头文件，不仅让攻击者了解了程序结构方便逆向，还让着急赶进度时写出的欠完善的程序给同行留下笑柄。
所以，我们迫切的希望混淆自己的代码。</p>

<h3>混淆的常规思路</h3>

<p>混淆分许多思路，比如：</p>

<p>1）花代码花指令，即随意往程序中加入迷惑人的代码指令</p>

<p>2）易读字符替换 等等</p>

<div class="figure" id="figure-23-1">
    <img src="http://ww2.sinaimg.cn/large/626e5d69gw1f760g4dzitj202o031dfp.jpg" />

    <p class="caption"><strong>图片 23.1</strong> confusion1</p>
</div>


<p>防止 class-dump 出可读信息的有效办法是易读字符替换。</p>

<h3>Objective-C 的方法名混淆</h3>

<h4>混淆的时机</h4>

<p>我们希望在开发时一直保留清晰可读的程序代码，方便自己。
同时，希望编译出来的二进制包含乱七八糟的混淆后的程序代码，恶心他人。</p>

<p>因此，我们可以在 Build Phrase 中设定在编译之前进行方法名的字符串替换。</p>

<h4>混淆的方法</h4>

<p>方法名混淆其实就是字符串替换，有 2 个方法可以，一个是 <code>#define</code>，一个是利用 tops。</p>

<p>利用 <code>#define</code> 的方法有一个好处，就是可以把混淆结果合并在一个 .h 中，在工程 Prefix.pch 的最前面 <code>#import</code> 这个 .h 。不导入也可以编译、导入则实现混淆。</p>

<p>单段的 selector ，如 <code>func:</code> ，可以通过 <code>#define func</code> 来实现字符串替换。</p>

<p>多段的 selector，如 <code>a:b:c:</code> ，可以通过分别 <code>#define a 、b、c</code> 来实现字符串替换。</p>

<h3>我的混淆工具</h3>

<p>我写了个简易的混淆脚本，主要思路是把敏感方法名集中写在一个名叫 func.list 的文件中，逐一 <code>#define</code> 成随机字符，追加写入 .h 。</p>

<p>脚本如下：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
</pre></td><td class="code"><pre><code class=""><span class="line">#!/usr/bin/env bash  
</span><span class="line">
</span><span class="line">TABLENAME=symbols  
</span><span class="line">SYMBOL_DB_FILE="symbols"  
</span><span class="line">STRING_SYMBOL_FILE="func.list"  
</span><span class="line">HEAD_FILE="$PROJECT_DIR/$PROJECT_NAME/codeObfuscation.h"  
</span><span class="line">export LC_CTYPE=C  
</span><span class="line">
</span><span class="line">#维护数据库方便日后作排重  
</span><span class="line">createTable()  
</span><span class="line">{  
</span><span class="line">   echo "create table $TABLENAME(src text, des text);" | sqlite3 $SYMBOL_DB_FILE  
</span><span class="line">}  
</span><span class="line">
</span><span class="line">insertValue()  
</span><span class="line">{  
</span><span class="line">   echo "insert into $TABLENAME values('$1' ,'$2');" | sqlite3 $SYMBOL_DB_FILE  
</span><span class="line">}  
</span><span class="line">
</span><span class="line">query()  
</span><span class="line">{  
</span><span class="line">   echo "select * from $TABLENAME where src='$1';" | sqlite3 $SYMBOL_DB_FILE  
</span><span class="line">}  
</span><span class="line">
</span><span class="line">ramdomString()  
</span><span class="line">{  
</span><span class="line">   openssl rand -base64 64 | tr -cd 'a-zA-Z' |head -c 16  
</span><span class="line">}  
</span><span class="line">
</span><span class="line">rm -f $SYMBOL_DB_FILE  
</span><span class="line">rm -f $HEAD_FILE  
</span><span class="line">createTable  
</span><span class="line">
</span><span class="line">touch $HEAD_FILE  
</span><span class="line">echo '#ifndef Demo_codeObfuscation_h  
</span><span class="line">#define Demo_codeObfuscation_h' &gt;&gt; $HEAD_FILE  
</span><span class="line">echo "//confuse string at `date`" &gt;&gt; $HEAD_FILE  
</span><span class="line">cat "$STRING_SYMBOL_FILE" | while read -ra line; do  
</span><span class="line">   if [[ ! -z "$line" ]]; then  
</span><span class="line">       ramdom=`ramdomString`  
</span><span class="line">       echo $line $ramdom  
</span><span class="line">       insertValue $line $ramdom  
</span><span class="line">       echo "#define $line $ramdom" &gt;&gt; $HEAD_FILE  
</span><span class="line">   fi  
</span><span class="line">done  
</span><span class="line">echo "#endif" &gt;&gt; $HEAD_FILE  
</span><span class="line">
</span><span class="line">
</span><span class="line">sqlite3 $SYMBOL_DB_FILE .dump</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4>操作步骤</h4>

<p>1.将混淆脚本 confuse.sh 放到工程目录下
<code>mv confuse.sh your_proj_path/</code></p>

<p>2.修改 Prefix.pch</p>

<p>打开 Xcode，修改 XXX-Prefix.ch ，添加混淆头文件:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#ifdef __OBJC__  </span>
</span><span class="line">   <span class="err">#</span><span class="n">import</span> <span class="o">&lt;</span><span class="n">UIKit</span><span class="o">/</span><span class="n">UIKit</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
</span><span class="line">   <span class="err">#</span><span class="n">import</span> <span class="o">&lt;</span><span class="n">Foundation</span><span class="o">/</span><span class="n">Foundation</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
</span><span class="line">   <span class="c1">//添加混淆作用的头文件（这个文件名是脚本confuse.sh中定义的）  </span>
</span><span class="line">   <span class="err">#</span><span class="n">import</span> <span class="s">&quot;codeObfuscation.h&quot;</span>
</span><span class="line"><span class="cp">#endif</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>3.配置 Build Phase</p>

<p>在工程 Build Phase 中添加执行脚本操作，执行 confuse.sh 脚本，如图：</p>

<div class="figure" id="figure-23-2">
    <img src="http://ww3.sinaimg.cn/large/626e5d69gw1f760gkuq1ej20z80eqjtx.jpg" />

    <p class="caption"><strong>图片 23.2</strong> confusion3</p>
</div>


<p>4.创建函数名列表 func.list ，写入待混淆的函数名，如:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">sample</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">seg1:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">string</span> <span class="nf">seg2:</span><span class="p">(</span><span class="n">NSUInteger</span><span class="p">)</span><span class="nv">num</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>就这样写：</p>

<p>sample<br />
seg1<br />
seg2</p>

<p>并将文件放置于与 confuse.sh 脚本同级<br />
<code>mv func.list your_proj_path/</code></p>

<p>5.编译查看结果</p>

<p>直接 build，混淆脚本会在编译前运行，进行字符随机替换，并且每次 build 的随机字符不同，如图：</p>

<div class="figure" id="figure-23-3">
    <img src="http://ww1.sinaimg.cn/large/626e5d69gw1f760hdde9nj20w40ecwjs.jpg" />

    <p class="caption"><strong>图片 23.3</strong> confusion4</p>
</div>


</div>
</div>
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[static 和被裁的符号表]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/08/25/static-he-bei-cai-de-fu-hao-biao/"/>
    <updated>2016-08-25T15:07:51+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/08/25/static-he-bei-cai-de-fu-hao-biao</id>
    <content type="html"><![CDATA[<div class="container">
<div class="item chapter">
    <h1 class="title"><span class="label">22</span> <span class="title">static 和被裁的符号表</span></h1>
    <p>为了不让攻击者理清自己程序的敏感业务逻辑，于是我们想方设法提高逆向门槛。</p>

<p>本文就介绍一个防御技巧——利用 static 关键字裁掉函数符号。</p>

<h3>原理</h3>

<p>如果函数属性为 static ，那么编译时该函数符号就会被解析为 local 符号。</p>

<p>在发布 release 程序时（用 Xcode 打包编译二进制）默认会 strip 裁掉这些函数符号，无疑给逆向者加大了工作难度。</p>

<h3>验证</h3>

<p>写个 demo 验证一下上述理论，以一段创建 Button 的代码为例，对应补充一个 static 版本。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">id</span> <span class="nf">createBtn</span><span class="p">()</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="n">UIButton</span> <span class="o">*</span><span class="n">btn</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIButton</span> <span class="n">alloc</span><span class="p">]</span><span class="nl">initWithFrame:</span><span class="n">CGRectZero</span><span class="p">];</span>
</span><span class="line">    <span class="p">[</span><span class="n">btn</span> <span class="nl">setFrame:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)];</span>
</span><span class="line">    <span class="p">[</span><span class="n">btn</span> <span class="nl">setBackgroundColor:</span><span class="p">[</span><span class="n">UIColor</span> <span class="n">redColor</span><span class="p">]];</span>
</span><span class="line">    <span class="n">btn</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">cornerRadius</span> <span class="o">=</span> <span class="mf">7.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">btn</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">masksToBounds</span> <span class="o">=</span> <span class="n">YES</span><span class="p">;</span>
</span><span class="line">    <span class="k">return</span> <span class="n">btn</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="k">static</span> <span class="kt">id</span> <span class="nf">static_createBtn</span><span class="p">()</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="n">UIButton</span> <span class="o">*</span><span class="n">btn</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIButton</span> <span class="n">alloc</span><span class="p">]</span><span class="nl">initWithFrame:</span><span class="n">CGRectZero</span><span class="p">];</span>
</span><span class="line">    <span class="p">[</span><span class="n">btn</span> <span class="nl">setFrame:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)];</span>
</span><span class="line">    <span class="p">[</span><span class="n">btn</span> <span class="nl">setBackgroundColor:</span><span class="p">[</span><span class="n">UIColor</span> <span class="n">blueColor</span><span class="p">]];</span>
</span><span class="line">    <span class="n">btn</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">cornerRadius</span> <span class="o">=</span> <span class="mf">7.0f</span><span class="p">;</span>
</span><span class="line">    <span class="n">btn</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">masksToBounds</span> <span class="o">=</span> <span class="n">YES</span><span class="p">;</span>
</span><span class="line">    <span class="k">return</span> <span class="n">btn</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>再来看一下反编的结果，对于 createBtn() 方法，我们可以得到它的伪代码：</p>

<div class="figure" id="figure-22-1">
    <img src="http://ww1.sinaimg.cn/large/626e5d69gw1f760d9iqmfj20ns10aakb.jpg" />

    <p class="caption"><strong>图片 22.1</strong> static</p>
</div>


<p>函数名虽然面目全非，但是基本操作还是清晰的。</p>

<p>对于<code>static_createBtn() </code>方法呢，我们已经无法看到它任何直观的有价值信息了。</p>

<h3>局限</h3>

<p>当然这种方法也有局限性。正如你所知道的，<code>static </code>函数，只在本文件可见。</p>

<h3>打破局限</h3>

<p>怎么让别的文件也能调到本文件的<code> static </code>方法呢？</p>

<p>在本文件建造一个结构体，结构体里包含函数指针。把<code> static </code>函数的函数指针都赋在这个结构体里，再把这个结构体抛出去。</p>

<p>这样做的好处是，既隐藏了函数代码也丰富了调用方式。</p>

</div>
</div>
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[废除应用程序的 ASLR特性]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/08/25/fei-chu-ying-yong-cheng-xu-de-aslrte-xing/"/>
    <updated>2016-08-25T15:02:16+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/08/25/fei-chu-ying-yong-cheng-xu-de-aslrte-xing</id>
    <content type="html"><![CDATA[<div class="container">
<div class="item chapter">
    <h1 class="title"><span class="label">21</span> <span class="title">废除应用程序的 ASLR 特性</span></h1>
    <p>ASLR (Address Space Layout Randomization)，即地址空间随机布局。大部分主流的操作系统都已实现了 ASLR，以防范对已知地址进行恶意攻击。iOS 从 4.3 开始支持 ASLR，Android 从 4.0 也支持了 ASLR 机制。</p>

<p>ASLR 的存在，给 iOS 系统越狱造成了很大的困难，某些不完美越狱方案就是因为攻破不了或者绕不开 ASLR ，所以每次重新启动后地址再度随机偏移，需要重新进行越狱操作。与此同时，ASLR 也给应用层攻击带来了一些困难，不同进程会造成不同的地址空间偏移，而且在运行时才可确定其偏移量，不易锁定攻击地址。</p>

<p><code>Mach-O </code>文件的文件头会记录二进制的属性标识，有个 flag 叫做 PIE  (Position Independent Enable)。开启了 PIE 的二进制文件，在执行时会产生 ASLR 。</p>

<p>我们可以使用<code> otool </code>工具，来查看任意应用程序二进制文件的属性，以支付宝为例：<br />
<code>otool -hv Portal</code></p>

<div class="figure" id="figure-21-1">
    <img src="http://ww3.sinaimg.cn/large/626e5d69gw1f7607zmgrxj216a032ju4.jpg" />

    <p class="caption"><strong>图片 21.1</strong> aslr</p>
</div>


<p>有 PIE 标识，表示该程序在启动时会产生随机地址布局。</p>

<div class="figure" id="figure-21-2">
    <img src="http://ww4.sinaimg.cn/large/626e5d69gw1f7608woa04j202m02s3yc.jpg" />

    <p class="caption"><strong>图片 21.2</strong> aslr1</p>
</div>
<a href="https://github.com/peterfillmore/removePIE">removePIE</a> 是个去掉 PIE flag 的工具。

<p>坏消息是，年久失修，它不支持 iOS7 。
好消息是，我们还有 2 个变通方法可以走。<br />
    - 利用<code> Theos </code>编译 removePIE<br />
    - 改编一个 Mac 版的 MyRemovePIE</p>

<p>非越狱开发者可能不熟悉 Theos ，低学习成本的做法是第二种，那么让我们来改编一个 Mac 版的 MyRemovePIE 吧。
（懒得动手的可以直接到<a href="https://github.com/CarinaTT/MyRemovePIE">这里</a>下载 demo ）</p>

<p>创建一个 Command Line Tool 工程，</p>

<div class="figure" id="figure-21-3">
    <img src="http://ww2.sinaimg.cn/large/626e5d69gw1f7609flo73j214k0rgqac.jpg" />

    <p class="caption"><strong>图片 21.3</strong> aslr2</p>
</div>


<p>然后复制 <a href="https://github.com/peterfillmore/removePIE/blob/master/removePIE.c">removePIE.c</a>  代码到 <code>main.c</code> 中，并且修改第 43 行：
    <code>if(currentHeader.magic == MH_MAGIC){ //little endian</code></p>

<p>添加 iOS7 的判断条件:
    <code>if(currentHeader.magic == MH_MAGIC || currentHeader.magic == 0xbebafeca ){ //little endian</code></p>

<p>编译后生成可执行文件 MyRemovePIE .</p>

<p>利用我们编译生成的 MyRemovePIE 来处理应用程序：</p>

<p><code>./MyRemovePIE Portal</code></p>

<div class="figure" id="figure-21-4">
    <img src="http://ww1.sinaimg.cn/large/626e5d69gw1f76079jd97j20p409iad1.jpg" />

    <p class="caption"><strong>图片 21.4</strong> aslr3</p>
</div>


<p>这样以后支付宝 Portal 再被启动执行就不会具有 ASLR 特性了</p>

<div class="figure" id="figure-21-5">
    <img src="http://ww2.sinaimg.cn/large/626e5d69gw1f7609ztn5kj215y04egnk.jpg" />

    <p class="caption"><strong>图片 21.5</strong> aslr4</p>
</div>


<p>如何验证一下结果呢？</p>

<p>把处理过的 Portal 二进制拷贝回 iPhone ，启动支付宝钱包应用，然后 gdb 该进程，利用<code> info sh </code>命令查看偏移：</p>

<div class="figure" id="figure-21-6">
    <img src="http://ww4.sinaimg.cn/large/626e5d69gw1f760anz667j21kw066gri.jpg" />

    <p class="caption"><strong>图片 21.6</strong> aslr5</p>
</div>


<p>偏移量为 0 ，嗯，这下就好了。一些手动处理的过程可以升级为自动了～ <div class="figure" id="figure-21-7">
    <img src="http://ww4.sinaimg.cn/large/626e5d69gw1f760b57h2fj202j02ka9v.jpg" />

    <p class="caption"><strong>图片 21.7</strong> aslr6</p>
</div>




<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</p></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[越狱检测的攻与防]]></title>
    <link href="http://ITMonkeyLife.github.io/Blog/blog/2016/08/25/yue-yu-jian-ce-de-gong-yu-fang/"/>
    <updated>2016-08-25T14:58:25+08:00</updated>
    <id>http://ITMonkeyLife.github.io/Blog/blog/2016/08/25/yue-yu-jian-ce-de-gong-yu-fang</id>
    <content type="html"><![CDATA[<div class="container">
<div class="item chapter">
    <h1 class="title"><span class="label">20</span> <span class="title">越狱检测的攻与防</span></h1>
    <p>在应用开发过程中，我们希望知道设备是否越狱，正以什么权限运行程序，好对应采取一些防御和安全提示措施。</p>

<p>iOS7 相比之前版本的系统而言，升级了沙盒机制，封锁了几乎全部应用沙盒可以共享数据的入口。即使在越狱情况下，限制也非常多，大大增加了应用层攻击难度。比如，在 iOS7 之前，我们可以尝试往沙盒外写文件判断是否越狱，但 iOS7 越狱后也无该权限，还使用老方法检测会导致误判。</p>

<p>那么，到底应该如何检测越狱呢？攻击者又会如果攻破检测呢？本文就着重讨论一下越狱检测的攻与防。</p>

<div class="figure" id="figure-20-1">
    <img src="http://ww2.sinaimg.cn/large/626e5d69gw1f7603q16m8j203703i3yg.jpg" />

    <p class="caption"><strong>图片 20.1</strong> gongfang</p>
</div>


<p>首先，你可以尝试使用<code> NSFileManager </code>判断设备是否安装了如下越狱常用工具：</p>

<p>/Applications/Cydia.app
/Library/MobileSubstrate/MobileSubstrate.dylib
/bin/bash
/usr/sbin/sshd
/etc/apt</p>

<p>但是不要写成<code> BOOL </code>开关方法，给攻击者直接锁定目标<code> hook </code>绕过的机会</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">+</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isJailbroken</span><span class="p">{</span>
</span><span class="line">    <span class="k">if</span> <span class="p">([[</span><span class="n">NSFileManager</span> <span class="n">defaultManager</span><span class="p">]</span> <span class="nl">fileExistsAtPath:</span><span class="s">@&quot;/Applications/Cydia.app&quot;</span><span class="p">]){</span>
</span><span class="line">        <span class="k">return</span> <span class="n">YES</span><span class="p">;</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="c1">// ...  </span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>攻击者可能会改变这些工具的安装路径，躲过你的判断。</p>

<p>那么，你可以尝试打开<code> cydia </code>应用注册的<code> URL scheme：</code></p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">if</span><span class="p">([[</span><span class="n">UIApplication</span> <span class="n">sharedApplication</span><span class="p">]</span> <span class="nl">canOpenURL:</span><span class="p">[</span><span class="n">NSURL</span> <span class="nl">URLWithString:</span><span class="s">@&quot;cydia://package/com.example.package&quot;</span><span class="p">]]){</span>
</span><span class="line">     <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Device is jailbroken&quot;</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>但是不是所有的工具都会注册<code> URL scheme</code>，而且攻击者可以修改任何应用的<code> URL scheme</code>。</p>

<p>那么，你可以尝试读取下应用列表，看看有无权限获取：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">if</span> <span class="p">([[</span><span class="n">NSFileManager</span> <span class="n">defaultManager</span><span class="p">]</span> <span class="nl">fileExistsAtPath:</span><span class="s">@&quot;/User/Applications/&quot;</span><span class="p">]){</span>
</span><span class="line">        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Device is jailbroken&quot;</span><span class="p">);</span>
</span><span class="line">        <span class="n">NSArray</span><span class="o">*</span> <span class="n">applist</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSFileManager</span> <span class="n">defaultManager</span><span class="p">]</span> <span class="nl">contentsOfDirectoryAtPath:</span><span class="s">@&quot;/User/Applications/&quot;</span>
</span><span class="line">                                                                               <span class="nl">error:</span><span class="nb">nil</span><span class="p">];</span>
</span><span class="line">        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;applist = %@&quot;</span><span class="p">,</span><span class="n">applist</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>越了狱的设备是可以获取到的：</p>

<div class="figure" id="figure-20-2">
    <img src="http://ww1.sinaimg.cn/large/626e5d69gw1f760484s75j20zc0cg7ce.jpg" />

    <p class="caption"><strong>图片 20.2</strong> gongfang2</p>
</div>


<p>攻击者可能会<code> hook NSFileManager </code>的方法，让你的想法不能如愿。</p>

<p>那么，你可以回避<code> NSFileManager</code>，使用 <code>stat </code>系列函数检测<code> Cydia </code>等工具：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &lt;sys/stat.h&gt;  </span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="nf">checkCydia</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">   <span class="k">struct</span> <span class="n">stat</span> <span class="n">stat_info</span><span class="p">;</span>
</span><span class="line">   <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">stat</span><span class="p">(</span><span class="s">&quot;/Applications/Cydia.app&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">stat_info</span><span class="p">))</span> <span class="p">{</span>
</span><span class="line">       <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Device is jailbroken&quot;</span><span class="p">);</span>
</span><span class="line">   <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>攻击者可能会利用 <a href="blog/2016/08/25/fish-hook/">Fishhook 原理</a> hook 了 stat 。</p>

<p>那么，你可以看看<code> stat </code>是不是出自系统库，有没有被攻击者换掉：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &lt;dlfcn.h&gt;  </span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="nf">checkInject</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">ret</span> <span class="p">;</span>
</span><span class="line">    <span class="n">Dl_info</span> <span class="n">dylib_info</span><span class="p">;</span>
</span><span class="line">    <span class="kt">int</span> <span class="p">(</span><span class="o">*</span> <span class="n">func_stat</span><span class="p">)(</span><span class="k">const</span> <span class="n">charchar</span><span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">stat</span><span class="o">*</span> <span class="p">)</span> <span class="o">=</span> <span class="n">stat</span><span class="p">;</span>
</span><span class="line">    <span class="k">if</span> <span class="p">((</span><span class="n">ret</span> <span class="o">=</span> <span class="n">dladdr</span><span class="p">(</span><span class="n">func_stat</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dylib_info</span><span class="p">)))</span> <span class="p">{</span>
</span><span class="line">        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;lib :%s&quot;</span><span class="p">,</span> <span class="n">dylib_info</span><span class="p">.</span><span class="n">dli_fname</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>如果结果不是 <code>/usr/lib/system/libsystem_kernel.dylib</code> 的话，那就 <code>100%</code> 被攻击了。
如果 <code>libsystem_kernel.dylib</code> 都是被攻击者替换掉的……
那也没什么可防的大哥你随便吧……</p>

<p>那么，你可能会想，我该检索一下自己的应用程序是否被链接了异常动态库。
列出所有已链接的动态库：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &lt;mach-o/dyld.h&gt;  </span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="nf">checkDylibs</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="n">uint32_t</span> <span class="n">count</span> <span class="o">=</span> <span class="n">_dyld_image_count</span><span class="p">();</span>
</span><span class="line">    <span class="k">for</span> <span class="p">(</span><span class="n">uint32_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">NSString</span><span class="o">*</span> <span class="n">name</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSString</span> <span class="n">alloc</span><span class="p">]</span><span class="nl">initWithUTF8String:</span><span class="n">_dyld_get_image_name</span><span class="p">(</span><span class="n">i</span><span class="p">)];</span>
</span><span class="line">        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;--%@&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>通常情况下，会包含越狱机的输出结果会包含字符串：<code>Library/MobileSubstrate/MobileSubstrate.dylib</code> 。</p>

<p>攻击者可能会给<code> MobileSubstrate </code>改名，但是原理都是通过 <code>DYLD_INSERT_LIBRARIES</code>注入动态库。</p>

<p>那么，你可以通过检测当前程序运行的环境变量：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">void</span> <span class="nf">printEnv</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="kt">char</span><span class="o">*</span> <span class="n">env</span> <span class="o">=</span> <span class="n">getenv</span><span class="p">(</span><span class="s">&quot;DYLD_INSERT_LIBRARIES&quot;</span><span class="p">);</span>
</span><span class="line">    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;%s&quot;</span><span class="p">,</span> <span class="n">env</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>未越狱设备返回结果是<code> null </code>，越狱设备就各有各的精彩了，尤其是老一点的 iOS 版本越狱环境。</p>

</div>
</div>
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
]]></content>
  </entry>
  
</feed>
