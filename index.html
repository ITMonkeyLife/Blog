
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>IT Monkey Life</title>
	<meta name="author" content="Rick">

	
	<meta name="description" content="我们对算法的研究是基于将它们实现为用Java编程语言编写的程序。 我们这样做有几个原因： 我们的程序是简洁，优雅，完整的算法描述。 您可以运行程序来研究算法的属性。 您可以立即在应用程序中使用算法。 原始数据类型和表达式 数据类型 是一组值和一组对这些值的操作。 &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/Blog/atom.xml" rel="alternate" title="IT Monkey Life" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/Blog/favicon.png" rel="shortcut icon">
	<link href="/Blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/Blog/">IT Monkey Life</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/Blog/">Blog</a></li>
	<li><a href="/Blog/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/Blog/">Blog</a></li>
	<li><a href="/Blog/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:ITMonkeyLife.github.io/Blog">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
    
		
		
		
		
		
		<a class="rss" href="/Blog/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:ITMonkeyLife.github.io/Blog">
	</form>
</nav>


</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/Blog/blog/2016/10/13/suan-fa-zhi-cheng-xu-mo-xing/">
		
			算法之程序模型</a>
	</h2>
	<div class="entry-content">
		<p>
我们对算法的研究是基于将它们实现为用Java编程语言编写的程序。 我们这样做有几个原因：
<ul>
<li> 我们的程序是简洁，优雅，完整的算法描述。</li>
<li> 您可以运行程序来研究算法的属性。</li>
<li> 您可以立即在应用程序中使用算法。</li>
</ul>
</p>
<p>
<h2>原始数据类型和表达式</h2> <em>数据类型</em> 是一组值和一组对这些值的操作。以下四种基本数据类型是Java语言的基础：
<ul>
<li>整数，带算术运算（int）</li>
<li>实数，再次与算术运算(<tt>double</tt>)</li>
<li>布尔值，带有逻辑运算符的值{true，false}的集合（布尔）</li>
<li>字符，您键入的字母数字字符和符号（char）</li>
</ul>
Java程序操作以标识符命名的变量。 每个变量与数据类型相关联，并存储允许的数据类型值之一。 我们使用表达式来应用与每个类型相关联的操作。
<br /><img src="/Blog/images/algorithms/alogorithms_1.1_building-blocks.png" />
<br />下表总结了对于Java的int，double，boolean和char数据类型的值的集合和最常见的操作。
<br /><img src="/Blog/images/algorithms/alogorithms_1.1_primitive.png" />
<ul>
<li>表达式。 典型的表达式是中缀。 当表达式包含多个运算符时，优先级顺序指定它们的应用顺序：运算符*和/（和％）的优先级高于（应用于）+和 - 运算符; 在逻辑运算符之间！ 是最高优先级，后跟&amp;&amp;和然后||。 通常，相同优先级的运算符是左关联的（从左到右应用）。 您可以使用括号来覆盖这些规则。</li>
<li>类型转换。 如果没有丢失信息，则数字将自动提升为更具包容性的类型。例如，在表达式1 + 2.5中，1被提升为双精度值1.0，表达式的值为双精度值3.5。 转换是将一个类型的值转换为另一个类型的值的指令。 例如（int）3.7是3.将double转换为int将截断到零。</li>
<li>比较。 以下混合类型运算符比较相同类型的两个值并生成布尔值：
<ul>
<li>相等 (==)</li>
<li>不等 (!=)</li>
<li>小于 (&lt;)</li>
<li><em>小于等于</em> (&lt;=)</li>
<li><em>大于</em> (&gt;)</li>
<li><em>大于等于</em> (&gt;=)</li>
</ul></li>
<li>其他原语类型。
Java的int有一个32位的表示; Java的double类型具有64位表示。 Java有五种额外的原始数据类型：
<ul>
<li>64位整数，带算术运算（长整型）</li>
<li>16位整数，带算术运算（短）</li>
<li>16位字符，带算术运算（char）</li>
<li>8位整数，带算术运算（字节）</li>
<li>32位单精度实数，带算术运算（float）</li>
</ul></li>
</ul>
<br />
</p>

<p><h2>语句</h2>Java程序由语句组成，语句通过创建和操作变量，为其分配数据类型值以及控制这些操作的执行流程来定义计算。
<ul>
<li>声明创建指定类型的变量，并用标识符命名它们。 Java是一种强类型语言，因为Java编译器检查一致性。 变量的范围是定义它的程序的一部分。</li>
<li>分配将数据类型值（由表达式定义）与变量关联。</li>
<li>初始化声明将声明与赋值相结合，以便在声明变量的同时初始化变量。</li>
<li>隐式分配。 当我们的目的是修改变量相对于当前值的值时，可以使用以下快捷键：
<ul>
<li>递增/递减运算符：代码i ++是i = i + 1的缩写。除了表达式值是在递增/递减之后，而不是之前，代码++ i是相同的。</li>
<li>其他复合运算符：代码i / = 2是i = i / 2的缩写。</li>
</ul></li>
<li>条件提供了执行流程的简单改变 - 根据指定的条件，在两个块中的一个块中执行语句。</li>
<li>循环提供了执行流程中更深刻的变化 - 只要给定条件为真，就执行块中的语句。 我们将循环中的块中的语句称为循环体。</li>
<li>break和continue。 Java支持在while循环中使用两个附加语句：
<ul>
<li>break语句，它立即退出循环</li>
<li>continue语句，它立即开始循环的下一次迭代</li>
</ul></li>
<li>符号。 许多循环遵循这个方案：将索引变量初始化为某个值，然后使用while循环测试涉及索引变量的循环继续条件，其中while循环中的最后一个语句增加索引变量。 你可以用Java的表示法来表达这样的循环。</li>
<li>单语句块。 如果条件或循环中的语句块只有一个语句，则可以省略花括号。</li>
</ul>
下表说明了不同种类的Java语句。
<br /><img src="/Blog/images/algorithms/alogorithms_1.1_statements.png" />
</p>
<p>
<h2>数组。</h2> 数组存储所有相同类型的值序列。 如果我们有N个值，我们可以使用符号a [i]来指代从0到N-1的i的任何值的第i个值。
<ul>
<li>创建和初始化数组。 在Java程序中创建数组涉及三个不同的步骤：
<ul>
<li>声明数组的类型和名称</li>
<li>创建数组</li>
<li>初始化数组的值</li>
</ul></li>
<li>默认数组初始化。 对于代码更简洁，我们经常利用Java的默认数组初始化约定，并将所有三个步骤组合成一个语句。 对于数字类型，默认初始值为零，对于类型布尔值为false。</li>
<li>初始化声明。 我们可以在编译时指定初始化值，方法是在花括号之间列出文字值，用逗号分隔。</li>
<br /><img src="/Blog/images/algorithms/alogorithms_1.1_array.png" />
<li>使用数组。 一旦我们创建一个数组，它的大小是固定的。 程序可以使用代码a.length引用数组a []的长度。 Java执行自动边界检查 - 如果你访问一个非法索引的数组，你的程序将终止ArrayIndexOutOfBoundsException。</li>
<li>别名。 数组名称引用整个数组 - 如果我们将一个数组名称指定给另一个数组名称，那么它们都引用相同的数组，如下面的代码片段所示。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kt">int</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">N</span><span class="o">];</span>
</span><span class="line"><span class="o">...</span>
</span><span class="line"><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1234</span><span class="o">;</span>
</span><span class="line"><span class="o">...</span>
</span><span class="line"><span class="kt">int</span><span class="o">[]</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
</span><span class="line"><span class="o">...</span>
</span><span class="line"><span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="mi">5678</span><span class="o">;</span>   <span class="c1">// a[i] is now 5678.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
这种情况被称为混叠，并且可能导致微妙的错误。</li>
<li>二维数组。 Java中的二维数组是一维数组的数组。 二维阵列可以是粗糙的（其阵列可以都具有不同的长度），但是我们最常使用（对于适当的参数M和N）M乘N的二维阵列。 为了引用二维数组a [] []的行i和列j中的条目，我们使用符号a [i] [j]。</li>
</ul>
</p>
<p>
<h2>静态方法。</h2> 静态方法在许多编程语言中被称为函数，因为它们可以表现得像数学函数。 每个静态方法是一系列语句，它们在调用静态方法时一个接一个执行。
<ul>
<li>定义静态方法。 方法封装被定义为语句序列的计算。 方法接受参数（给定数据类型的值），并计算一些数据类型的返回值或导致副作用。 每个静态方法由签名和主体组成。
<br /><img src="/Blog/images/algorithms/alogorithms_1.1_static-method.png" /></li>
<li>调用静态方法。 对静态方法的调用是其名称，后跟表达式，指定括号中的参数值，用逗号分隔。 当一个方法被调用时，它的参数变量用调用中相应表达式的值初始化。 返回语句终止静态方法，将控制权返回给调用者。 如果静态方法是计算值，则必须在return语句中指定该值。</li>
<li>方法的属性。 Java方法具有以下特性：
<ul>
<li>参数通过值传递。 调用函数时，参数值将完全求值，并将结果值复制到参数变量中。 这称为值传递。 数组（和其他对象）引用也通过值传递：方法不能更改引用，但它可以更改数组中的条目（或对象的值）。</li>
<li>方法名称可以重载。 类中的方法可以具有相同的名称，只要它们具有不同的签名。 此功能称为重载。</li>
<li>方法具有单个返回值，但可能有多个返回语句。 Java方法只能提供一个返回值。 一旦达到第一个return语句，控制就返回调用程序。</li>
<li>一种方法可能有副作用。 方法可以使用关键字void作为其返回类型，以指示它没有返回值，并产生副作用（消耗输入，产生输出，改变数组中的条目，或以其它方式改变系统的状态）。</li>
</ul></li>
<li>递归。 递归方法是直接或间接调用自身的方法。 开发递归程序有三个重要的经验法则：
<ul>
<li>递归具有基本案例。</li>
<li>递归调用必须解决在某种意义上较小的子问题，因此递归调用会收敛到基本情况。</li>
<li>递归调用不应解决重叠的子问题。</li>
</ul></li>
<li>基本编程模型。 静态方法库是一组在Java类中定义的静态方法。 Java编程的基本模型是开发一个程序，通过创建一个静态方法库，其中一个名为main（），来解决特定的计算任务。</li>
<li>模块化编程。 静态方法的库允许模块化编程，其中一个库中的静态方法可以调用其他库中定义的静态方法。 这种方法有许多重要的优点。
<ul>
<li>使用合理大小的模块</li>
<li>共享和重用代码，而不必重新实现它</li>
<li>替代改进的实现</li>
<li>为解决编程问题开发适当的抽象模型</li>
<li>本地化调试</li>
</ul></li>
<li>单元测试。 Java编程的最佳实践是在每个测试库中的方法的静态方法库中包含一个main（）。</li>
<li>外部库。 我们使用来自四种不同类型库的静态方法，每种都需要（略）不同的代码重用程序。</li>
<ul>
<li>java.lang中的标准系统库，包括java.lang.Math，java.lang.Integer和java.lang.Double。</li>
<li>导入的系统库，如java.util.Arrays。 在程序开始时需要一个import语句来使用这样的库。</li>
<li>我们开发用的标准库。 要使用这样的程序，请将源码下载到您的工作目录中，或按照<a href="http://algs4.cs.princeton.edu/code">以下说明</a>将<a href="http://algs4.cs.princeton.edu/code/stdlib.jar">stdlib.jar</a>添加到类路径中。</li>
</ul>
要从另一个库调用方法，我们将库名称作为每个调用的方法名称的前缀：Math.sqrt（），Arrays.sort（），BinarySearch.rank（）和StdIn.readInt（）。
</ul>
</p>
<p>
<h2>字符串</h2>
<br /><img src="/Blog/images/algorithms/alogorithms_1.1_string.png" />
<ul>
<li>串联</li>
<li>转换</li>
<li>自动转换。</li>
<li>命令行参数。</li>
</ul>
</p>

<p>
输入与输出
<ul>
<li>命令和参数。
<br /><img src="/Blog/images/algorithms/alogorithms_1.1_command.png" /></li>
<li>标准输出</li>
<li>格式化输出
<br /><img src="/Blog/images/algorithms/alogorithms_1.1_printf.png" /></li>
<li>标准输入</li>
<li>重定向和管道。
<br /><img src="/Blog/images/algorithms/alogorithms_1.1_redirect.png" /></li>
<li>从文件输入和输出。</li>
<li>标准绘图</li>
</ul>
</p>
<p>
<h2>二进制搜索。</h2> 下面是一个完整的Java程序<a href="http://algs4.cs.princeton.edu/11model/BinarySearch.java.html">BinarySearch.java</a>，它说明了我们的编程模型的许多基本特性。 它实现了一种称为二进制搜索的经典算法，并针对称为白名单过滤的应用程序对其进行测试。
<br /><img src="/Blog/images/algorithms/alogorithms_1.1_binary-search-anatomy.png" />
<br />
静态方法rank（）使用整数键和int值的排序数组作为参数，并返回键的索引（如果它存在于数组中），否则为-1。 它通过维护变量lo和hi来完成这个任务，使得如果在数组中，则密钥在[lo..hi]中，然后进入测试间隔中的中间条目（在索引mid）的循环。 如果键等于[mid]，返回值为mid; 否则，该方法将大约一半的间隔大小，如果该键小于a [mid]，则查看左半部分，如果该键大于[mid]，则查看右半部分。 当找到键或间隔为空时，进程终止。
<br /><img src="/Blog/images/algorithms/alogorithms_1.1_binary-search.png" />
<ul>
<li>开发客户端</li>
<li>白名单</li>
<li>性能</li>
</ul>
</p>

<p>
输入和输出库。 这里是一个输入和输出库的列表.

<table>
  <tr>
  <th><b /></th>
  <th><b>程序</b></th>
  <th><b>描述 / JAVA文档</b></th>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#1.5">1.5</a></td>
  <td><a title="read numbers and text from standard input" href="http://algs4.cs.princeton.edu/stdlib/StdIn.java.html">StdIn.java</a></td>
  <td><a title="read numbers and text from standard input" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdIn.html">从标准输入读取数字和文本</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#1.5">1.5</a></td>
  <td><a title="write numbers and text to standard output" href="http://algs4.cs.princeton.edu/stdlib/StdOut.java.html">StdOut.java</a></td>
  <td><a title="write numbers and text to standard output" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdOut.html">将数字和文本写入标准输出</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#1.5">1.5</a></td>
  <td><a title="draw geometric shapes in a window" href="http://algs4.cs.princeton.edu/stdlib/StdDraw.java.html">StdDraw.java</a></td>
  <td><a title="draw geometric shapes in a window" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdDraw.html">在窗口中绘制几何形状</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#1.5">1.5</a></td>
  <td><a title="create, play, and manipulate sound" href="http://algs4.cs.princeton.edu/stdlib/StdAudio.java.html">StdAudio.java</a></td>
  <td><a title="create, play, and manipulate sound" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdAudio.html">创建，播放和操纵声音</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/22library/index.php#2.2">2.2</a></td>
  <td><a title="generate random numbers" href="http://algs4.cs.princeton.edu/stdlib/StdRandom.java.html">StdRandom.java</a></td>
  <td><a title="generate random numbers" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdRandom.html">生成随机数</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/22library/index.php#2.2">2.2</a></td>
  <td><a title="compute statistics" href="http://algs4.cs.princeton.edu/stdlib/StdStats.java.html">StdStats.java</a></td>
  <td><a title="compute statistics" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdStats.html">计算统计</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/22library/index.php#2.2">2.2</a></td>
  <td><a title="read and write 1D and 2D arrays" href="http://algs4.cs.princeton.edu/stdlib/StdArrayIO.java.html">StdArrayIO.java</a></td>
  <td><a title="read and write 1D and 2D arrays" href="http://algs4.cs.princeton.edu/stdlib/javadoc/StdArrayIO.html">读取和写入1D和2D阵列</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/31datatype/index.php#3.1">3.1</a></td>
  <td><a title="read numbers and text from files and URLs" href="http://algs4.cs.princeton.edu/stdlib/In.java.html">In.java</a></td>
  <td><a title="read numbers and text from files and URLs" href="http://algs4.cs.princeton.edu/stdlib/javadoc/In.html">从文件和URL读取数字和文本</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/31datatype/index.php#3.1">3.1</a></td>
  <td><a title="write numbers and text to files" href="http://algs4.cs.princeton.edu/stdlib/Out.java.html">Out.java</a></td>
  <td><a title="write numbers and text to files" href="http://algs4.cs.princeton.edu/stdlib/javadoc/Out.html">写数字和文本到文件</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/31datatype/index.php#3.1">3.1</a></td>
  <td><a title="draw geometric shapes" href="http://algs4.cs.princeton.edu/stdlib/Draw.java.html">Draw.java</a></td>
  <td><a title="draw geometric shapes" href="http://algs4.cs.princeton.edu/stdlib/javadoc/Draw.html">绘制几何形状</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/31datatype/index.php#3.1">3.1</a></td>
  <td><a title="process digital images" href="http://algs4.cs.princeton.edu/stdlib/Picture.java.html">Picture.java</a></td>
  <td><a title="process digital images" href="http://algs4.cs.princeton.edu/stdlib/javadoc/Picture.html">过程数字图像</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/32class/index.php#3.2">3.2</a></td>
  <td><a title="measure running time" href="http://algs4.cs.princeton.edu/stdlib/Stopwatch.java.html">Stopwatch.java</a></td>
  <td><a title="measure running time" href="http://algs4.cs.princeton.edu/stdlib/javadoc/Stopwatch.html">测量运行时间</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#-">-</a></td>
  <td><a title="write bits to standard output" href="http://algs4.cs.princeton.edu/stdlib/BinaryStdOut.java.html">BinaryStdOut.java</a></td>
  <td><a title="write bits to standard output" href="http://algs4.cs.princeton.edu/stdlib/javadoc/BinaryStdOut.html">写位到标准输出</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#-">-</a></td>
  <td><a title="read bits from files and URLs" href="http://algs4.cs.princeton.edu/stdlib/BinaryIn.java.html">BinaryIn.java</a></td>
  <td><a title="read bits from files and URLs" href="http://algs4.cs.princeton.edu/stdlib/javadoc/BinaryIn.html">从文件和URL读取位</a></td>
  </tr>
  <tr>
  <td><a href="http://introcs.cs.princeton.edu/15inout/index.php#-">-</a></td>
  <td><a title="write bits to files" href="http://algs4.cs.princeton.edu/stdlib/BinaryOut.java.html">BinaryOut.java</a></td>
  <td><a title="write bits to files" href="http://algs4.cs.princeton.edu/stdlib/javadoc/BinaryOut.html">写位到文件</a></td>
  </tr>
</table>

我们简要描述输入和输出库，并包括一个示例客户端。
</p>

<p>标准输入和标准输出。 <a href="http://algs4.cs.princeton.edu/11model/StdIn.java.html">StdIn.java</a>和<a href="http://algs4.cs.princeton.edu/11model/StdOut.java.html">StdOut.java</a>是用于从标准输入中读取数字和文本以及将数字和文本打印到标准输出的库。 我们的版本有一个比相应的Java接口更简单的接口（并提供一些技术改进）。 <a href="http://algs4.cs.princeton.edu/11model/RandomSeq.java.html">RandomSeq.java</a>生成给定范围内的随机数。 <a href="http://algs4.cs.princeton.edu/11model/Average.java.html">Average.java</a>从标准输入读取一系列实数，并在标准输出上打印它们的平均值。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="o">%</span> <span class="n">java</span> <span class="n">Average</span>
</span><span class="line"><span class="mf">10.0</span> <span class="mf">5.0</span> <span class="mf">6.0</span> <span class="mf">3.0</span> <span class="mf">7.0</span> <span class="mf">32.0</span>
</span><span class="line"><span class="mf">3.14</span> <span class="mf">6.67</span> <span class="mf">17.71</span>
</span><span class="line"><span class="o">&lt;</span><span class="n">Ctrl</span><span class="o">-</span><span class="n">d</span><span class="o">&gt;</span>
</span><span class="line"><span class="n">Average</span> <span class="n">is</span> <span class="mf">10.05777777777778</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<a href="http://algs4.cs.princeton.edu/11model/In.java.html">In.java</a>和<a href="http://algs4.cs.princeton.edu/11model/Out.java.html">Out.java</a>是面向对象的版本，支持多个输入和输出流，包括从文件或URL读取和写入文件。
</p>

<p>
标准绘制。 <a href="http://algs4.cs.princeton.edu/11model/StdDraw.java.html">StdDraw.java</a>是一个易于使用的库，用于绘制几何形状，如点，线和圆。 <a href="http://algs4.cs.princeton.edu/11model/RightTriangle.java.html">RightTriangle.java</a>绘制一个直角三角形和一个外接圆。
<a href="http://algs4.cs.princeton.edu/11model/Draw.java.html">Draw.java</a>是一个面向对象的版本，支持在多个窗口中绘制。
</p>
<p>
标准音频。 <a href="http://algs4.cs.princeton.edu/11model/StdAudio.java.html">StdAudio.java</a>是一个易于使用的库合成声音。 <a href="http://algs4.cs.princeton.edu/11model/Tone.java.html">Tone.java</a>从命令行读取频率和持续时间，并且在给定持续时间内声化给定频率的正弦波。
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="o">%</span> <span class="n">java</span> <span class="n">Tone</span> <span class="mf">440.0</span> <span class="mf">3.0</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>

<p>
图像处理。 <a href="http://algs4.cs.princeton.edu/11model/Picture.java.html">Picture.java</a>是一个易于使用的图像处理库。 <a href="http://algs4.cs.princeton.edu/11model/Scale.java.html">Scale.java</a>使用图片文件的名称和两个整数（width w和height h）作为命令行参数，并将图像缩放为w-by-h。
</p>

<hr />

<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">




</div>
	<div class="tags">


	<a class='category' href='/Blog/blog/categories/java/'>Java</a>


</div>
	
	<div class="comments"><a href="/Blog/blog/2016/10/13/suan-fa-zhi-cheng-xu-mo-xing/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/Blog/blog/2016/09/18/yin-le-le-li-yin-diao-he-ji-hao/">
		
			音乐乐理:音调和记号</a>
	</h2>
	<div class="entry-content">
		<div id="static">
<ul>
<li> 半步（或&#8221;半音&#8221;）是从键盘到下一个相邻的键上一个键之间的距离。
<li> 键1到键2是一半的音，因为它们是彼此相邻。
<li> 半步并不总是从白键到黑键。
<li> 在这个例子中，键1和键2仍然彼此相邻。
<li> 一个完整的全音（或&#8221;全音&#8221;或简称&#8217;音&#8221;）是相同的距离，两个半音。
<li> 键1到键3是一个整体的音。
<li> 键1到键2是第一半步。 2键是键3的第二半步。
<li> 一个偶然的是用来提高或降低音符的音高的标志。
<li> 我们将讨论的第一个记号是平的和尖锐。
<li> 平半步降低了一个音调，而锐半步提出了一个音调。
<li> 键入时，您可以使用＃来代表尖锐，A B来代表一个单位。
<li> 让我们来看看在C和D之间的黑键
<li> 此键可称为C＃，因为它首先是C.半步
<li> 它也可以被称为Db，因为它低于D.半步
<li> 另一个例子是E和F
<li> E也可以被称为Fb的，因为它低于F.半步
<li> 同样，F可称为E＃。
<li> 每当有一定间距有多个名字，它被称为等音拼写。
<li> 接下来，让我们讨论双平板和双锐利。
<li> 虽然平滑和尖锐半步，双平双锐利的改变的说明一整步改变一个音符。
<li> 打字时，您可以使用x要代表一个双锐利和bb表示double持平。
<li> 例如，D和Ebb具有相同的间距，因为你可以从E去整个音步长（或两个半台阶）往下到达D
<li> D也可以听起来一样Cx，因为它是上述C的整个步长
<li> 最后，自然消除了任何意外，并返回一个音符到原来的白键。
<li> 我们将在即将到来的课程了解更多关于本位音。


<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul></div>

		
		
	</div>


<div class="meta">
	<div class="date">




</div>
	<div class="tags">


	<a class='category' href='/Blog/blog/categories/yin-le/'>音乐</a>


</div>
	
	<div class="comments"><a href="/Blog/blog/2016/09/18/yin-le-le-li-yin-diao-he-ji-hao/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/Blog/blog/2016/09/08/yin-le-le-li-dian-he-lian-xian/">
		
			音乐乐理:增强点和持续音</a>
	</h2>
	<div class="entry-content">
		<div id="static">
<ul>
<li> 增强点和持续音的关系有两种类型来改变一个音符的时间标记。<br /><img src="/Blog/images/music/lesson14_20.png" />
<li> 一个点了一大半增加持续时间。<br /><img src="/Blog/images/music/lesson14_40.png" />
<li> 由于八分音符的四分音符的1/2时间，我们将用它替换了1/2个符号。<br /><img src="/Blog/images/music/lesson14_60.png" />
<li> 正如你所看到的，一个点四分音符等于四分音符加上八分音符。<br /><img src="/Blog/images/music/lesson14_80.png" />
<li> 一个点四分音符也可以等于3八分音符。<br /><img src="/Blog/images/music/lesson14_100.png" />
<li> 连线持续合并相同间距的多个音符。<br /><img src="/Blog/images/music/lesson14_120.png" />
<li> 它们被用来让穿过屏障（如本例中的音节）的音符，声音的持续时间。<br /><img src="/Blog/images/music/lesson14_140.png" />
<li> 第四和第五音符现在合并在一起。<br /><img src="/Blog/images/music/lesson14_160.png" />
<li> 如果音节分隔线都没有了，我们可以写一个半音符来代替。<br /><img src="/Blog/images/music/lesson14_180.png" /><br /><img src="/Blog/images/music/lesson14_200.png" />
<li> 使用此图表参考增强点。<br /><img src="/Blog/images/music/lesson14_220.png" /><br />完整的流程如下: <br />
<embed src="/Blog/videos/lesson14.swf" width="800" height="380" type="application/x-shockwave-flash" />


<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</li></li></li></li></li></li></li></li></li></li></ul></div>

		
		
	</div>


<div class="meta">
	<div class="date">




</div>
	<div class="tags">


	<a class='category' href='/Blog/blog/categories/yin-le/'>音乐</a>


</div>
	
	<div class="comments"><a href="/Blog/blog/2016/09/08/yin-le-le-li-dian-he-lian-xian/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/Blog/blog/2016/09/08/yin-le-le-li-xiu-zhi-fu/">
		
			音乐乐理:休止符</a>
	</h2>
	<div class="entry-content">
		<div id="static">
<ul>
<li>休止符标示在一个音节中沉默的时期。<br /><img src="/Blog/images/music/lesson13_20.png" />
<li>每种类型的休止符对应的同等类型的音符的持续时间。<br /><img src="/Blog/images/music/lesson13_40.png" />
<li>例如:这两个四分之一休止符和四分音符占用的时间是相同的。<br /><img src="/Blog/images/music/lesson13_60.png" /><br />当音符发出声音时，休止符是沉默的。
<li>为了证明这一点，让我们填写4/4时间的音节与四分音符。<br /><img src="/Blog/images/music/lesson13_80.png" /><br />当弹奏时，所有的音符都发出声音。
<li>接下来，我们替换第二个音符为休止符。<br /><img src="/Blog/images/music/lesson13_100.png" /><br />当弹奏时，第二个没有声音。
<li>接下来，我们讨论其他类型的休止符。<br /><img src="/Blog/images/music/lesson13_120.png" />
<li>一个全休止符占据的时间是相同的全音符。<br /><img src="/Blog/images/music/lesson13_140.png" />
<li>它被画成一个盒子从第四条五线谱向下。<br /><img src="/Blog/images/music/lesson13_160.png" />
<li>半休止符占有时间等同数量的一半音符。<br /><img src="/Blog/images/music/lesson13_180.png" />
<li>它被画成一个盒子从中间线的五线谱升起。<br /><img src="/Blog/images/music/lesson13_200.png" />
<li>像音符，休止符可以有标志。<br /><img src="/Blog/images/music/lesson13_220.png" />
<li>与一个标志，八分休止符具有相同的持续时间作为一个八分音符。<br /><img src="/Blog/images/music/lesson13_240.png" />
<li>有两个标志，十六休止符有相同的时间为十六分音符。<br /><img src="/Blog/images/music/lesson13_260.png" />
<li>尽管罕见，休止符可以有三个或更多个标志。<br /><img src="/Blog/images/music/lesson13_280.png" />
<li>使用此图表，以供参考休止符。<br /><img src="/Blog/images/music/lesson13_281.png" /> 


<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul></div>

		
		
	</div>


<div class="meta">
	<div class="date">




</div>
	<div class="tags">


	<a class='category' href='/Blog/blog/categories/yin-le/'>音乐</a>


</div>
	
	<div class="comments"><a href="/Blog/blog/2016/09/08/yin-le-le-li-xiu-zhi-fu/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/Blog/blog/2016/09/07/yin-le-le-li-biao-zhun-yin-yu-jie-pai/">
		
			音乐乐理:标准音与节拍</a>
	</h2>
	<div class="entry-content">
		<div id="static">
<ul>
<li> 垂直的黑线将切分五线谱。<br /><img src="/Blog/images/music/lesson12_20@2x.png" />
<li> 五线谱划分两个音符区。 <br /><img src="/Blog/images/music/lesson12_40@2x.png" />
<li> 节拍定义了每个区包含的不同种类的音符。
<li> 第一个区的节拍是 4/4 第二个区的节拍是 3/4 。<br /><img src="/Blog/images/music/lesson12_60@2x.png" />
<li> 第一区 (4/4) 包含四个四分音符。<br /><img src="/Blog/images/music/lesson12_80@2x.png" />
<li> 第二区(3/4) 包含三个四分音符。<br /><img src="/Blog/images/music/lesson12_100@2x.png" />
<li> 接下来，我们将讨论非四分音符节拍。<br /><img src="/Blog/images/music/lesson12_120@2x.png" />
<li> 6/8 包含了六个八分音符。<br /><img src="/Blog/images/music/lesson12_140@2x.png" />
<li> 3/2 包含三个半音符。<br /><img src="/Blog/images/music/lesson12_160@2x.png" />
<li> 该图表显示了所有我们讨论的节拍。<br /><img src="/Blog/images/music/lesson12_161@2x.png" />


<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</li></li></li></li></li></li></li></li></li></li></ul></div>

		
		
	</div>


<div class="meta">
	<div class="date">




</div>
	<div class="tags">


	<a class='category' href='/Blog/blog/categories/yin-le/'>音乐</a>


</div>
	
	<div class="comments"><a href="/Blog/blog/2016/09/07/yin-le-le-li-biao-zhun-yin-yu-jie-pai/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/Blog/blog/2016/09/06/yin-le-le-li-yin-fu-chi-xu-shi-jian/">
		
			音乐乐理:音符持续时间</a>
	</h2>
	<div class="entry-content">
		<div id="static">
<ul>
<li> 一个音符演奏的时间长度被称为它的音符时值，它是由音符的类型决定。<br /><img src="/Blog/images/music/lesson11_20@2x.png" />
<li> 该全音符在现代音乐最长的音符时值。<br /><img src="/Blog/images/music/lesson11_40@2x.png" />
<li> 二分音符具有全音符的一半的持续时间。<br /><img src="/Blog/images/music/lesson11_60@2x.png" />
<li> 两个半音符占据的时间相同为一体的全音符。<br /><img src="/Blog/images/music/lesson11_80@2x.png" />
<li> 四分音符为全音符的第四（或四分之一）。<br /><img src="/Blog/images/music/lesson11_100@2x.png" />
<li> 四个四分音符占据的时间相同为一体的全音符。两个四分音符等于一个半音符的持续时间。<br /><img src="/Blog/images/music/lesson11_120@2x.png" />
<li> 注意到，在持续时间小于四分音符有标志。每个标志减半音符的价值。<br /><img src="/Blog/images/music/lesson11_140@2x.png" />
<li> 八分音符有一个标志。<br /><img src="/Blog/images/music/lesson11_160@2x.png" />
<li> 因此，二个八分音符占用的时间相同数量的四分之一音符。<br /><img src="/Blog/images/music/lesson11_180@2x.png" />
<li> 一个十六分音符有两个标志，再减半值。<br /><img src="/Blog/images/music/lesson11_200@2x.png" />
<li> 两个十六分音符等于八分音符的持续时间。<br /><img src="/Blog/images/music/lesson11_220@2x.png" />
<li> 四个十六分音符占据的时间相同数量的四分之一音符。<br /><img src="/Blog/images/music/lesson11_240@2x.png" />
<li> 虽然可以有一个与三个或更多个标志音符，它们一般不使用。<br /><img src="/Blog/images/music/lesson11_260@2x.png" />
<li> 该图表显示在本节讨论的所有五种音符类型的关系。<br /><img src="/Blog/images/music/lesson11_261@2x.png" />


<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul></div>

		
		
	</div>


<div class="meta">
	<div class="date">




</div>
	<div class="tags">


	<a class='category' href='/Blog/blog/categories/yin-le/'>音乐</a>


</div>
	
	<div class="comments"><a href="/Blog/blog/2016/09/06/yin-le-le-li-yin-fu-chi-xu-shi-jian/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/Blog/blog/2016/09/06/yin-le-le-li-wu-xian-pu-%2Cpu-hao-%2Cjia-xian/">
		
			音乐乐理:五线谱，谱号，加线</a>
	</h2>
	<div class="entry-content">
		<p>
<code>五线谱</code>是对音符绘制的基础。现代的五线谱是由5根线和4个空间组成的。
<br />
<img src="http://ww2.sinaimg.cn/large/626e5d69gw1f7jn3flan2j21kw0lcdh6.jpg" />
在五线谱上的每行线或者空白处都表示键盘上的白建。
<br />
</p>

<p>
谱号分配给各个音符某些行或空格。
两个谱号经常用到，分别是：高音和低音。
<br />
<img src="http://ww3.sinaimg.cn/large/626e5d69gw1f7jqbp0363j21kw0lcq4r.jpg" />
<br />
我们先讨论高音（通常也称为G 谱）.该谱号环绕（显示为红色）五线谱线被称为G.放在该行的任何音符变成G.
<br />
G调以上的空白处的调是A调（记住，没有一个“H”调）
<br />
A调以上的调是B调。以此类推，G、A、B、C、D、E、F、G
<br />
<img src="http://ww1.sinaimg.cn/large/626e5d69gw1f7jqd7qzk5j21kw0lcdi6.jpg" />
额我们看来已经超过了五线谱的范围了，这时候该怎么办？
</p>

<p>
加线将解决我们的困境。
我们在五线谱之外，额外添加一条线，然后在这个线处继续添加A
<br />
<img src="http://ww2.sinaimg.cn/large/626e5d69gw1f7jsx3rujij21kw0lcdi5.jpg" />
</p>

		
		<a href="/Blog/blog/2016/09/06/yin-le-le-li-wu-xian-pu-%2Cpu-hao-%2Cjia-xian/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">




</div>
	<div class="tags">


	<a class='category' href='/Blog/blog/categories/yin-le/'>音乐</a>


</div>
	
	<div class="comments"><a href="/Blog/blog/2016/09/06/yin-le-le-li-wu-xian-pu-%2Cpu-hao-%2Cjia-xian/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/Blog/blog/2016/09/05/ios-tui-song-zheng-shu-guo-qi-zhi-nan/">
		
			iOS 推送证书过期指南</a>
	</h2>
	<div class="entry-content">
		<p>  
今天一早，运维部门同事，说咱们友盟上面推送证书已经到期了。那么到期了证书应该怎么样去更换新的证书呢。
</p>
<p>
1、我们先去<a href="https://developer.apple.com/account/ios/certificate/distribution">苹果开发者中心</a>新建一个Certificates证书。
</p>
<p>
2、下载<code>Cert</code>文件到本地，双击之后。在<code>Keychain Access</code>中找到我们创建的证书。Export导出p12格式，创建密码。
</p>
<p>
3、有时候后端需要pem格式的证书,我们通过终端进入p12 文件所在的文件夹，通过终端输入下面的命令生成pem文件
<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class=""><span class="line">openssl pkcs12 -in dev_push_Certificates.p12 -out apns-dev-cert.pem -nodes -clcerts
</span><span class="line">Enter Import Password:
</span><span class="line">MAC verified OK</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<p>
4、生成证书后，只要替换Push证书就好了。
</p>
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">




</div>
	<div class="tags">


	<a class='category' href='/Blog/blog/categories/ios/'>iOS</a>


</div>
	
	<div class="comments"><a href="/Blog/blog/2016/09/05/ios-tui-song-zheng-shu-guo-qi-zhi-nan/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/Blog/blog/2016/08/29/ioskai-fa-jin-nang/">
		
			iOS开发锦囊</a>
	</h2>
	<div class="entry-content">
		<p>
1、判断是不是AppStore版本
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isAppStoreEnvironment</span> <span class="p">{</span>
</span><span class="line"><span class="cp">#if TARGET_OS_IOS &amp;&amp; !TARGET_IPHONE_SIMULATOR</span>
</span><span class="line">    <span class="k">return</span> <span class="p">([[</span><span class="n">NSBundle</span> <span class="n">mainBundle</span><span class="p">]</span> <span class="nl">pathForResource:</span><span class="s">@&quot;embedded&quot;</span> <span class="nl">ofType:</span><span class="s">@&quot;mobileprovision&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">);</span>
</span><span class="line"><span class="cp">#endif</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">NO</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>
<p>
2、判断当前系统时区名称
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">+</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">currentSystemTimeZoneName</span> <span class="p">{</span>
</span><span class="line">    <span class="k">static</span> <span class="n">NSLock</span> <span class="o">*</span> <span class="n">methodLock</span><span class="p">;</span>
</span><span class="line">    <span class="k">static</span> <span class="n">dispatch_once_t</span> <span class="n">onceToken</span><span class="p">;</span>
</span><span class="line">    <span class="n">dispatch_once</span><span class="p">(</span><span class="o">&amp;</span><span class="n">onceToken</span><span class="p">,</span> <span class="o">^</span><span class="p">{</span>
</span><span class="line">        <span class="n">methodLock</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSLock</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class="line">    <span class="p">});</span>
</span><span class="line">
</span><span class="line">    <span class="p">[</span><span class="n">methodLock</span> <span class="n">lock</span><span class="p">];</span>
</span><span class="line">    <span class="p">[</span><span class="n">NSTimeZone</span> <span class="n">resetSystemTimeZone</span><span class="p">];</span>
</span><span class="line">    <span class="n">NSString</span> <span class="o">*</span> <span class="n">systemTimeZoneName</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSTimeZone</span> <span class="n">systemTimeZone</span><span class="p">].</span><span class="n">name</span> <span class="n">copy</span><span class="p">];</span>
</span><span class="line">    <span class="p">[</span><span class="n">methodLock</span> <span class="n">unlock</span><span class="p">];</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">systemTimeZoneName</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>

<p>
3、安全的执行method
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cm">/**</span>
</span><span class="line"><span class="cm"> * Performs selector on the target, only if the target and selector are non-nil,</span>
</span><span class="line"><span class="cm"> * as well as target responds to selector</span>
</span><span class="line"><span class="cm"> */</span>
</span><span class="line"><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">safePerformSelector:</span><span class="p">(</span><span class="kt">SEL</span><span class="p">)</span><span class="nv">selector</span> <span class="nf">withTarget:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">target</span> <span class="nf">object:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">object</span> <span class="nf">object:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">anotherObject</span> <span class="p">{</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">target</span> <span class="o">==</span> <span class="nb">nil</span> <span class="o">||</span> <span class="n">selector</span> <span class="o">==</span> <span class="nb">nil</span> <span class="o">||</span> <span class="o">!</span><span class="p">[</span><span class="n">target</span> <span class="nl">respondsToSelector:</span><span class="n">selector</span><span class="p">])</span> <span class="p">{</span>
</span><span class="line">        <span class="k">return</span><span class="p">;</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="cp">#pragma clang diagnostic push</span>
</span><span class="line"><span class="cp">#pragma clang diagnostic ignored &quot;-Warc-performSelector-leaks&quot;</span>
</span><span class="line">    <span class="p">[</span><span class="n">target</span> <span class="nl">performSelector:</span><span class="n">selector</span> <span class="nl">withObject:</span><span class="n">object</span> <span class="nl">withObject:</span><span class="n">anotherObject</span><span class="p">];</span>
</span><span class="line"><span class="cp">#pragma clang diagnostic pop</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<p>
4、主线程执行
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">+</span> <span class="p">(</span><span class="n">CLLocationManager</span> <span class="o">*</span><span class="p">)</span><span class="nf">_newSystemLocationManager</span> <span class="p">{</span>
</span><span class="line">    <span class="n">__</span> <span class="n">block</span> <span class="n">CLLocationManager</span> <span class="o">*</span> <span class="n">manager</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// CLLocationManager should be created only on main thread, as it needs a run loop to serve delegate callbacks</span>
</span><span class="line">    <span class="n">dispatch_block_t</span> <span class="n">block</span> <span class="o">=</span> <span class="o">^</span><span class="p">{</span>
</span><span class="line">        <span class="n">manager</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CLLocationManager</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class="line">    <span class="p">};</span>
</span><span class="line">    <span class="k">if</span> <span class="p">([</span><span class="n">NSThread</span> <span class="n">currentThread</span><span class="p">].</span><span class="n">isMainThread</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">block</span><span class="p">();</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="n">dispatch_sync</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="n">block</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="k">return</span> <span class="n">manager</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>

<p>
5、添加Block
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">addBlockForCurrentLocation:</span><span class="p">(</span><span class="n">PFLocationManagerLocationUpdateBlock</span><span class="p">)</span><span class="nv">handler</span> <span class="p">{</span>
</span><span class="line">    <span class="k">@synchronized</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">blockSet</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">blockSet</span> <span class="nl">addObject:</span><span class="p">[</span><span class="n">handler</span> <span class="n">copy</span><span class="p">]];</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="c1">//</span>
</span><span class="line">    <span class="c1">// Abandon hope all ye who enter here.</span>
</span><span class="line">    <span class="c1">// Apparently, the CLLocationManager API is different for iOS/OSX/watchOS/tvOS up to the point,</span>
</span><span class="line">    <span class="c1">// where encapsulating pieces together just makes much more sense</span>
</span><span class="line">    <span class="c1">// than hard to human-parse compiled out pieces of the code.</span>
</span><span class="line">    <span class="c1">// This looks duplicated, slightly, but very much intentional.</span>
</span><span class="line">    <span class="c1">//</span>
</span><span class="line"><span class="cp">#if TARGET_OS_WATCH</span>
</span><span class="line">    <span class="k">if</span> <span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">bundle</span> <span class="nl">objectForInfoDictionaryKey:</span><span class="s">@&quot;NSLocationWhenInUseUsageDescription&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestWhenInUseAuthorization</span><span class="p">];</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestAlwaysAuthorization</span><span class="p">];</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestLocation</span><span class="p">];</span>
</span><span class="line"><span class="cp">#elif TARGET_OS_TV</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestWhenInUseAuthorization</span><span class="p">];</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestLocation</span><span class="p">];</span>
</span><span class="line"><span class="cp">#elif TARGET_OS_IOS</span>
</span><span class="line">    <span class="k">if</span> <span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="nl">respondsToSelector:</span><span class="k">@selector</span><span class="p">(</span><span class="n">requestAlwaysAuthorization</span><span class="p">)])</span> <span class="p">{</span>
</span><span class="line">        <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">application</span><span class="p">.</span><span class="n">applicationState</span> <span class="o">!=</span> <span class="n">UIApplicationStateBackground</span> <span class="o">&amp;&amp;</span>
</span><span class="line">            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">bundle</span> <span class="nl">objectForInfoDictionaryKey:</span><span class="s">@&quot;NSLocationWhenInUseUsageDescription&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestWhenInUseAuthorization</span><span class="p">];</span>
</span><span class="line">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">requestAlwaysAuthorization</span><span class="p">];</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">startUpdatingLocation</span><span class="p">];</span>
</span><span class="line"><span class="cp">#elif PF_TARGET_OS_OSX</span>
</span><span class="line">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">startUpdatingLocation</span><span class="p">];</span>
</span><span class="line"><span class="cp">#endif</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>

<p>
6、安全执行线程
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>
</span><span class="line"><span class="k">extern</span> <span class="n">dispatch_queue_t</span> <span class="nf">JPThreadsafetyCreateQueueForObject</span><span class="p">(</span><span class="kt">id</span> <span class="n">object</span><span class="p">);</span>
</span><span class="line"><span class="k">extern</span> <span class="kt">void</span> <span class="nf">JPThreadsafetySafeDispatchSync</span><span class="p">(</span><span class="n">dispatch_queue_t</span> <span class="n">queue</span><span class="p">,</span> <span class="n">dispatch_block_t</span> <span class="n">block</span><span class="p">);</span>
</span><span class="line"><span class="cp">#define JPThreadSafetyPerform(queue, block) ({                      \</span>
</span><span class="line"><span class="cp">    __ block typeof((block())) result;                              \</span>
</span><span class="line"><span class="cp">    JPThreadsafetySafeDispatchSync(queue, ^{ result = block(); }); \</span>
</span><span class="line"><span class="cp">    result;                                                        \</span>
</span><span class="line"><span class="cp">})</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &quot;JPThreadsafety.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="k">static</span> <span class="kt">void</span> <span class="o">*</span><span class="k">const</span> <span class="n">JPThreadsafetyQueueIDKey</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">JPThreadsafetyQueueIDKey</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="n">dispatch_queue_t</span> <span class="nf">JPThreadsafetyCreateQueueForObject</span><span class="p">(</span><span class="kt">id</span> <span class="n">object</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="n">NSString</span><span class="o">*</span> <span class="n">label</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSStringFromClass</span><span class="p">([</span><span class="n">object</span> <span class="n">class</span><span class="p">])</span> <span class="nl">stringByAppendingString:</span><span class="s">@&quot;.synchronizationQueue&quot;</span><span class="p">];</span>
</span><span class="line">    <span class="n">dispatch_queue_t</span> <span class="n">queue</span> <span class="o">=</span> <span class="n">dispatch_queue_create</span><span class="p">(</span><span class="n">label</span><span class="p">.</span><span class="n">UTF8String</span><span class="p">,</span> <span class="n">DISPATCH_QUEUE_SERIAL</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="kt">void</span><span class="o">*</span> <span class="n">uuid</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">uuid</span><span class="p">));</span>
</span><span class="line">    <span class="n">dispatch_queue_set_specific</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">JPThreadsafetyQueueIDKey</span><span class="p">,</span> <span class="n">uuid</span><span class="p">,</span> <span class="n">free</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">queue</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="nf">JPThreadsafetySafeDispatchSync</span><span class="p">(</span><span class="n">dispatch_queue_t</span> <span class="n">queue</span><span class="p">,</span> <span class="n">dispatch_block_t</span> <span class="n">block</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="kt">void</span><span class="o">*</span> <span class="n">uuidMine</span> <span class="o">=</span> <span class="n">dispatch_get_specific</span><span class="p">(</span><span class="n">JPThreadsafetyQueueIDKey</span><span class="p">);</span>
</span><span class="line">    <span class="kt">void</span><span class="o">*</span> <span class="n">uuidOther</span> <span class="o">=</span> <span class="n">dispatch_queue_get_specific</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">JPThreadsafetyQueueIDKey</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">uuidMine</span> <span class="o">==</span> <span class="n">uuidOther</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">block</span><span class="p">();</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="n">dispatch_sync</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">block</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>
<p class="post-footer">
                        written by <a href="http://ITMonkeyLife.github.io/Blog">Rick</a>&nbsp;posted at <a href="http://ITMonkeyLife.github.io/Blog">http://ITMonkeyLife.github.io/Blog</a></p>
</p></p>

		
		
	</div>


<div class="meta">
	<div class="date">




</div>
	<div class="tags">


	<a class='category' href='/Blog/blog/categories/ios/'>iOS</a>


</div>
	
	<div class="comments"><a href="/Blog/blog/2016/08/29/ioskai-fa-jin-nang/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/Blog/blog/2016/08/26/method-swizzling/">
		
			Method Swizzling</a>
	</h2>
	<div class="entry-content">
		<p>
在没有一个类的实现源码的情况下，想改变其中一个方法的实现，除了继承它重写、和借助类别重名方法暴力抢先之外，还有更加灵活的方法吗？在Objective-C编程中，如何实现hook呢？标题有点大，计划分几篇来总结。

本文主要介绍针对selector的hook，主角被标题剧透了———— Method Swizzling
</p>
<h2>Method Swizzling 原理</h2>
<p>在Objective-C中调用一个方法，其实是向一个对象发送消息，查找消息的唯一依据是selector的名字。利用Objective-C的动态特性，可以实现在运行时偷换selector对应的方法实现，达到给方法挂钩的目的。</p>
<p>每个类都有一个方法列表，存放着selector的名字和方法实现的映射关系。IMP有点类似函数指针，指向具体的Method实现。</p>
<p><img src="http://ww3.sinaimg.cn/large/626e5d69gw1f76wrdzvssj214y0dcmxy.jpg" /></p>
<p>
我们可以利用 method_exchangeImplementations 来交换2个方法中的IMP，

我们可以利用 class_replaceMethod 来修改类，

我们可以利用 method_setImplementation 来直接设置某个方法的IMP，
……
归根结底，都是偷换了selector的IMP，如下图所示：
</p>
<p><img src="http://ww2.sinaimg.cn/large/626e5d69gw1f76wshrop2j20kf09mt95.jpg" /></p>
<h2>Method Swizzling 实践</h2>
<p>

举个例子好了，我想钩一下NSArray的lastObject 方法，只需两个步骤。
第一步：给NSArray加一个我自己的lastObject
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &quot;NSArray+Swizzle.h&quot;  </span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">@implementation</span> <span class="nc">NSArray</span> <span class="nl">(Swizzle)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">myLastObject</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="kt">id</span> <span class="n">ret</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="n">myLastObject</span><span class="p">];</span>
</span><span class="line">    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;**********  myLastObject *********** &quot;</span><span class="p">);</span>
</span><span class="line">    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
乍一看，这不递归了么？别忘记这是我们准备调换IMP的selector，[self myLastObject] 将会执行真的 [self lastObject] 。
</p>
<p>
第二步：调换IMP
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &lt;objc/runtime.h&gt;  </span>
</span><span class="line"><span class="cp">#import &quot;NSArray+Swizzle.h&quot;  </span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="err">@</span><span class="n">autoreleasepool</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">        <span class="n">Method</span> <span class="n">ori_Method</span> <span class="o">=</span>  <span class="n">class_getInstanceMethod</span><span class="p">([</span><span class="n">NSArray</span> <span class="n">class</span><span class="p">],</span> <span class="k">@selector</span><span class="p">(</span><span class="n">lastObject</span><span class="p">));</span>
</span><span class="line">        <span class="n">Method</span> <span class="n">my_Method</span> <span class="o">=</span> <span class="n">class_getInstanceMethod</span><span class="p">([</span><span class="n">NSArray</span> <span class="n">class</span><span class="p">],</span> <span class="k">@selector</span><span class="p">(</span><span class="n">myLastObject</span><span class="p">));</span>
</span><span class="line">        <span class="n">method_exchangeImplementations</span><span class="p">(</span><span class="n">ori_Method</span><span class="p">,</span> <span class="n">my_Method</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">        <span class="n">NSArray</span><span class="o">*</span> <span class="n">array</span> <span class="o">=</span> <span class="err">@</span><span class="p">[</span><span class="s">@&quot;0&quot;</span><span class="p">,</span><span class="s">@&quot;1&quot;</span><span class="p">,</span><span class="s">@&quot;2&quot;</span><span class="p">,</span><span class="s">@&quot;3&quot;</span><span class="p">];</span>
</span><span class="line">        <span class="n">NSString</span><span class="o">*</span> <span class="n">string</span> <span class="o">=</span> <span class="p">[</span><span class="n">array</span> <span class="n">lastObject</span><span class="p">];</span>
</span><span class="line">        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;TEST RESULT : %@&quot;</span><span class="p">,</span><span class="n">string</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</p>

		
		<a href="/Blog/blog/2016/08/26/method-swizzling/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">




</div>
	<div class="tags">


	<a class='category' href='/Blog/blog/categories/ios/'>iOS</a>


</div>
	
	<div class="comments"><a href="/Blog/blog/2016/08/26/method-swizzling/#disqus_thread">Comments</a></div>
	
</div>
</article>

<nav id="pagenavi">
    
    
        <a href="/Blog/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/Blog/blog/archives">Blog Archives</a></div>
</nav>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2016

    Rick

</footer>
	<script src="/Blog/javascripts/slash.js"></script>
<script src="/Blog/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'ITMonkeyLife';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-52658428-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
